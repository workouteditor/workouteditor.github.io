{"version":3,"sources":["assets/icon.png","assets/facebook.png","assets/twitter.png","assets/profile.jpg","components/Comment/EditComment.module.css","components/Constants.js","components/Label/Label.tsx","components/helpers.js","components/Bar/Bar.tsx","components/Trapeze/Trapeze.tsx","components/FreeRide/FreeRide.tsx","components/Interval/Interval.tsx","components/Comment/Comment.tsx","components/Comment/EditComment.tsx","components/Popup/Popup.tsx","components/Privacy/Privacy.tsx","components/Terms/Terms.tsx","components/Footer/Footer.tsx","components/firebase.js","components/Workouts/Workouts.tsx","components/Editor/TimeAxis.tsx","components/Editor/DistanceAxis.tsx","components/Editor/ZoneAxis.tsx","assets/warmdown.svg","assets/warmup.svg","assets/interval.svg","assets/steady.svg","components/Forms/Checkbox.tsx","components/Forms/SaveForm.tsx","components/Forms/SignupForm.tsx","components/Forms/LoginForm.tsx","components/Forms/ForgotPasswordForm.tsx","components/Forms/UpdatePasswordForm.tsx","components/Editor/RunningTimesEditor.tsx","components/Editor/LeftRightToggle.tsx","timeInterval.js","components/Editor/createWorkoutXml.ts","components/Forms/ShareForm.tsx","components/Editor/Editor.tsx","Home.tsx","components/Chart/ChartBar.tsx","components/Search/Search.tsx","components/Chart/ChartApex.tsx","App.tsx","serviceWorker.js","index.js"],"names":["module","exports","Colors","Zones","Z1","min","max","Z2","Z3","Z4","Z5","Z6","ZonesArray","Label","props","paces","className","duration","icon","faClock","fixedWidth","power","sportType","faBolt","powerStart","powerEnd","weight","ftp","toFixed","undefined","distance","faRuler","pace","replace","type","step","name","value","cadence","onChange","e","setCadence","parseInt","target","onClick","stopPropagation","speed","speedStart","speedEnd","helpers","getWorkoutLength","bars","durationType","length","map","bar","time","repeat","onDuration","offDuration","getStressScore","tss","np","iff","startPower","endPower","npOn","onPower","iffOn","npOff","offPower","iffOff","calculateEstimatedTimes","distances","times","estimatedTimes","forEach","i","index","et","moment","asSeconds","utc","format","getWorkoutDistance","getTimeinSeconds","formatDuration","seconds","trim","calculateTime","calculateDistance","round","x","roundTo","Math","floor","calculateSpeed","Bar","zone","powerLabel","style","backgroundColor","useState","width","setWidth","height","setHeight","showLabel","setShowLabel","selected","setSelected","useEffect","onMouseEnter","onMouseLeave","id","zIndex","handleCadenceChange","size","minWidth","minHeight","maxHeight","enable","top","right","grid","onResizeStop","direction","ref","d","dWidth","dHeight","handleResizeStop","onResize","handleResize","Trapeze","powerLabelStart","powerLabelEnd","avgPower","abs","durationLabel","height1","setHeight1","height2","setHeight2","height3","setHeight3","trapezeHeight","trapezeTop","vertexB","vertexA","vertexD","calculateColors","flexDirection","start","end","handleResize1","handleResize2","newWidth","handleResize3","points","FreeRide","Interval","uuidv4","require","v4","setBars","nIntervals","setNIntervals","setOnDuration","setOffDuration","onLength","setOnLength","offLength","setOffLength","push","restingCadence","renderBar","withLabel","key","values","findIndex","handleIntervalChange","handleOnChange","handleIntervalClick","Comment","instruction","setTime","isDragging","setIsDragging","setLength","axis","handle","defaultPosition","y","bounds","left","scale","onStop","data","position","text","onDrag","display","opacity","faCommentDots","faComment","fontSize","data-testid","EditComment","setText","showInput","setShowInput","styles","container","box","placeholder","textArea","onBlur","cta","btnPrimary","lenth","btnSecondary","dismiss","btnIcon","onDelete","faTrashAlt","Popop","faTimesCircle","children","Privacy","color","textAlign","href","Terms","Footer","showTerms","setShowTerm","showPrivacy","setShowPrivacy","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","Workouts","workouts","setWorkouts","React","database","userId","orderByChild","once","then","snapshot","child","val","description","updatedAt","workoutTime","workoutDistance","item","TimeAxis","hours","Array","flatMap","v","h","m","DistanceAxis","ZoneAxis","Object","entries","reverse","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref3","_ref4","_ref5","stroke","strokeWidth","fill","fillRule","_ref","svgRef","title","viewBox","ForwardRef","forwardRef","Checkbox","label","checked","isSelected","onCheckboxChange","DEFAULT_TAGS","SaveForm","htmlFor","onNameChange","onDescriptionChange","author","onAuthorChange","tagName","tags","includes","onTagsChange","filter","addOrRemoveTag","onSave","onDismiss","onLogout","SignupForm","email","setEmail","password","setPassword","error","setError","onSubmit","createUserWithEmailAndPassword","result","user","signUp","catch","message","preventDefault","showLogin","required","autoComplete","LoginForm","signInWithEmailAndPassword","login","showSignup","showForgotPassword","ForgotPasswordForm","success","setSuccess","disabled","setDisabled","sendPasswordResetEmail","forgotPassword","UpdatePasswordForm","confirmPassword","setConfirmPassword","location","useLocation","code","URLSearchParams","search","get","confirmPasswordReset","resetPassword","RunningTimesEditor","estimateRunningTimes","useCallback","oneMile","fiveKm","tenKm","halfMarathon","marathon","RunTimeInput","defaultOpenValue","LeftRightToggle","leftValue","rightValue","leftIcon","rightIcon","checkedIcon","uncheckedIcon","onColor","offColor","TimeInterval","effort","effort2","factor","s","padEnd","format_sec","createWorkoutMrcErg","idx","fileName","separateBars","intervals","separateInstructions","interval","cur","prev","out","toString","join","ShareForm","copied","setCopied","sherableLinkRef","useRef","copyToClipboard","node","current","select","document","execCommand","faCopy","Editor","match","params","localStorage","getItem","generateId","setId","JSON","parse","actionId","setActionId","setFtp","setWeight","instructions","setInstructions","setTags","setName","setDescription","setAuthor","savePopupIsVisile","setSavePopupVisibility","sharePopupIsVisile","setSharePopupVisibility","setUser","visibleForm","setVisibleForm","canvasRef","segmentsRef","segmentsWidth","setSegmentsWidth","setMessage","showWorkouts","setShowWorkouts","setSportType","setDurationType","runningTimesJson","loadRunningTimes","runningTimes","setRunningTimes","textEditorIsVisible","setTextEditorIsVisible","selectedInstruction","setSelectedInstruction","fileNames","setFileNames","separateAuthors","setSeparateAuthors","separateDescription","setSeparateDescription","separateTags","setSeparateTags","setSeparateBars","setSeparateInstructions","random","substr","newWorkout","console","log","updatedArray","handleOnClick","addBar","b","addTrapeze","zone1","zone2","addFreeRide","addInterval","addInstruction","changeInstruction","removeBar","saveWorkout","save","visible","class","fileArr","xml","separateAuthor","separateTag","totalTime","totalLength","Builder","begin","ele","up","tag","t","create","att","importDocument","segment","ramp","timeoffset","distoffset","pretty","createWorkoutXml","mrc","erg","fileZwo","Blob","fileMrc","fileErg","itemsRef","workout","uid","Date","item2","updates","update","upload","timeout","delay","Promise","res","setTimeout","a","file","url","window","URL","createObjectURL","body","appendChild","download","click","revokeObjectURL","fetch","process","REACT_APP_UPLOAD_FUNCTION","method","stringify","fileType","json","signedUrl","uploadURL","headers","response","fetchAndParse","workout_file","Converter","xml2js","elements","authorIndex","element","nameIndex","descriptionIndex","workoutIndex","w","parseFloat","attributes","Duration","Power","PowerLow","Cadence","Pace","PowerHigh","Repeat","OnDuration","OffDuration","OnPower","OffPower","CadenceResting","textElements","toLowerCase","setItem","onAuthStateChanged","history","replaceState","ReactGA","initialize","pageview","pathname","scrollWidth","renderRegistrationForm","workoutId","onKeyDown","event","HTMLInputElement","HTMLTextAreaElement","keyCode","removeTimeToBar","addTimeToBar","addPowerToBar","removePowerToBar","tabIndex","Helmet","content","property","rel","deleteInstruction","signOut","faBiking","faRunning","newSportType","textValue","tmpBars","tmpBarsSum","tmpInstructions","tmpInstructionsSum","split","workoutBlock","powerInWatts","powerInWattsPerKg","powerInPercentageFtp","durationInSeconds","durationInMinutes","startPowerInWatts","startPowerInWattsPerKg","startPowerInPercentageFtp","endPowerInWatts","endPowerInWattsPerKg","endPowerInPercentageFtp","multiplier","nTimes","offDurationInSeconds","offDurationInMinutes","rpm","transformTextToWorkout","rows","spellCheck","splice","moveLeft","faArrowLeft","moveRight","faArrowRight","faTrash","duplicateBar","getPace","setPace","renderTrapeze","renderFreeRide","renderInterval","find","renderComment","effect","confirm","data-tip","faPen","faBicycle","faFile","faSave","deleteWorkout","downloadWorkout","faDownload","accept","handleUpload","files","getElementById","faUpload","faList","shareWorkout","faShareAlt","Home","src","Icon","alt","to","faLaptop","faCloud","faPiggyBank","Twitter","open","encodeURIComponent","Facebook","role","aria-label","defaultNames","timeStringToFloat","hoursMinutesSeconds","minutes","toISOString","substring","ChartBar","mData","state","timesData","Times","array","obj","RaceName","Names","Racer","indexBy","margin","bottom","padding","valueScale","indexScale","valueFormat","colors","scheme","colorBy","borderColor","from","modifiers","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","legendPosition","legendOffset","axisLeft","labelSkipWidth","labelSkipHeight","labelTextColor","legends","dataFrom","anchor","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemDirection","itemOpacity","symbolSize","effects","on","Search","useHistory","app","credentials","enableAppbase","componentId","dataField","showCheckbox","marginTop","fieldWeights","pagination","react","and","render","ResultCardsWrapper","_id","Image","backgroundImage","profilePhoto","Title","fontFamily","fontWeight","dangerouslySetInnerHTML","__html","Description","Sex","Country","Division","ChartApex","options","chart","xaxis","categories","series","marginLeft","Component","App","path","component","Boolean","hostname","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cef0826e.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAF3CAMAAABpHvvMAAAAdVBMVEUAAADCnnyBgIFZwXP5zUftbkDYLh9AkNCAgIBYwHP5zUbsbUDWLR8/kM+AgIBZwXT5zUftbkHWLR9Aj9BAkNFBlNCCgoJZxHf50EftcUHbLyQ/j9CAgIBZwXT4zUbsbUHXLh/WLR/sbUD4zEZYwHM/j8+Af4AuOHljAAAAIXRSTlMABpKSkpKS8/Pz8/Pz1dXV1dXVlI8rKysrKyu9vb29vb25aJjaAAAFKElEQVR42uzUSarrUBRDUV9sB1JAik4KeEVsz3+MfwqKTuO/K/YewkJooFKv3e30/qDTbfcaqFjbvY12baBK7fdt9Qt8qd3bbDeQ3+ttx8fX5s7g/0M33/02kN3Jdz8NZPcuNBDunYW7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4h4S7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuBd6ztfj8kHH6/zEvVqbF6O54V6q/SxWPw33SvNiNuNe6LnYPXGvzN1uxt3v6rtfcfc7+u5H3P2WQrjj3lu4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4h4S7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4/6Ue0+WwftDhMj1wr9am1WhquJdq36vVd8O90rSaTbgXeqx2D9wrc7ebcPe7+O4X3P0OvvsBd7+1EO649xbuUrjjjjvu3YW7FO644457d+EuhTvuuOPeXbhL4Y477rh3F+5SuOOOO+7dhbsU7rjjjnt34S6FO+64495duEvhjjvuuHcX7lK444477t2FuxTuuOOOe3fhXug+nvfbB+3P4x33am3cjMaGe6n2tVl9NdwrjZvZiHuh+2Z3x70yd7sRd7+z737G3W/vu+9x99sK4Y477v/YoXMbhmEoCmCQGruxGx9N0kr7j5gNDOR9pAhAjkDv3r179+7du/dH3r179+7du3fv3r179+79mXfv3r179+7du3fv3r17f+bdu3fv3r179+7du3fv3p959+7du3fv3n/9fp3bMr6wbOflvaodI3A07yXtNSKv5r3iGKHDe8E1Ypf33Dlip/fcNmKb99wyYov33Cjw7t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evf/R+933dX5h3fvtvfre+gz05r303t4z8m7eK+99hrr3wvs9Y7f3/L3PWPeev+8ztnvP39cZW73n77PAu3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r17/7RbHzkOAlEURatIjkSTHfe/yv60EWbKY3r//Kqkozco3HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx33ve5Hnf1obx909oPlJ539ZPlZZz9bftHZL3vdM909s7dT3T21PNfdc8sL3b2wvNTdS8uvOvvVBbp7YG/Xuntteai7h5ZHuntkeay7x5ZXunvlWt29tbcb3b2xvNPdO8t73b23fNDdB8sT3T1xLtDnPt1NZb/956E+9+miHXPfM/h4qkfdfXTOPzT2h3fT+bvGfp/zp8b+nPOXxv6a87fG/v7miT53Ox9Ia/fue/4mrX3JQ2ntSx5Ja1/yWFq7n+uPxv6Z+zbIjps+kFnQut81dXrY9IFM62aVd2F+2vSBzMNulfdRcd70gSyifpUPcXnZ9IEs42GJfSKt3Ttu541Jdd30gayScer+ABmSgZr2GxviAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/facebook.7c8d991e.png\";","module.exports = __webpack_public_path__ + \"static/media/twitter.d1044b25.png\";","module.exports = __webpack_public_path__ + \"static/media/profile.96434577.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"EditComment_container__3v7h9\",\"box\":\"EditComment_box__RtwxM\",\"textArea\":\"EditComment_textArea__S8c5i\",\"cta\":\"EditComment_cta__2fxb-\",\"btnPrimary\":\"EditComment_btnPrimary__1xe60\",\"btnSecondary\":\"EditComment_btnSecondary__1k1As\",\"btnIcon\":\"EditComment_btnIcon__1Xb_G\"};","export const Colors = {\n  GRAY: '#807F80',\n  BLUE: '#0E90D4',\n  GREEN: '#00C46A',\n  YELLOW: '#FFCB00',\n  ORANGE: '#FF6430',\n  RED: '#E90000',\n  WHITE: '#FFFFFF'\n}\n\nexport const Zones = {\n  Z1: {\n    min: 0.1,\n    max: 0.605\n  },\n  Z2: {\n    min: 0.605,\n    max: 0.763\n  },\n  Z3: {\n    min: 0.763,\n    max: 0.901\n  },\n  Z4: {\n    min: 0.901,\n    max: 1.053\n  },\n  Z5: {\n    min: 1.053,\n    max: 1.194\n  },\n  Z6: {\n    min: 1.194,\n    max: 2.0\n  }\n}\n\nexport const ZonesArray = [\n  [Zones.Z1.min,Zones.Z1.max],\n  [Zones.Z2.min,Zones.Z2.max],\n  [Zones.Z3.min,Zones.Z3.max],\n  [Zones.Z4.min,Zones.Z4.max],\n  [Zones.Z5.min,Zones.Z5.max],\n  [Zones.Z6.min,Zones.Z6.max],\n]","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBolt, faClock, faRuler } from \"@fortawesome/free-solid-svg-icons\";\nimport \"./Label.css\";\n\nconst Label = (props: {\n  sportType: string;\n  duration: string;\n  distance?: number;\n  power?: number;\n  powerStart?: number;\n  powerEnd?: number;\n  weight?: number;\n  ftp?: number;\n  pace?: number;\n  cadence?: number;\n  setCadence?: Function;\n  speed?: number;\n  speedStart?: number;\n  speedEnd?: number;\n}) => {\n  const paces = [\"1M\", \"5K\", \"10K\", \"HM\", \"M\"];\n\n  return (\n    <div className=\"label\">\n      {props.duration && props.duration !== '00:00' && (\n        <div>\n          <FontAwesomeIcon icon={faClock} fixedWidth /> {props.duration}\n        </div>\n      )}\n      {props.power && props.sportType === \"bike\" && (\n        <div>\n          <FontAwesomeIcon icon={faBolt} fixedWidth /> {props.power}W\n        </div>\n      )}\n      {props.powerStart && props.powerEnd && props.sportType === \"bike\" && (\n        <div>\n          <FontAwesomeIcon icon={faBolt} fixedWidth /> {props.powerStart}W -{\" \"}\n          {props.powerEnd}W\n        </div>\n      )}\n      {props.weight && props.power && props.ftp && props.sportType === \"bike\" && (\n        <div>\n          {(props.power / props.weight).toFixed(1)}W/Kg &middot;{\" \"}\n          {((props.power / props.ftp) * 100).toFixed(0)}% FTP\n        </div>\n      )}\n      {props.powerStart &&\n        props.powerEnd &&\n        props.ftp &&\n        props.sportType === \"bike\" && (\n          <div>\n            {((props.powerStart / props.ftp) * 100).toFixed(0)}% FTP -{\" \"}\n            {((props.powerEnd / props.ftp) * 100).toFixed(0)}% FTP\n          </div>\n        )}\n      {props.sportType === \"run\" && props.distance !== undefined && props.distance !== 0 && (\n        <div>\n          <FontAwesomeIcon icon={faRuler} fixedWidth />{\" \"}\n          {props.distance.toFixed(0)} m\n        </div>\n      )}\n      {props.power &&\n        props.ftp &&\n        props.pace !== null &&\n        props.sportType === \"run\" && (\n          <div>\n            {((props.power / props.ftp) * 100).toFixed(1).replace(/[.]0$/, \"\")}%{\" \"}\n            {paces[props.pace || 0]} pace\n          </div>\n        )}\n      {props.powerStart &&\n        props.powerEnd &&\n        props.ftp &&\n        props.pace !== null &&\n        props.sportType === \"run\" && (\n          <div>\n            {((props.powerStart / props.ftp) * 100).toFixed(0)}% to{\" \"}\n            {((props.powerEnd / props.ftp) * 100).toFixed(0)}%{\" \"}\n            {paces[props.pace || 0]} pace\n          </div>\n        )}\n      {props.sportType === \"bike\" && (\n        <div className=\"cadence-row\">\n          <label className=\"cadenceLabel\">Cadence</label>\n          <input\n            type=\"number\"\n            min=\"40\"\n            max=\"150\"\n            step=\"5\"\n            name=\"cadence\"\n            value={props.cadence || \"\"}\n            onChange={(e) => {\n              if (props.setCadence) props.setCadence(parseInt(e.target.value));\n            }}\n            onClick={(e) => {\n              e.stopPropagation();\n            }}\n            className=\"textField cadence\"\n          />\n        </div>\n      )}\n      {props.sportType === \"run\" && props.speed && (\n        <div>{props.speed?.toFixed(1)} Km/h</div>\n      )}\n      {props.sportType === \"run\" && props.speedStart && props.speedEnd && (\n        <div>\n          {props.speedStart?.toFixed(1)} Km/h - {props.speedEnd?.toFixed(1)}{\" \"}\n          Km/h\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Label;\n","import moment from \"moment\";\nimport \"moment-duration-format\";\n\nconst helpers = {\n  // calculate total time\n  getWorkoutLength: function (bars, durationType) {\n    var length = 0;\n\n    bars.map((bar) => {\n      if (durationType === \"time\") {\n        length += bar.time;\n      } else {\n        if (bar.type === \"bar\") {\n          length += bar.time;\n        }\n\n        if (bar.type === \"trapeze\") {\n          length += bar.time;\n        }\n\n        if (bar.type === \"freeRide\") {\n          length += bar.time;\n        }\n\n        if (bar.type === \"interval\") {\n          length += bar.repeat * bar.onDuration;\n          length += bar.repeat * bar.offDuration;\n        }\n      }\n      return false;\n    });\n\n    return length;\n  },\n\n  getStressScore: function (bars, ftp) {\n    // TSS = [(sec x NP x IF)/(FTP x 3600)] x 100\n    var tss = 0;\n\n    bars.map((bar) => {\n      if (bar.type === \"bar\") {\n        const np = bar.power * ftp;\n        const iff = bar.power;\n\n        tss += bar.time * np * iff;\n      }\n      if (bar.type === \"trapeze\") {\n        const np = ((bar.startPower + bar.endPower) / 2) * ftp;\n        const iff = (bar.startPower + bar.endPower) / 2;\n\n        tss += bar.time * np * iff;\n      }\n      if (bar.type === \"interval\") {\n        const npOn = bar.onPower * ftp;\n        const iffOn = bar.onPower;\n\n        tss += bar.onDuration * bar.repeat * npOn * iffOn;\n\n        const npOff = bar.offPower * ftp;\n        const iffOff = bar.offPower;\n\n        tss += bar.offDuration * bar.repeat * npOff * iffOff;\n      }\n      return false;\n    });\n    return ((tss / (ftp * 3600)) * 100).toFixed(0);\n  },\n\n  calculateEstimatedTimes: function (distances, times) {\n    var estimatedTimes = [];\n\n    times.forEach((value, i) => {\n      if (!value) {\n        for (let index = 0; index < times.length; index++) {\n          // found a time\n          if (times[index]) {\n            // Predictions calculated using Riegel's formula: T2 = T1 x (D2/D1) x 1.06\n            // T1 = T2 / (1.06 * (D2/D1))\n            const t = moment.duration(times[index]).asSeconds();\n\n            let et = t * (distances[i] / distances[index]) * 1.06;\n\n            estimatedTimes[i] = moment.utc(et * 1000).format(\"HH:mm:ss\");\n\n            break;\n          }\n        }\n      }\n    });\n    return estimatedTimes;\n  },\n\n  getWorkoutDistance: function (bars) {\n    var distance = 0;\n    bars.map((bar) => (distance += bar.length));\n\n    return (distance / 1000).toFixed(1);\n  },\n\n  getTimeinSeconds: function (time) {\n    //convert time 01:00:00 to seconds 3600\n    return moment.duration(time).asSeconds();\n  },\n\n  formatDuration: function (seconds) {\n    // 1 pixel equals 5 seconds\n    return moment.duration(seconds, \"seconds\").format(\"mm:ss\", { trim: false });\n  },\n  calculateTime: function (distance, speed) {\n    return distance / speed;\n  },\n  calculateDistance: function (time, speed) {\n    return time * speed;\n  },\n  round: function (x, roundTo) {\n    return Math.floor(x / roundTo) * roundTo;\n  },\n  calculateSpeed: function (time, distance) {\n    // in km/h\n    return ((time / distance) * 18) / 5;\n  },\n};\n\nexport default helpers;\n","import React, { useState, useEffect } from \"react\";\nimport \"./Bar.css\";\nimport { Colors, Zones } from \"../Constants\";\nimport { Resizable } from \"re-resizable\";\nimport Label from \"../Label/Label\";\nimport helpers from \"../helpers\";\n\nconst Bar = (props: {\n  id: string;\n  time?: number;\n  length?: number;\n  power: number;\n  cadence: number;\n  ftp: number;\n  weight: number;\n  pace: number;\n  sportType: string;\n  durationType: string;\n  speed?: number;\n  onChange: Function;\n  onClick: Function;\n  selected: boolean;\n  showLabel: boolean;\n}) => {\n  const multiplier = 250;\n  const timeMultiplier = 3;\n  const lengthMultiplier = 10;\n\n  const powerLabel = Math.round(props.power * props.ftp);\n\n  // TIME\n  const duration = helpers.formatDuration(props.time);\n\n  // DISTANCE\n  const distance = props.length;\n\n  // USED ONLY ON RUN WORKOUT\n  // const distance = props.length\n\n  // time is set -> calculate distance\n  // distance is set -> calculate time\n\n  const style = zwiftStyle(props.power);\n\n  // RUN WORKOUTS ON DISTANCE - BIKE WORKOUTS ON TIME\n  const [width, setWidth] = useState(\n    props.durationType === \"time\"\n      ? (props.time || 0) / timeMultiplier\n      : (props.length || 0) / lengthMultiplier\n  );\n\n  const [height, setHeight] = useState(props.power * multiplier);\n\n  const [showLabel, setShowLabel] = useState(false);\n\n  const [selected, setSelected] = useState(props.selected);\n\n  const speed =\n    distance !== undefined && props.time !== undefined\n      ? helpers.calculateSpeed(distance, props.time)\n      : 0;\n\n  useEffect(() => {\n    setSelected(props.selected);\n  }, [props.selected]);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange(props.id, {\n      time: props.time,\n      length: props.length,\n      power: props.power,\n      cadence: cadence,\n      type: \"bar\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n\n  const handleResizeStop = (dWidth: number, dHeight: number) => {\n    setWidth(width + dWidth);\n    setHeight(height + dHeight);\n\n    const length =\n      props.durationType === \"time\"\n        ? helpers.round(\n            helpers.calculateDistance(\n              (width + dWidth) * timeMultiplier * props.power,\n              props.speed\n            ),\n            1\n          )\n        : helpers.round((width + dWidth) * lengthMultiplier, 200);\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round((width + dWidth) * timeMultiplier, 5)\n        : helpers.round(\n            (helpers.calculateTime(props.length, props.speed) * 1) /\n              props.power,\n            1\n          );\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      power: (height + dHeight) / multiplier,\n      cadence: props.cadence,\n      type: \"bar\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n\n  const handleResize = (dWidth: number, dHeight: number) => {\n    const length =\n      props.durationType === \"time\"\n        ? helpers.round(\n            helpers.calculateDistance(\n              (width + dWidth) * timeMultiplier * props.power,\n              props.speed\n            ),\n            1\n          )\n        : helpers.round((width + dWidth) * lengthMultiplier, 200);\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round((width + dWidth) * timeMultiplier, 5)\n        : helpers.round(\n            (helpers.calculateTime(props.length, props.speed) * 1) /\n              props.power,\n            1\n          );\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      power: (height + dHeight) / multiplier,\n      cadence: props.cadence,\n      type: \"bar\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n\n  function zwiftStyle(zone: number) {\n    if (zone >= 0 && zone < Zones.Z1.max) {\n      // Z1 gray\n      return { backgroundColor: Colors.GRAY };\n    } else if (zone >= Zones.Z2.min && zone < Zones.Z2.max) {\n      // Z2 blue\n      return { backgroundColor: Colors.BLUE };\n    } else if (zone >= Zones.Z3.min && zone < Zones.Z3.max) {\n      // Z3 green\n      return { backgroundColor: Colors.GREEN };\n    } else if (zone >= Zones.Z4.min && zone < Zones.Z4.max) {\n      // Z4 yellow\n      return { backgroundColor: Colors.YELLOW };\n    } else if (zone >= Zones.Z5.min && zone < Zones.Z5.max) {\n      // Z5 orange\n      return { backgroundColor: Colors.ORANGE };\n    } else {\n      // Z6 red\n      return { backgroundColor: Colors.RED };\n    }\n  }\n\n  return (\n    <div\n      className=\"segment\"\n      onMouseEnter={() => setShowLabel(true)}\n      onMouseLeave={() => setShowLabel(false)}\n      onClick={() => props.onClick(props.id)}\n      style={props.selected ? { zIndex: 10 } : {}}\n    >\n      {(selected || showLabel) && props.showLabel && (\n        <Label\n          sportType={props.sportType}\n          duration={duration}\n          power={powerLabel}\n          weight={props.weight}\n          ftp={props.ftp}\n          pace={props.pace}\n          distance={distance}\n          cadence={props.cadence}\n          setCadence={(cadence: number) => handleCadenceChange(cadence)}\n          speed={speed}\n        />\n      )}\n      <Resizable\n        className=\"bar\"\n        size={{\n          width:\n            props.durationType === \"time\"\n              ? (props.time || 0) / timeMultiplier\n              : (props.length || 0) / lengthMultiplier,\n          height: props.power * multiplier,\n        }}\n        minWidth={3}\n        minHeight={multiplier * Zones.Z1.min}\n        maxHeight={multiplier * Zones.Z6.max}\n        enable={{ top: true, right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) =>\n          handleResizeStop(d.width, d.height)\n        }\n        onResize={(e, direction, ref, d) => handleResize(d.width, d.height)}\n        style={style}\n      ></Resizable>\n    </div>\n  );\n};\n\nexport default Bar;\n","import React, { useState } from \"react\";\nimport \"./Trapeze.css\";\nimport { Colors, Zones, ZonesArray } from \"../Constants\";\nimport { Resizable } from \"re-resizable\";\nimport Label from \"../Label/Label\";\nimport helpers from \"../helpers\";\n\ninterface IDictionary {\n  [index: string]: number;\n}\n\nconst Trapeze = (props: {\n  id: string;\n  time?: number;\n  length?: number;\n  startPower: number;\n  endPower: number;\n  cadence: number;\n  ftp: number;\n  pace: number;\n  sportType: string;\n  durationType: string;\n  speed?: number;\n  onChange: Function;\n  onClick: Function;\n  selected: boolean;\n}) => {\n  const multiplier = 250;\n  const timeMultiplier = 3;\n  const lengthMultiplier = 10;\n\n  const powerLabelStart = Math.round(props.startPower * props.ftp);\n  const powerLabelEnd = Math.round(props.endPower * props.ftp);\n\n  const avgPower = Math.abs((props.endPower + props.startPower) / 2);\n\n  const durationLabel = helpers.formatDuration(props.time);\n\n  const [showLabel, setShowLabel] = useState(false);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange(props.id, {\n      time: props.time,\n      length: props.length,\n      startPower: props.startPower,\n      endPower: props.endPower,\n      cadence: cadence,\n      type: \"trapeze\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n\n  // RUN WORKOUTS ON DISTANCE - BIKE WORKOUTS ON TIME\n  const [width, setWidth] = useState(\n    props.durationType === \"time\"\n      ? Math.round((props.time || 0) / timeMultiplier / 3)\n      : (props.length || 0) / lengthMultiplier / 3\n  );\n\n  const speedStart =\n    props.length !== undefined && props.time !== undefined\n      ? helpers.calculateSpeed(props.length, props.time)\n      : 0;\n\n  const speedEnd =\n    props.length !== undefined && props.time !== undefined\n      ? helpers.calculateSpeed(props.length, props.time)\n      : 0;\n\n  const [height1, setHeight1] = useState(props.startPower * multiplier);\n  const [height2, setHeight2] = useState(\n    ((props.endPower + props.startPower) * multiplier) / 2\n  );\n  const [height3, setHeight3] = useState(props.endPower * multiplier);\n\n  const trapezeHeight = height3 > height1 ? height3 : height1;\n  const trapezeTop = height3 > height1 ? height3 - height1 : height1 - height3;\n\n  const vertexB = height3 > height1 ? 0 : width * 3;\n  const vertexA = height3 > height1 ? trapezeTop : 0;\n  const vertexD = height3 > height1 ? 0 : trapezeTop;\n\n  var bars =\n    height3 > height1\n      ? calculateColors(props.startPower, props.endPower)\n      : calculateColors(props.endPower, props.startPower);\n  const flexDirection = height3 > height1 ? \"row\" : \"row-reverse\";\n\n  const handleResizeStop1 = (dHeight: number) => {\n    setHeight1(height1 + dHeight);\n    setHeight2((height3 + dHeight + height1) / 2);\n  };\n  const handleResizeStop2 = (dHeight: number) => {\n    setHeight2(height2 + dHeight);\n    setHeight1(height1 + dHeight);\n    setHeight3(height3 + dHeight);\n  };\n  const handleResizeStop3 = (dWidth: number, dHeight: number) => {\n    setWidth(width + dWidth / 3);\n    setHeight3(height3 + dHeight);\n    setHeight2((height3 + dHeight + height1) / 2);\n  };\n\n  const handleResize1 = (dHeight: number) => {\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round(width * timeMultiplier * 3, 5)\n        : helpers.round(\n            (helpers.calculateTime(props.length, props.speed) * 1) / avgPower,\n            1\n          );\n    const length =\n      props.durationType === \"time\"\n        ? helpers.round(\n            (helpers.calculateDistance(width * timeMultiplier, props.speed) *\n              1) /\n              avgPower,\n            1\n          )\n        : helpers.round(width * lengthMultiplier * 3, 200);\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      startPower: (height1 + dHeight) / multiplier,\n      endPower: height3 / multiplier,\n      cadence: props.cadence,\n      type: \"trapeze\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n  const handleResize2 = (dHeight: number) => {\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round(width * timeMultiplier * 3, 5)\n        : helpers.round(\n            (helpers.calculateTime(props.length, props.speed) * 1) / avgPower,\n            1\n          );\n    const length =\n      props.durationType === \"time\"\n        ? helpers.round(\n            (helpers.calculateDistance(width * timeMultiplier, props.speed) *\n              1) /\n              avgPower,\n            1\n          )\n        : helpers.round(width * lengthMultiplier * 3, 200);\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      startPower: (height1 + dHeight) / multiplier,\n      endPower: (height3 + dHeight) / multiplier,\n      cadence: props.cadence,\n      type: \"trapeze\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n  const handleResize3 = (dWidth: number, dHeight: number) => {\n    const newWidth = width + dWidth / 3;\n\n    const length =\n      props.durationType === \"time\"\n        ? helpers.round(\n            (helpers.calculateDistance(newWidth * timeMultiplier * 3, props.speed) *\n              1) /\n              avgPower,\n            1\n          )\n        : helpers.round(newWidth * lengthMultiplier * 3, 200);\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round(newWidth * timeMultiplier * 3, 5)\n        : helpers.round(\n            (helpers.calculateTime(props.length, props.speed) * 1) / avgPower,\n            1\n          );\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      startPower: height1 / multiplier,\n      endPower: (height3 + dHeight) / multiplier,\n      cadence: props.cadence,\n      type: \"trapeze\",\n      pace: props.pace,\n      id: props.id,\n    });\n  };\n\n  function calculateColors(start: number, end: number) {\n    const bars = {} as IDictionary;\n\n    ZonesArray.forEach((zone, index) => {\n      if (start >= zone[0] && start < zone[1]) {\n        bars[\"Z\" + (index + 1)] = zone[1] - start;\n      } else if (end >= zone[0] && end < zone[1]) {\n        bars[\"Z\" + (index + 1)] = end - zone[0];\n      } else if (end >= zone[1] && start < zone[0]) {\n        bars[\"Z\" + (index + 1)] = zone[1] - zone[0];\n      } else {\n        bars[\"Z\" + (index + 1)] = 0;\n      }\n    });\n    return bars;\n  }\n\n  function zwiftStyle(zone: number) {\n    if (zone >= 0 && zone < Zones.Z1.max) {\n      // Z1 gray\n      return Colors.GRAY;\n    } else if (zone >= Zones.Z2.min && zone < Zones.Z2.max) {\n      // Z2 blue\n      return Colors.BLUE;\n    } else if (zone >= Zones.Z3.min && zone < Zones.Z3.max) {\n      // Z3 green\n      return Colors.GREEN;\n    } else if (zone >= Zones.Z4.min && zone < Zones.Z4.max) {\n      // Z4 yellow\n      return Colors.YELLOW;\n    } else if (zone >= Zones.Z5.min && zone < Zones.Z5.max) {\n      // Z5 orange\n      return Colors.ORANGE;\n    } else {\n      // Z6 red\n      return Colors.RED;\n    }\n  }\n\n  return (\n    <div\n      className=\"segment\"\n      onMouseEnter={() => setShowLabel(true)}\n      onMouseLeave={() => setShowLabel(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(props.id)}\n    >\n      {(props.selected || showLabel) && (\n        <Label\n          duration={durationLabel}\n          powerStart={powerLabelStart}\n          powerEnd={powerLabelEnd}\n          ftp={props.ftp}\n          sportType={props.sportType}\n          pace={props.pace}\n          distance={props.length}\n          cadence={props.cadence}\n          setCadence={(cadence: number) => handleCadenceChange(cadence)}\n          speedStart={speedStart}\n          speedEnd={speedEnd}\n        />\n      )}\n      <div className=\"trapeze\" onClick={() => props.onClick(props.id)}>\n        <Resizable\n          className=\"trapeze-component\"\n          size={{\n            width: width,\n            height: height1,\n          }}\n          minWidth={3}\n          minHeight={multiplier * Zones.Z1.min}\n          maxHeight={multiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) => handleResizeStop1(d.height)}\n          onResize={(e, direction, ref, d) => handleResize1(d.height)}\n        ></Resizable>\n        <Resizable\n          className=\"trapeze-component\"\n          size={{\n            width: width,\n            height: height2,\n          }}\n          minWidth={3}\n          minHeight={multiplier * Zones.Z1.min}\n          maxHeight={multiplier * Zones.Z6.max}\n          enable={{ top: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) => handleResizeStop2(d.height)}\n          onResize={(e, direction, ref, d) => handleResize2(d.height)}\n        ></Resizable>\n        <Resizable\n          className=\"trapeze-component\"\n          size={{\n            width: width,\n            height: height3,\n          }}\n          minWidth={3}\n          minHeight={multiplier * Zones.Z1.min}\n          maxHeight={multiplier * Zones.Z6.max}\n          enable={{ top: true, right: true }}\n          grid={[1, 1]}\n          onResizeStop={(e, direction, ref, d) =>\n            handleResizeStop3(d.width, d.height)\n          }\n          onResize={(e, direction, ref, d) => handleResize3(d.width, d.height)}\n        ></Resizable>\n      </div>\n      <div\n        className=\"trapeze-colors\"\n        style={{\n          height: trapezeHeight,\n          flexDirection: flexDirection,\n          backgroundColor: zwiftStyle(props.startPower),\n        }}\n      >\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.GRAY,\n            width: `${\n              (bars[\"Z1\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.BLUE,\n            width: `${\n              (bars[\"Z2\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.GREEN,\n            width: `${\n              (bars[\"Z3\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.YELLOW,\n            width: `${\n              (bars[\"Z4\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.ORANGE,\n            width: `${\n              (bars[\"Z5\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n        <div\n          className=\"color\"\n          style={{\n            backgroundColor: Colors.RED,\n            width: `${\n              (bars[\"Z6\"] * 100) / Math.abs(props.endPower - props.startPower)\n            }%`,\n          }}\n        ></div>\n      </div>\n      <svg\n        height={`${trapezeHeight}`}\n        width={`${width * 3}`}\n        className=\"trapeze-svg-container\"\n      >\n        <polygon\n          points={`0,${vertexA} 0,${trapezeHeight} ${\n            width * 3\n          },${trapezeHeight} ${width * 3},${vertexD}`}\n          className=\"trapeze-svg\"\n        />\n        <polygon\n          points={`0,0 ${vertexB},${trapezeTop} ${width * 3},0`}\n          className=\"trapeze-svg-off\"\n        />\n        Sorry, your browser does not support inline SVG.\n      </svg>\n    </div>\n  );\n};\n\nexport default Trapeze;\n","import React, { useState } from \"react\";\nimport \"./FreeRide.css\";\nimport { Resizable } from \"re-resizable\";\nimport \"moment-duration-format\";\nimport Label from \"../Label/Label\";\nimport helpers from \"../helpers\";\n\nconst FreeRide = (props: {\n  id: string;\n  time?: number;\n  length?: number;\n  cadence: number;\n  sportType: string;\n  durationType: string;\n  onChange: Function;\n  onClick: Function;\n  selected: boolean;\n}) => {\n  const timeMultiplier = 3;\n  const lengthMultiplier = 10;\n\n  const durationLabel = helpers.formatDuration(props.time);\n\n  // RUN WORKOUTS ON DISTANCE - BIKE WORKOUTS ON TIME\n  const [width, setWidth] = useState(\n    props.durationType === \"time\"\n      ? (props.time || 0) / timeMultiplier\n      : (props.length || 0) / lengthMultiplier\n  );\n\n  // DISTANCE\n  const distance = props.length;\n\n  const [showLabel, setShowLabel] = useState(false);\n\n  const handleCadenceChange = (cadence: number) => {\n    props.onChange(props.id, {\n      time: props.time,\n      type: \"freeRide\",\n      cadence: cadence,\n      id: props.id,\n    });\n  };\n\n  // standard height\n  const height = 100;\n\n  const handleResizeStop = (dWidth: number) => {\n    setWidth(width + dWidth);\n\n    const length =\n      props.durationType === \"time\"\n        ? 0\n        : helpers.round((width + dWidth) * lengthMultiplier, 200);\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round((width + dWidth) * timeMultiplier, 5)\n        : 0;\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      type: \"freeRide\",\n      cadence: props.cadence,\n      id: props.id,\n    });\n  };\n\n  const handleResize = (dWidth: number) => {\n    const length =\n      props.durationType === \"time\"\n        ? 0\n        : helpers.round((width + dWidth) * lengthMultiplier, 200);\n    const time =\n      props.durationType === \"time\"\n        ? helpers.round((width + dWidth) * timeMultiplier, 5)\n        : 0;\n\n    props.onChange(props.id, {\n      time: time,\n      length: length,\n      type: \"freeRide\",\n      cadence: props.cadence,\n      id: props.id,\n    });\n  };\n\n  return (\n    <div\n      className=\"segment\"\n      onMouseEnter={() => setShowLabel(true)}\n      onMouseLeave={() => setShowLabel(false)}\n      style={props.selected ? { zIndex: 1 } : {}}\n      onClick={() => props.onClick(props.id)}\n    >\n      {(props.selected || showLabel) && (\n        <Label\n          sportType={props.sportType}\n          duration={durationLabel}\n          distance={distance}\n          cadence={props.cadence}\n          setCadence={(cadence: number) => handleCadenceChange(cadence)}\n        />\n      )}\n      <Resizable\n        className=\"freeRide\"\n        size={{\n          width:\n            props.durationType === \"time\"\n              ? (props.time || 0) / timeMultiplier\n              : (props.length || 0) / lengthMultiplier,\n          height: height,\n        }}\n        minWidth={timeMultiplier}\n        minHeight={height}\n        maxHeight={height}\n        enable={{ right: true }}\n        grid={[1, 1]}\n        onResizeStop={(e, direction, ref, d) => handleResizeStop(d.width)}\n        onResize={(e, direction, ref, d) => handleResize(d.width)}\n      ></Resizable>\n    </div>\n  );\n};\n\nexport default FreeRide;\n","import React, { useEffect, useState } from 'react'\nimport Bar from '../Bar/Bar'\nimport './Interval.css'\n\nimport {Bar as BarInterface} from '../Editor/Editor'\n\nconst Interval = (props: { id: string, repeat: number, onDuration?: number, offDuration?: number, onLength?: number, offLength?: number, onPower: number, offPower: number, cadence: number, restingCadence: number, ftp: number, weight: number, pace: number, speed?: number, sportType: string, durationType: string, handleIntervalChange: Function, handleIntervalClick: Function, selected: boolean }) => {\n\n  const { v4: uuidv4 } = require('uuid');\n\n  const [bars, setBars] = useState<Array<BarInterface>>([])\n  const [nIntervals, setNIntervals] = useState(props.repeat)\n\n  const [onDuration, setOnDuration] = useState(props.onDuration)\n  const [offDuration, setOffDuration] = useState(props.offDuration)\n\n  const [onLength, setOnLength] = useState(props.onLength)\n  const [offLength, setOffLength] = useState(props.offLength)\n\n  useEffect(() => {\n    const bars = []\n\n    for (var i = 0; i < nIntervals; i++) {\n      bars.push(\n        {\n          time: onDuration || 0,\n          length: onLength || 0,\n          power: props.onPower,\n          cadence: props.cadence,\n          type: 'bar',\n          pace: props.pace,\n          id: uuidv4()\n        })\n\n      bars.push(\n        {\n          time: offDuration || 0,\n          length: offLength || 0,\n          power: props.offPower,\n          cadence: props.restingCadence,\n          type: 'bar',\n          pace: props.pace,\n          id: uuidv4()\n        })\n    }\n    setBars(bars)\n\n    // eslint-disable-next-line\n  }, [nIntervals])\n\n  function handleOnChange(id: string, values: BarInterface) {\n\n    const index = bars.findIndex(bar => bar.id === id)\n    \n    if (index % 2 === 1) {\n      setOffDuration(values.time)\n      setOffLength(values.length)\n    }else{\n      setOnDuration(values.time)\n      setOnLength(values.length)\n    }\n\n    for (var i = 0; i < bars.length; i++) {\n      if (index % 2 === i % 2) {       \n        bars[i].time = values.time\n        bars[i].power = values.power\n        bars[i].length = values.length\n        bars[i].cadence = values.cadence        \n      }      \n    }\n    var time = 0\n    bars.map((bar) => time += bar.time)\n\n    var length = 0\n    bars.map((bar) => length += (bar.length || 0))\n\n    props.handleIntervalChange(props.id, {\n      time: time,\n      length: length,\n      id: props.id,\n      type: 'interval',\n      cadence: bars[0].cadence,\n      restingCadence: bars[1].cadence,\n      pace: props.pace,\n      repeat: nIntervals,\n      onDuration: bars[0].time,\n      offDuration: bars[1].time,\n      onPower: bars[0].power,\n      offPower: bars[1].power,\n      onLength: bars[0].length,\n      offLength: bars[1].length\n    })\n\n  }\n\n  function handleAddInterval() {\n    setNIntervals(nIntervals + 1)\n    var time = 0\n    bars.map((bar) => time += bar.time)\n\n    props.handleIntervalChange(props.id, {\n      time: ((props.onDuration || 0) + (props.offDuration || 0)) * (nIntervals + 1),\n      length: ((props.onLength || 0) + (props.offLength || 0)) * (nIntervals + 1),\n      id: props.id,\n      type: 'interval',\n      cadence: props.cadence,\n      restingCadence: props.restingCadence,\n      pace: props.pace,\n      repeat: props.repeat + 1,\n      onDuration: props.onDuration,\n      offDuration: props.offDuration,\n      onPower: props.onPower,\n      offPower: props.offPower,\n      onLength: props.onLength,\n      offLength: props.offLength\n    })\n  }\n\n  function handleRemoveInterval() {\n    if (nIntervals > 1) {\n      setNIntervals(nIntervals - 1)\n      var time = 0\n      bars.map((bar) => time += bar.time)\n\n      props.handleIntervalChange(props.id, {\n        time: ((props.onDuration || 0) + (props.offDuration || 0)) * (nIntervals - 1),\n        length: ((props.onLength || 0) + (props.offLength || 0)) * (nIntervals - 1),\n        id: props.id,\n        type: 'interval',\n        cadence: props.cadence,\n        restingCadence: props.restingCadence,\n        pace: props.pace,\n        repeat: props.repeat - 1,\n        onDuration: props.onDuration,\n        offDuration: props.offDuration,\n        onPower: props.onPower,\n        offPower: props.offPower,\n        onLength: props.onLength,\n        offLength: props.offLength\n      })\n    }\n  }\n\n  const renderBar = (bar: BarInterface, withLabel: boolean) => (\n    <Bar\n      key={bar.id}\n      id={bar.id}\n      time={bar.time}\n      length={bar.length}\n      power={bar.power || 100}\n      cadence={bar.cadence}\n      ftp={props.ftp}\n      weight={props.weight}\n      sportType={props.sportType}\n      durationType={props.durationType}\n      pace={props.pace}\n      speed={props.speed}\n      onChange={(id: string, value: any) => handleOnChange(id, value)} // Change any to Interface Bar?\n      onClick={() => props.handleIntervalClick(props.id)}\n      selected={props.selected}\n      showLabel={withLabel}\n    />\n  )\n\n\n  return (\n    <div>\n      <div className='buttons'><button onClick={handleAddInterval}>+</button><button onClick={handleRemoveInterval}>-</button></div>\n      <div className='intervals'>\n        {bars.map((bar, index) => renderBar(bar, index === 0 || index === bars.length - 1))}\n      </div>      \n    </div>\n  )\n}\n\nexport default Interval","import React, { useState } from \"react\";\nimport Draggable from \"react-draggable\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faComment,faCommentDots } from \"@fortawesome/free-solid-svg-icons\";\nimport \"./Comment.css\";\nimport helpers from \"../helpers\";\n\ninterface Instruction {\n  id: string;\n  text: string;\n  time: number;\n  length: number;\n}\n\nconst Comment = (props: {\n  instruction: Instruction;\n  durationType: string;\n  width: number;\n  onChange: Function;\n  onClick: Function;  \n  index: number;\n}) => {\n  const timeMultiplier = 3;\n  const lengthMultiplier = 10;\n\n  const [time, setTime] = useState(props.instruction.time / timeMultiplier);\n  const [isDragging, setIsDragging] = useState(false);\n\n  // FOR RUN WORKOUTS\n  const [length, setLength] = useState(\n    props.instruction.length / lengthMultiplier\n  );\n\n  function handleTouch(position: number) {\n\n    setIsDragging(false);\n\n    if(isDragging){\n      props.onChange(props.instruction.id, {\n        id: props.instruction.id,      \n        time: position * timeMultiplier,\n        length: position * lengthMultiplier,\n        text: props.instruction.text,      \n      });\n    }else{\n      props.onClick(props.instruction.id)\n    }    \n  }\n\n  function handleDragging(position: number) {    \n    setIsDragging(true);\n    setTime(position);\n    setLength(position);\n  }\n\n  return (\n    <Draggable\n      axis=\"x\"\n      handle=\".handle\"\n      defaultPosition={{ x: time, y: (props.index % 5) * 20 }}\n      bounds={{ left: 0, right: props.width }}\n      scale={1}\n      onStop={(e, data) => handleTouch(data.x)}\n      onDrag={(e, data) => handleDragging(data.x)}      \n    >\n      <div>\n        <FontAwesomeIcon\n          style={{ display: \"block\", opacity: 0.7 }}\n          icon={props.instruction.text !== \"\" ? faCommentDots : faComment}\n          size=\"lg\"\n          fixedWidth\n          className=\"handle\"\n        />\n        {isDragging && (\n          <div className=\"edit\">\n            {props.durationType === \"time\" ? (\n              <span style={{ fontSize: \"13px\" }} data-testid=\"time\">\n                {helpers.formatDuration(time * timeMultiplier)}\n              </span>\n            ) : (\n              <span style={{ fontSize: \"13px\" }} data-testid=\"time\">\n                {length * lengthMultiplier} m\n              </span>\n            )}\n          </div>\n        )}\n        <div className=\"line\"></div>\n      </div>\n    </Draggable>\n  );\n};\n\nexport default Comment;","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport styles from \"./EditComment.module.css\";\n\ninterface Instruction {\n  id: string;\n  text: string;\n  time: number;\n  length: number;\n}\n\nconst EditComment = (props: {\n  instruction: Instruction;\n  onChange: Function;\n  onDelete: Function;\n  dismiss: Function;\n}) => {\n  const [text, setText] = useState(props.instruction.text);\n  const [showInput, setShowInput] = useState(false);\n\n  function save() {\n    props.onChange(props.instruction.id, {\n      id: props.instruction.id,\n      text: text,\n      lenth: props.instruction.length,\n      time: props.instruction.time,\n    });\n  }\n  return (\n    <div className={styles.container}>\n      <div className={styles.box}>\n        <textarea\n          name=\"comment\"\n          value={text}\n          placeholder=\"Enter message\"\n          className={styles.textArea}\n          onChange={(e) => setText(e.target.value)}\n          onBlur={() => setShowInput(!showInput)}\n        />\n        <div className={styles.cta}>\n          <button\n            className={styles.btnPrimary}\n            type=\"button\"\n            onClick={() => save()}\n          >\n            Save\n          </button>\n          <button\n            className={styles.btnSecondary}            \n            type=\"button\"\n            onClick={() => props.dismiss()}\n          >\n            Dismiss\n          </button>\n          <button            \n            className={styles.btnIcon}\n            type=\"button\"\n            onClick={() => props.onDelete(props.instruction.id)}\n          >\n            <FontAwesomeIcon\n              icon={faTrashAlt}\n              className=\"delete\"\n            />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditComment;\n","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport './Popup.css'\n\nconst Popop = (props: { width: string, height?: string, dismiss: Function, children: any}) => {\n\n  return (\n    <div className='popup-background'>\n      <div className='popup' style={{width: props.width, height: props.height}}>        \n        <button className=\"close\" onClick={()=>props.dismiss()}>\n          <FontAwesomeIcon icon={faTimesCircle} size=\"lg\" fixedWidth />\n        </button>\n        {props.children}\n      </div>\n    </div>\n  )\n}\n\nexport default Popop","import React from 'react'\n\nexport default function Privacy() {\n\n  return (\n    <div style={{color: 'black', textAlign: 'left',fontSize: 14}}>\n      <h2>Privacy Policy</h2>\n      <p>Your privacy is important to us. It is Sharpify Ltd's policy to respect your privacy regarding any information we may collect from you across our website, <a href=\"https://www.zwiftworkout.com\">https://www.zwiftworkout.com</a>, and other sites we own and operate.</p>\n      <p>We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why were collecting it and how it will be used.</p>\n      <p>We only retain collected information for as long as necessary to provide you with your requested service. What data we store, well protect within commercially acceptable means to prevent loss and theft, as well as unauthorised access, disclosure, copying, use or modification.</p>\n      <p>We dont share any personally identifying information publicly or with third-parties, except when required to by law.</p>\n      <p>Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies.</p>\n      <p>You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services.</p>\n      <p>Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us.</p>\n      <p>This policy is effective as of 1 September 2020.</p>\n    </div>\n  )\n}","import React from 'react'\n\nexport default function Terms() {\n\n  return (\n    <div style={{color: 'black', textAlign: 'left',fontSize: 14}}>\n      <h2>Sharpify Ltd Terms of Service</h2>\n      <h3>1. Terms</h3>\n      <p>By accessing the website at <a href=\"https://www.zwiftworkout.com\">https://www.zwiftworkout.com</a>, you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law.</p>\n      <h3>2. Use Licence</h3>\n      <ol type=\"a\">\n        <li>Permission is granted to temporarily download one copy of the materials (information or software) on Sharpify Ltd's website for personal, non-commercial transitory viewing only. This is the grant of a licence, not a transfer of title, and under this licence you may not:\n          <ol type=\"i\">\n            <li>modify or copy the materials;</li>\n            <li>use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li>\n            <li>attempt to decompile or reverse engineer any software contained on Sharpify Ltd's website;</li>\n            <li>remove any copyright or other proprietary notations from the materials; or</li>\n            <li>transfer the materials to another person or \"mirror\" the materials on any other server.</li>\n          </ol>\n        </li>\n        <li>This licence shall automatically terminate if you violate any of these restrictions and may be terminated by Sharpify Ltd at any time. Upon terminating your viewing of these materials or upon the termination of this licence, you must destroy any downloaded materials in your possession whether in electronic or printed format.</li>\n      </ol>\n      <h3>3. Disclaimer</h3>\n      <ol type=\"a\">\n        <li>The materials on Sharpify Ltd's website are provided on an 'as is' basis. Sharpify Ltd makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</li>\n        <li>Further, Sharpify Ltd does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site.</li>\n      </ol>\n      <h3>4. Limitations</h3>\n      <p>In no event shall Sharpify Ltd or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Sharpify Ltd's website, even if Sharpify Ltd or a Sharpify Ltd authorised representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you.</p>\n      <h3>5. Accuracy of materials</h3>\n      <p>The materials appearing on Sharpify Ltd's website could include technical, typographical, or photographic errors. Sharpify Ltd does not warrant that any of the materials on its website are accurate, complete or current. Sharpify Ltd may make changes to the materials contained on its website at any time without notice. However Sharpify Ltd does not make any commitment to update the materials.</p>\n      <h3>6. Links</h3>\n      <p>Sharpify Ltd has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by Sharpify Ltd of the site. Use of any such linked website is at the user's own risk.</p>\n      <h3>7. Modifications</h3>\n      <p>Sharpify Ltd may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service.</p>\n      <h3>8. Governing Law</h3>\n      <p>These terms and conditions are governed by and construed in accordance with the laws of London, Uk and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location.</p>\n    </div>\n  )\n}","import React, {useState} from 'react'\nimport './Footer.css'\nimport Privacy from '../Privacy/Privacy'\nimport Terms from '../Terms/Terms'\nimport Popup from '../Popup/Popup'\n\nexport default function Footer() {\n\n  const [showTerms, setShowTerm] = useState(false)\n  const [showPrivacy, setShowPrivacy] = useState(false)\n\n  return (\n    <div className=\"footer\">\n      <ul>\n        <li>Zwift Workout v1.9 &copy; 2021 Sharpify Ltd All Rights Reserved</li>\n        <li><a href=\"#terms\" onClick={() => setShowTerm(true)}>Terms of Service</a></li>\n        <li><a href=\"#privacy\" onClick={() => setShowPrivacy(true)}>Privacy Policy</a></li>\n        <li><a href=\"https://github.com/breiko83/zwo-editor/issues\" target=\"blank\">Report an issue</a></li>        \n      </ul>\n       \n      {showTerms &&\n        <Popup width=\"90%\" height=\"80%\" dismiss={() => setShowTerm(false)}>      \n          <Terms />\n        </Popup>\n      }\n      {showPrivacy &&\n        <Popup width=\"50%\" height=\"50%\" dismiss={() => setShowPrivacy(false)}>\n          <Privacy />\n        </Popup>\n      }\n    </div>\n  )\n}","import * as firebase from 'firebase/app'\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAzGYdisRLDODZS4xz51UEv6n3P6G0kGu8\",\n  authDomain: \"zwift-6e52a.firebaseapp.com\",\n  databaseURL: \"https://zwift-6e52a-default-rtdb.firebaseio.com\",\n  projectId: \"zwift-6e52a\",\n  storageBucket: \"zwift-6e52a.appspot.com\",\n  messagingSenderId: \"440835793009\",\n  appId: \"1:440835793009:web:aa8cf13ceae766fae73bd0\",\n  measurementId: \"G-T4CLX2YQ91\"\n};\n\nfirebase.initializeApp(firebaseConfig)\nexport default firebase\nexport const auth = firebase.auth()\n","import React, {useState} from 'react'\nimport './Workouts.css'\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faClock, faRuler} from '@fortawesome/free-solid-svg-icons'\nimport firebase from '../firebase'\n\ninterface Workout {\n  id: string,\n  name: string,\n  description: string,\n  updatedAt: string,\n  durationType: string,\n  workoutTime: string,\n  workoutDistance: string\n}\n\nconst Workouts = (props: { userId: string }) => {\n\n  const [workouts, setWorkouts] = useState<Array<Workout>>([])\n\n  React.useEffect(() => {\n\n    firebase.database().ref('users/' + props.userId + '/workouts').orderByChild('name').once('value').then(function (snapshot) {\n      snapshot.forEach(child => {\n        setWorkouts(workouts => [...workouts, {\n          id: child.key || \"\",\n          name: child.val().name || \"No name\",\n          description: child.val().description,\n          updatedAt: child.val().updatedAt,\n          durationType: child.val().durationType,\n          workoutTime: child.val().workoutTime,\n          workoutDistance: child.val().workoutDistance\n        }\n        ])\n      });\n    })\n  }, [props.userId])\n\n  return (\n      <div className=\"workouts\">\n        <h2 className=\"title\">Your workouts</h2>\n        {workouts.map((item, index) => (\n            <a href={`/editor/${item.id}`} key={item.id} style={index % 2 === 0 ? { backgroundColor: '#DCDCDC' } : { backgroundColor: '#C8C8C8' }}>\n              <div className=\"title\">{item.name}</div>\n              {item.durationType === 'time' ?\n                  <div className=\"description\"><FontAwesomeIcon icon={faClock} size=\"sm\" fixedWidth /> {item.workoutTime}</div>\n                  :\n                  <div className=\"description\"><FontAwesomeIcon icon={faRuler} size=\"sm\" fixedWidth /> {item.workoutDistance}</div>\n              }\n            </a>\n        ))\n        }\n        {workouts.length < 1 &&\n            <p>No saved workouts yet</p>\n        }\n      </div>\n  )\n}\n\nexport default Workouts","import React from \"react\";\nimport \"./XAxis.css\";\n\nconst hoursBy10Minutes = (hours: number): string[] => \n  ([...new Array(hours)]).flatMap((v, h) => [\"00\", \"10\", \"20\", \"30\", \"40\", \"50\"].map(m => `${h}:${m}`));\n\nconst TimeAxis = ({ width }: { width: number }) => (\n  <div className='x-axis x-axis-time' style={{ width }}>\n    {hoursBy10Minutes(6).map(time => (<span key={time}>{time}</span>))}\n  </div>\n);\n\nexport default TimeAxis;\n","import React from \"react\";\nimport \"./XAxis.css\";\n\nconst DistanceAxis = ({ width }: { width: number }) => (\n  <div className='x-axis x-axis-distance' style={{ width }}>\n    {[...new Array(44)].map((e,i) => <span key={i}>{i}K</span>)}\n  </div>\n);\n\nexport default DistanceAxis;\n","import React from \"react\";\nimport { Zones } from \"../Constants\";\nimport \"./ZoneAxis.css\";\n\nconst ZoneAxis = () => (\n  <div className='zone-axis'>\n    {Object.entries(Zones).reverse().map(([name, zone]) =>\n      (<div key={name} style={{ height: 250 * zone.max }}>{name}</div>))}\n  </div>\n);\n\nexport default ZoneAxis;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"60 22.1649934 120 43.597184 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"0 0 60 22.0976562 60 171.707749 0 171.707749\"\n}));\n\nvar SvgWarmdown = function SvgWarmdown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmdown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmdown.a32c38a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Untitled\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#7F7E7F\",\n  points: \"0 85.8538747 60 65.290624 60 171.707749 0 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#3F8FCF\",\n  points: \"60 65.2906189 120 44 120 171.707749 60 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#58C073\",\n  points: \"120 44 180 22 180 171.707749 120 171.707749\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  fill: \"#F8CC46\",\n  points: \"180 22 240 0 240 171.707749 180 171.707749\"\n}));\n\nvar SvgWarmup = function SvgWarmup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 240 172\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWarmup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warmup.edbffcc7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"interval\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"interval\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 0,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 166,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-2\",\n  fill: \"#F8CC46\",\n  x: 83,\n  y: 0,\n  width: 24,\n  height: 170\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 24,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 190,\n  y: 63,\n  width: 59,\n  height: 107\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle-3\",\n  fill: \"#3F8FCF\",\n  x: 107,\n  y: 63,\n  width: 59,\n  height: 107\n})));\n\nvar SvgInterval = function SvgInterval(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 249 170\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInterval, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/interval.178113c8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"Rectangle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"defs\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Page-1\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"warmup\",\n  fillRule: \"nonzero\",\n  fill: \"#F8CC46\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Rectangle\",\n  points: \"0 0 40 0 40 121.707749 6.24500451e-16 121.707749\"\n})));\n\nvar SvgSteady = function SvgSteady(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 40 30\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSteady, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/steady.7e9a2283.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport './Checkbox.css'\n\nconst Checkbox = (props: { label: string, isSelected: boolean, onCheckboxChange: Function }) => (\n  <div className=\"form-check\">\n    <label>\n      <input\n        type=\"checkbox\"\n        name={props.label}\n        checked={props.isSelected}\n        onChange={(e) => props.onCheckboxChange()}\n        className=\"form-check-input\"\n      />\n      {props.label}\n    </label>\n  </div>\n);\n\nexport default Checkbox;","import React from \"react\";\nimport Checkbox from \"./Checkbox\";\n\nconst DEFAULT_TAGS = [\"Recovery\", \"Intervals\", \"FTP\", \"TT\"]\n\ninterface SaveFormProps {\n  name: string;\n  description: string;\n  author: string;\n  tags: string[];\n  onNameChange: (value: string) => void;\n  onDescriptionChange: (value: string) => void;\n  onAuthorChange: (value: string) => void;\n  onTagsChange: (value: string[]) => void;\n  onSave: () => void;\n  onDismiss: () => void;\n  onLogout: () => void;\n}\n\nexport default function SaveForm(props: SaveFormProps) {\n  return (\n    <div>\n      <h2>Save Workout</h2>\n      <div className=\"form-control\">\n        <label htmlFor=\"name\">Workout Title</label>\n        <input type=\"text\" name=\"name\" placeholder=\"Workout title\" value={props.name} onChange={(e) => props.onNameChange(e.target.value)} />\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"description\">Workout description</label>\n        <textarea name=\"description\" placeholder=\"Workout description\" value={props.description} onChange={(e) => props.onDescriptionChange(e.target.value)}></textarea>\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"author\">Workout Author</label>\n        <input type=\"text\" name=\"author\" placeholder=\"Workout Author\" value={props.author} onChange={(e) => props.onAuthorChange(e.target.value)} />\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"author\">Workout Tags</label>\n        {DEFAULT_TAGS.map(tagName => (\n          <Checkbox\n            key={tagName}\n            label={tagName}\n            isSelected={props.tags.includes(tagName)}\n            onCheckboxChange={() => props.onTagsChange(addOrRemoveTag(props.tags, tagName))}\n          />\n        ))}\n      </div>\n      <div className=\"form-control\">\n        <button className=\"btn btn-primary\" onClick={props.onSave}>Save</button>\n        <button className=\"btn\" onClick={props.onDismiss}>Dismiss</button>\n        <button onClick={props.onLogout}>Logout</button>\n      </div>\n    </div>\n  )\n}\n\nfunction addOrRemoveTag(tags: string[], tagName: string): string[] {\n  if (tags.includes(tagName)) {\n    return tags.filter(item => item !== tagName)\n  } else {\n    return [...tags, tagName]\n  }\n}\n","import React, { useState } from 'react'\nimport { auth } from '../firebase'\nimport './Form.css'\n\nconst SignupForm = (props: { signUp: Function, showLogin: Function, dismiss: Function }) => {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState('')\n\n  function signUp(email: string, password: string) {\n    auth.createUserWithEmailAndPassword(email, password)\n      .then((result: { user: any }) => {\n        const user = result.user\n        props.signUp(user)\n      })\n      .catch(error => setError(error.message))\n  }\n\n  return (\n    <form onSubmit={(e) => { signUp(email, password); e.preventDefault() }}>\n      <h2>SignUp</h2>\n      <p>Already have an account? <button type=\"button\" className=\"link-button\" onClick={() => props.showLogin()}>Click here</button> to Login</p>\n      <div className=\"alert\">{error}</div>\n      <div className=\"form-control\">\n        <label htmlFor=\"email\">email</label>\n        <input type=\"email\" name=\"email\" value={email} onChange={(e) => {\n          setEmail(e.target.value)\n          setError('')\n        }\n        } required />\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"password\">password</label>\n        <input type=\"password\" name=\"password\" autoComplete='new-password' value={password} onChange={(e) => {\n          setPassword(e.target.value)\n          setError('')\n        }\n        } required />\n      </div>\n      <div className=\"form-control\">\n        <button className=\"btn btn-primary\" type=\"submit\">Signup</button>\n        <button className=\"btn btn-secondary\" type=\"button\" onClick={() => props.dismiss()}>Dismiss</button>\n      </div>\n    </form>\n  )\n}\n\nexport default SignupForm","import React, { useState } from 'react'\nimport { auth } from '../firebase'\nimport './Form.css'\n\nconst LoginForm = (props: { login: Function, showSignup: Function, showForgotPassword: Function, dismiss: Function }) => {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState('')\n\n\n  function login(email: string, password: string) {\n    auth.signInWithEmailAndPassword(email, password)\n      .then((result: { user: any }) => {\n        const user = result.user\n        props.login(user)\n      })\n      .catch(error => setError(error.message))\n  }\n  \n  return (\n    <form onSubmit={(e) => {login(email, password); e.preventDefault()}}>\n      <h2>Login</h2>\n      <p>Not registered yet? <button type=\"button\" className=\"link-button\" onClick={() => props.showSignup()}>Click here</button> to Signup</p>\n      <div className=\"alert\">{error}</div>\n      <div className=\"form-control\">\n        <label htmlFor=\"email\">email</label>\n        <input type=\"email\" name=\"email\" value={email} onChange={(e) => {\n          setEmail(e.target.value)\n          setError('')\n        }} />\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"password\">password</label>\n        <input type=\"password\" name=\"password\" autoComplete='new-password' value={password} onChange={(e) => {\n          setPassword(e.target.value)\n          setError('')\n        }} />\n      </div>\n      <div className=\"form-control\">\n        <button className=\"btn btn-primary\" type=\"submit\">Login</button>\n        <button className=\"btn btn-secondary\" type=\"button\" onClick={() => props.dismiss()}>Dismiss</button>\n      </div>\n      <div><button className=\"btn link-button\" onClick={() => props.showForgotPassword()}>Forgot Your Password?</button></div>\n    </form>\n  )\n}\n\nexport default LoginForm","import React, { useState } from \"react\";\nimport { auth } from \"../firebase\";\nimport \"./Form.css\";\n\nconst ForgotPasswordForm = (props: { workoutId: string,  dismiss: Function }) => {\n  const [email, setEmail] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n\n  function forgotPassword(email: string) {\n\n    auth\n      .sendPasswordResetEmail(email)\n      .then(function () {\n        setSuccess(\"We have emailed you a password reset link.\");\n        setDisabled(true);\n        // Email sent.\n      })\n      .catch(function (error) {        \n        setError(error.message);\n      });\n  }\n\n  return (\n    <form\n      onSubmit={(e) => {\n        forgotPassword(email);\n        e.preventDefault();\n      }}\n    >\n      <h2>Forgotten Password?</h2>\n      <div className=\"alert\">{error}</div>\n      <div className=\"form-control\">\n        <label htmlFor=\"email\">email</label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={email}\n          onChange={(e) => {\n            setEmail(e.target.value);\n            setError(\"\");\n          }}\n        />\n      </div>\n      <div className=\"form-control\">\n        <button className=\"btn btn-primary\" type=\"submit\" disabled={disabled}>\n          Reset Password\n        </button>\n        <button\n          className=\"btn btn-secondary\"\n          type=\"button\"\n          onClick={() => props.dismiss()}\n        >\n          Dismiss\n        </button>\n      </div>\n      <div className=\"success\">{success}</div>\n    </form>\n  );\n};\n\nexport default ForgotPasswordForm;\n","import React, { useState } from \"react\";\nimport { useLocation } from \"react-router\";\nimport { auth } from \"../firebase\";\nimport \"./Form.css\";\n\nconst UpdatePasswordForm = (props: { dismiss: Function }) => {\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const code = params.get(\"oobCode\") || '';\n\n  function resetPassword(code: string, password: string) {\n    auth\n      .confirmPasswordReset(code, password)\n      .then(function () {\n        setSuccess(\"Your password has been updated\");\n        setDisabled(true);\n        // Email sent.\n      })\n      .catch(function (error) {\n        setError(error.message);\n      });\n  }\n\n  return (\n    <form\n      onSubmit={(e) => {\n        setError('');\n        \n        if(password === confirmPassword)\n          resetPassword(code, password);\n        else\n          setError('Passwords do not match');\n\n        e.preventDefault();\n      }}\n    >\n      <h2>Reset Your Password</h2>\n      <div className=\"alert\">{error}</div>\n      <div className=\"form-control\">\n        <label htmlFor=\"password\">New password</label>\n        <input type=\"password\" name=\"password\" autoComplete='new-password' value={password} onChange={(e) => {\n          setPassword(e.target.value)\n          setError('')\n        }} />\n      </div>\n      <div className=\"form-control\">\n        <label htmlFor=\"password\">Confirm password</label>\n        <input type=\"password\" name=\"confirmPassword\" autoComplete='new-password' value={confirmPassword} onChange={(e) => {\n          setConfirmPassword(e.target.value)\n          setError('')\n        }} />\n      </div>\n      <div className=\"form-control\">\n        <button className=\"btn btn-primary\" type=\"submit\" disabled={disabled}>\n          Update Password\n        </button>\n        <button\n          className=\"btn btn-secondary\"\n          type=\"button\"\n          onClick={() => props.dismiss()}\n        >\n          Dismiss\n        </button>\n      </div>\n      <div className=\"success\">{success}</div>\n    </form>\n  );\n};\n\nexport default UpdatePasswordForm;\n","import React, { useCallback } from 'react';\nimport './RunningTimesEditor.css';\nimport TimePicker from 'rc-time-picker';\nimport 'rc-time-picker/assets/index.css'\nimport helpers from '../helpers';\nimport moment from 'moment'\n\nexport interface RunningTimes {\n  oneMile: string;\n  fiveKm: string;\n  tenKm: string;\n  halfMarathon: string;\n  marathon: string;\n}\n\ninterface RunningTimesEditorProps {\n  times: RunningTimes;\n  onChange: (times: RunningTimes) => void;\n}\n\nexport default function RunningTimesEditor({ times, onChange }: RunningTimesEditorProps) {\n  const estimateRunningTimes = useCallback(() => {\n    const distances = [1.60934, 5, 10, 21.0975, 42.195, 1.60934]\n    const estimatedTimes = helpers.calculateEstimatedTimes(distances, [times.oneMile, times.fiveKm, times.tenKm, times.halfMarathon, times.marathon, '00:11:20'])\n  \n    onChange({\n      oneMile: times.oneMile || estimatedTimes[0],\n      fiveKm: times.fiveKm || estimatedTimes[1],\n      tenKm: times.tenKm || estimatedTimes[2],\n      halfMarathon: times.halfMarathon || estimatedTimes[3],\n      marathon: times.marathon || estimatedTimes[4],\n    })\n  }, [times, onChange])\n\n  return (\n    <div className=\"run-workout\">\n      <RunTimeInput time={times.oneMile} onChange={(oneMile) => onChange({ ...times, oneMile })}>\n        1 Mile Time\n      </RunTimeInput>\n      <RunTimeInput time={times.fiveKm} onChange={(fiveKm) => onChange({ ...times, fiveKm })}>\n        5 Km Time\n      </RunTimeInput>\n      <RunTimeInput time={times.tenKm} onChange={(tenKm) => onChange({ ...times, tenKm })}>\n        10 Km Time\n      </RunTimeInput>\n      <RunTimeInput time={times.halfMarathon} onChange={(halfMarathon) => onChange({ ...times, halfMarathon })}>\n        Half Marathon Time\n      </RunTimeInput>\n      <RunTimeInput time={times.marathon} onChange={(marathon) => onChange({ ...times, marathon })}>\n        Marathon Time\n      </RunTimeInput>\n      <div className=\"form-input\">\n        <button onClick={estimateRunningTimes} className=\"btn\">Estimate missing times</button>\n      </div>\n    </div>\n  );\n}\n\nconst RunTimeInput: React.FC<{time: string, onChange: (time: string) => void}> = ({time, onChange, children}) => (\n  <div className=\"form-input\">\n    <label><abbr title=\"hh:mm:ss\">{children}</abbr></label>\n    <TimePicker\n      value={time === '' ? undefined : moment(time, \"HH:mm:ss\")}\n      placeholder=\"00:00:00\"\n      defaultOpenValue={moment(\"00:00:00\")}\n      className=\"timePicker\"\n      onChange={(value) => onChange(value ? value.format(\"HH:mm:ss\") : '')}\n    />\n  </div>\n);\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport Switch from \"react-switch\";\nimport \"./LeftRightToggle.css\";\n\ninterface LeftRightToggleProps<TLeft,TRight> {\n  label: string;\n  leftValue: TLeft;\n  rightValue: TRight;\n  leftIcon: IconProp;\n  rightIcon: IconProp;\n  selected: TLeft | TRight;\n  onChange: (selected: TLeft | TRight) => void;\n}\n\nconst COLOR = \"#00C46A\";\n\nconst LeftRightToggle = <TLeft,TRight>({ label, leftValue, rightValue, leftIcon, rightIcon, selected, onChange }: LeftRightToggleProps<TLeft,TRight>) => (\n  <div className=\"form-input\">\n    <label>{label}</label>\n    <div className=\"left-right-toggle\">\n      <FontAwesomeIcon\n        className={`icon ${selected === leftValue ? \"active\" : \"\"}`}\n        icon={leftIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n      <Switch\n        onChange={() => onChange(selected === leftValue ? rightValue : leftValue)}\n        checked={selected === rightValue}\n        checkedIcon={false}\n        uncheckedIcon={false}\n        onColor={COLOR}\n        offColor={COLOR}\n      />\n      <FontAwesomeIcon\n        className={`icon ${selected === rightValue ? \"active\" : \"\"}`}\n        icon={rightIcon}\n        size=\"lg\"\n        fixedWidth\n      />\n    </div>\n  </div>\n);\n\nexport default LeftRightToggle;\n","class TimeInterval {\n    constructor(duration, effort, effort2, type) {\n        let factor = 100;\n        if (type === \"erg\") factor = factor * 2;\n        this.duration = duration;\n        this.effort = Math.round(effort * factor);\n        this.effort2 = Math.round(effort2 * factor);\n        this.start = 0;\n    }\n\n    get end() {\n        return this.start + this.duration;\n    }\n\n    format_sec(s) {\n        return ((s - (s %= 60)) / 60 + (9 < s ? '.' : '.0') + Math.round(s * 1.666667)).padEnd(8);\n    }\n\n    toString() {\n        if (!this.effort2)\n            return `${this.format_sec(this.start)}  ${this.effort}\\n${this.format_sec(this.end)}  ${this.effort}\\n`;\n        else\n            return `${this.format_sec(this.start)}  ${this.effort}\\n${this.format_sec(this.end)}  ${this.effort2}\\n`;\n    }\n}\nexport default TimeInterval;","import Builder from 'xmlbuilder'\nimport {Bar, DurationType, Instruction, SportType} from './Editor'\nimport timeInterval from \"../../timeInterval\";\nimport TimeInterval from \"../../timeInterval\";\n\ninterface Workout {\n  author: string;\n  name: string;\n  description: string;\n  sportType: SportType;\n  durationType: DurationType;\n  tags: string[];\n  separateBars: Array<Array<Bar>>;\n  separateInstructions: Array<Array<Instruction>>;\n}\n\nexport default function createWorkoutXml({\n                                             author,\n                                             name,\n                                             description,\n                                             sportType,\n                                             durationType,\n                                             tags,\n                                             separateBars,\n                                             separateInstructions\n                                         }: Workout, idx: number, separateAuthor: String, fileName: String, separateDescription: String, separateTag: String): string {\n  var totalTime = 0\n  var totalLength = 0\n\n  let xml = Builder.begin()\n      .ele('workout_file')\n      .ele('author', separateAuthor).up()\n      .ele('name', fileName).up()\n      .ele('description', separateDescription).up()\n      .ele('sportType', sportType).up()\n      .ele('durationType', durationType).up()\n      .ele('tags', separateTag)\n\n  tags.forEach((tag: string) => {\n    var t: Builder.XMLNode\n    t = Builder.create('tag')\n        .att('name', tag)\n    xml.importDocument(t)\n  })\n\n  xml = xml.up().ele('workout')\n  separateBars[idx].forEach((bar, index) => {\n      var segment: Builder.XMLNode\n      var ramp\n\n      if (bar.type === 'bar') {\n        segment = Builder.create('SteadyState')\n            .att('Duration', durationType === 'time' ? bar.time : bar.length)\n            .att('Power', bar.power)\n            .att('pace', bar.pace)\n\n        // add cadence if not zero\n        bar.cadence !== 0 && segment.att('Cadence', bar.cadence)\n\n      } else if (bar.type === 'trapeze' && bar.startPower && bar.endPower) {\n\n        // index 0 is warmup\n        // last index is cooldown\n        // everything else is ramp\n\n        ramp = 'Ramp'\n        if (index === 0) ramp = 'Warmup'\n        if (index === separateBars.length - 1) ramp = 'Cooldown'\n\n        if (bar.startPower < bar.endPower) {\n          // warmup\n          segment = Builder.create(ramp)\n              .att('Duration', durationType === 'time' ? bar.time : bar.length)\n              .att('PowerLow', bar.startPower)\n              .att('PowerHigh', bar.endPower)\n              .att('pace', bar.pace)\n          // add cadence if not zero\n          bar.cadence !== 0 && segment.att('Cadence', bar.cadence)\n\n        } else {\n          // cooldown\n          segment = Builder.create(ramp)\n              .att('Duration', durationType === 'time' ? bar.time : bar.length)\n              .att('PowerLow', bar.startPower) // these 2 values are inverted\n              .att('PowerHigh', bar.endPower) // looks like a bug on zwift editor\n              .att('pace', bar.pace)\n          // add cadence if not zero\n          bar.cadence !== 0 && segment.att('Cadence', bar.cadence)\n        }\n      } else if (bar.type === 'interval') {\n        // <IntervalsT Repeat=\"5\" OnDuration=\"60\" OffDuration=\"300\" OnPower=\"0.8844353\" OffPower=\"0.51775455\" pace=\"0\"/>\n        segment = Builder.create('IntervalsT')\n            .att('Repeat', bar.repeat)\n            .att('OnDuration', durationType === 'time' ? bar.onDuration : bar.onLength)\n            .att('OffDuration', durationType === 'time' ? bar.offDuration : bar.offLength)\n            .att('OnPower', bar.onPower)\n            .att('OffPower', bar.offPower)\n            .att('pace', bar.pace)\n        // add cadence if not zero\n        bar.cadence !== 0 && segment.att('Cadence', bar.cadence)\n        // add cadence resting if not zero\n        bar.restingCadence !== 0 && segment.att('CadenceResting', bar.restingCadence)\n      } else {\n        // free ride\n        segment = Builder.create('FreeRide')\n            .att('Duration', durationType === 'time' ? bar.time : bar.length)\n            .att('FlatRoad', 0) // Not sure what this is for\n        // add cadence if not zero\n        bar.cadence !== 0 && segment.att('Cadence', bar.cadence)\n      }\n\n      // add instructions if present\n      if (durationType === 'time') {\n        separateInstructions[idx].filter((instruction) => (instruction.time >= totalTime && instruction.time < (totalTime + bar.time))).forEach((i) => {\n          segment.ele('textevent', { timeoffset: (i.time - totalTime), message: i.text })\n        })\n      } else {\n        separateInstructions[idx].filter((instruction) => (instruction.length >= totalLength && instruction.length < (totalLength + (bar.length || 0)))).forEach((i) => {\n          segment.ele('textevent', { distoffset: (i.length - totalLength), message: i.text })\n        })\n      }\n\n      xml.importDocument(segment)\n\n      totalTime = totalTime + bar.time\n      totalLength = totalLength + (bar.length || 0)\n    });\n\n  return xml.end({ pretty: true });\n}\n\nexport function createWorkoutMrcErg({ author, name, description, sportType, durationType, tags, separateBars, separateInstructions }: Workout, idx: number, fileName: String, type: string): string {\n\n    let intervals: timeInterval[] = [];\n\n    separateBars[idx].forEach((bar, index) => {\n        if (bar.type === 'bar') {\n            let interval = new TimeInterval(bar.time, bar.power, null, type);\n            intervals.push(interval);\n        } else if (bar.type === 'trapeze' && bar.startPower && bar.endPower) {\n            let interval = new TimeInterval(bar.time, bar.startPower, bar.endPower, type);\n            intervals.push(interval);\n        }\n    });\n\n    intervals.forEach((cur, i) => {\n        const prev = intervals[i - 1];\n        cur.start = (!prev || i == 0)\n            ? 0\n            : prev.end;\n    });\n\n\n    let out = \"[COURSE HEADER]\\nUNITS = ENGLISH\\nVERSION = 2\\n\";\n    out += `FILE NAME = ${fileName}.${type}\\n`;\n    if (type == 'erg')\n        out += `FTP = 200\\n`;\n    out += `MINUTES ${(type == 'mrc') ? 'PERCENT' : 'WATTS'}\\n`;\n    out += \"[END COURSE HEADER]\\n\";\n    out += \"[COURSE DATA]\\n\";\n    out += intervals.map(s => s.toString()).join('');\n    out += \"[END COURSE DATA]\"\n    return out;\n}","import React, { useCallback, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCopy } from '@fortawesome/free-solid-svg-icons'\n\ninterface ShareFormProps {\n  id: string;\n  onDismiss: () => void;\n}\n\nexport default function ShareForm({ id, onDismiss }: ShareFormProps) {\n  const [copied, setCopied] = useState('')\n  const sherableLinkRef = useRef<HTMLInputElement>(null);\n\n  const copyToClipboard = useCallback(() => {\n    const node = sherableLinkRef.current\n    node?.select();\n    document.execCommand('copy');\n    setCopied('copied!')\n  }, [sherableLinkRef, setCopied]);\n\n  return (\n    <div>\n      <h2>Share Workout</h2>\n      <div className=\"form-control\">\n        <label htmlFor=\"link\">Share this link</label>\n        <input type=\"text\" name=\"link\" value={\"https://www.zwiftworkout.com/editor/\" + id} ref={sherableLinkRef} />\n        <button onClick={copyToClipboard}><FontAwesomeIcon icon={faCopy} size=\"lg\" fixedWidth /> {copied}</button>\n        <button className=\"btn\" onClick={onDismiss}>Dismiss</button>\n      </div>\n    </div>\n  )\n}\n\n","import React, {useEffect, useRef, useState} from \"react\";\nimport {useLocation} from \"react-router\";\nimport \"./Editor.css\";\nimport {Colors, Zones} from \"../Constants\";\nimport Bar from \"../Bar/Bar\";\nimport Trapeze from \"../Trapeze/Trapeze\";\nimport FreeRide from \"../FreeRide/FreeRide\";\nimport Interval from \"../Interval/Interval\";\nimport Comment from \"../Comment/Comment\";\nimport EditComment from \"../Comment/EditComment\";\nimport Popup from \"../Popup/Popup\";\nimport Footer from \"../Footer/Footer\";\nimport Workouts from \"../Workouts/Workouts\";\nimport TimeAxis from \"./TimeAxis\";\nimport DistanceAxis from \"./DistanceAxis\";\nimport ZoneAxis from \"./ZoneAxis\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {\n  faArrowLeft,\n  faArrowRight,\n  faBicycle,\n  faBiking,\n  faClock,\n  faComment,\n  faCopy,\n  faDownload,\n  faFile,\n  faList,\n  faPen,\n  faRuler,\n  faRunning,\n  faSave,\n  faShareAlt,\n  faTimesCircle,\n  faTrash,\n  faUpload,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {ReactComponent as WarmdownLogo} from \"../../assets/warmdown.svg\";\nimport {ReactComponent as WarmupLogo} from \"../../assets/warmup.svg\";\nimport {ReactComponent as IntervalLogo} from \"../../assets/interval.svg\";\nimport {ReactComponent as SteadyLogo} from \"../../assets/steady.svg\";\nimport Converter from \"xml-js\";\nimport helpers from \"../helpers\";\nimport firebase, {auth} from \"../firebase\";\nimport SaveForm from \"../Forms/SaveForm\";\nimport SignupForm from \"../Forms/SignupForm\";\nimport LoginForm from \"../Forms/LoginForm\";\nimport ForgotPasswordForm from \"../Forms/ForgotPasswordForm\";\nimport UpdatePasswordForm from \"../Forms/UpdatePasswordForm\";\nimport {Helmet} from \"react-helmet\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport ReactGA from \"react-ga\";\nimport RunningTimesEditor, {RunningTimes} from \"./RunningTimesEditor\";\nimport LeftRightToggle from \"./LeftRightToggle\";\nimport createWorkoutXml, {createWorkoutMrcErg} from \"./createWorkoutXml\";\nimport ShareForm from \"../Forms/ShareForm\";\nimport ReactTooltip from \"react-tooltip\";\n\nexport interface Bar {\n  id: string;\n  time: number;\n  length?: number;\n  type: string;\n  power?: number;\n  startPower?: number;\n  endPower?: number;\n  cadence: number;\n  restingCadence?: number;\n  onPower?: number;\n  offPower?: number;\n  onDuration?: number;\n  offDuration?: number;\n  repeat?: number;\n  pace?: number;\n  onLength?: number;\n  offLength?: number;\n}\n\nexport interface Instruction {\n  id: string;\n  text: string;\n  time: number;\n  length: number;\n}\n\ninterface Message {\n  visible: boolean;\n  class?: string;\n  text?: string;\n}\n\ntype TParams = { id: string };\n\nconst loadRunningTimes = (): RunningTimes => {\n  const missingRunningTimes: RunningTimes = {\n    oneMile: \"\",\n    fiveKm: \"\",\n    tenKm: \"\",\n    halfMarathon: \"\",\n    marathon: \"\",\n  };\n  const runningTimesJson = localStorage.getItem(\"runningTimes\");\n  if (runningTimesJson) {\n    return JSON.parse(runningTimesJson);\n  }\n\n  // Fallback to old localStorage keys\n  const oneMile = localStorage.getItem(\"oneMileTime\") || \"\";\n  const fiveKm = localStorage.getItem(\"fiveKmTime\") || \"\";\n  const tenKm = localStorage.getItem(\"tenKmTime\") || \"\";\n  const halfMarathon = localStorage.getItem(\"halfMarathonTime\") || \"\";\n  const marathon = localStorage.getItem(\"marathonTime\") || \"\";\n  if (oneMile || fiveKm || tenKm || halfMarathon || marathon) {\n    return { oneMile, fiveKm, tenKm, halfMarathon, marathon };\n  }\n\n  return missingRunningTimes;\n};\nexport type SportType = \"bike\" | \"run\";\nexport type DurationType = \"time\" | \"distance\";\n\nconst Editor = ({ match }: RouteComponentProps<TParams>) => {\n  const { v4: uuidv4 } = require(\"uuid\");\n\n  const S3_URL = \"https://zwift-workout.s3-eu-west-1.amazonaws.com\";\n\n  const [id, setId] = useState(\n      match.params.id === \"new\"\n          ? localStorage.getItem(\"id\") || generateId()\n          : match.params.id\n  );\n  const [bars, setBars] = useState<Array<Bar>>(\n      JSON.parse(localStorage.getItem(\"currentWorkout\") || \"[]\")\n  );\n  const [actionId, setActionId] = useState<string | undefined>(undefined);\n  const [ftp, setFtp] = useState(\n      parseInt(localStorage.getItem(\"ftp\") || \"200\")\n  );\n  const [weight, setWeight] = useState(\n      parseInt(localStorage.getItem(\"weight\") || \"75\")\n  );\n  const [instructions, setInstructions] = useState<Array<Instruction>>(\n      JSON.parse(localStorage.getItem(\"instructions\") || \"[]\")\n  );\n  const [tags, setTags] = useState(\n      JSON.parse(localStorage.getItem(\"tags\") || \"[]\")\n  );\n\n  const [name, setName] = useState(localStorage.getItem(\"name\") || \"\");\n  const [description, setDescription] = useState(\n      localStorage.getItem(\"description\") || \"\"\n  );\n  const [author, setAuthor] = useState(localStorage.getItem(\"author\") || \"\");\n\n  const [savePopupIsVisile, setSavePopupVisibility] = useState(false);\n  const [sharePopupIsVisile, setSharePopupVisibility] = useState(false);\n\n  const [user, setUser] = useState<firebase.User | null>(null);\n  const [visibleForm, setVisibleForm] = useState(\"login\"); // default form is login\n\n  const canvasRef = useRef<HTMLInputElement>(null);\n  const segmentsRef = useRef<HTMLInputElement>(null);\n  const [segmentsWidth, setSegmentsWidth] = useState(1320);\n\n  const [message, setMessage] = useState<Message>();\n\n  const [showWorkouts, setShowWorkouts] = useState(false);\n\n  // bike or run\n  const [sportType, setSportType] = useState<SportType>(\n      (localStorage.getItem(\"sportType\") as SportType) || \"bike\"\n  );\n\n  // distance or time\n  const [durationType, setDurationType] = useState<DurationType>(\n      (localStorage.getItem(\"durationType\") as DurationType) || \"time\"\n  );\n\n  const [runningTimes, setRunningTimes] = useState(loadRunningTimes());\n\n  const [textEditorIsVisible, setTextEditorIsVisible] = useState(false);\n  const [selectedInstruction, setSelectedInstruction] = useState<Instruction>();\n\n  const [fileNames, setFileNames] = useState<Array<String>>([]);\n  const [separateAuthors, setSeparateAuthors] = useState<Array<String>>([]);\n  const [separateDescription, setSeparateDescription] = useState<Array<String>>([]);\n  const [separateTags, setSeparateTags] = useState<Array<String>>([]);\n  const [separateBars, setSeparateBars] = useState<Array<Array<Bar>>>([[]]);\n  const [separateInstructions, setSeparateInstructions] = useState<Array<Array<Instruction>>>([[]]);\n\n  // const db = firebase.database();\n\n  const location = useLocation();\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const mode = params.get(\"mode\");\n    if (mode === \"resetPassword\") {\n      setVisibleForm(\"updatePassword\");\n      setSavePopupVisibility(true);\n    }\n  }, [location]);\n\n  useEffect(() => {\n    setMessage({ visible: true, class: \"loading\", text: \"Loading..\" });\n\n    /*db.ref(\"workouts/\" + id)\n        .once(\"value\")\n        .then(function (snapshot) {\n          if (snapshot.val()) {\n            // workout exist on server\n            setAuthor(snapshot.val().author);\n            setName(snapshot.val().name);\n            setDescription(snapshot.val().description);\n            setBars(snapshot.val().workout || []);\n            setInstructions(snapshot.val().instructions || []);\n            setTags(snapshot.val().tags || []);\n            setDurationType(snapshot.val().durationType);\n            setSportType(snapshot.val().sportType);\n\n            localStorage.setItem(\"id\", id);\n          } else {*/\n            // workout doesn't exist on cloud\n            if (id === localStorage.getItem(\"id\")) {\n              // user refreshed the page\n            } else {\n              // treat this as new workout\n              setBars([]);\n              setInstructions([]);\n              setName(\"\");\n              setDescription(\"\");\n              setAuthor(\"\");\n              setTags([]);\n              setFileNames([]);\n              setSeparateAuthors([]);\n              setSeparateDescription([]);\n              setSeparateTags([]);\n              setSeparateBars([[]]);\n              setSeparateInstructions([[]]);\n            }\n\n            localStorage.setItem(\"id\", id);\n          // }\n          console.log(\"useEffect firebase\");\n\n          //finished loading\n          setMessage({ visible: false });\n        // });\n\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        setUser(user);\n      }\n    });\n\n    window.history.replaceState(\"\", \"\", `/editor/${id}`);\n\n    ReactGA.initialize(\"UA-55073449-9\");\n    ReactGA.pageview(window.location.pathname + window.location.search);\n  }, [id, /*db*/]);\n\n  useEffect(() => {\n    localStorage.setItem(\"currentWorkout\", JSON.stringify(bars));\n    localStorage.setItem(\"ftp\", ftp.toString());\n\n    localStorage.setItem(\"instructions\", JSON.stringify(instructions));\n    localStorage.setItem(\"weight\", weight.toString());\n\n    localStorage.setItem(\"name\", name);\n    localStorage.setItem(\"description\", description);\n    localStorage.setItem(\"author\", author);\n    localStorage.setItem(\"tags\", JSON.stringify(tags));\n    localStorage.setItem(\"sportType\", sportType);\n    localStorage.setItem(\"durationType\", durationType);\n\n    localStorage.setItem(\"runningTimes\", JSON.stringify(runningTimes));\n\n    setSegmentsWidth(segmentsRef.current?.scrollWidth || 1320);\n  }, [\n    segmentsRef,\n    bars,\n    ftp,\n    instructions,\n    weight,\n    name,\n    description,\n    author,\n    tags,\n    sportType,\n    durationType,\n    runningTimes,\n  ]);\n\n  function generateId() {\n    return Math.random().toString(36).substr(2, 16);\n  }\n\n  function newWorkout() {\n    console.log(\"New workout\");\n\n    setId(generateId());\n    setBars([]);\n    setInstructions([]);\n    setName(\"\");\n    setDescription(\"\");\n    setAuthor(\"\");\n    setTags([]);\n    setFileNames([]);\n    setSeparateAuthors([]);\n    setSeparateDescription([]);\n    setSeparateTags([]);\n    setSeparateBars([[]]);\n    setSeparateInstructions([[]]);\n  }\n\n  function handleOnChange(id: string, values: Bar) {\n    const index = bars.findIndex((bar) => bar.id === id);\n\n    const updatedArray = [...bars];\n    updatedArray[index] = values;\n\n    setBars(updatedArray);\n  }\n\n  function handleOnClick(id: string) {\n    if (id === actionId) {\n      setActionId(undefined);\n    } else {\n      setActionId(id);\n    }\n  }\n\n  function handleKeyPress(event: React.KeyboardEvent<HTMLDivElement>) {\n    if (event.target instanceof HTMLInputElement) {\n      // Ignore key presses coming from input elements\n      return;\n    }\n\n    if (event.target instanceof HTMLTextAreaElement) {\n      // Ignore key presses coming from textarea elements\n      return;\n    }\n\n    switch (event.keyCode) {\n      case 8:\n        removeBar(actionId || \"\");\n        // Prevent navigation to previous page\n        event.preventDefault();\n        break;\n      case 37:\n        // reduce time\n        removeTimeToBar(actionId || \"\");\n        break;\n      case 39:\n        // add time\n        addTimeToBar(actionId || \"\");\n        break;\n      case 38:\n        // add power\n        addPowerToBar(actionId || \"\");\n        break;\n      case 40:\n        // add power\n        removePowerToBar(actionId || \"\");\n        break;\n      default:\n        //console.log(event.keyCode);\n        break;\n    }\n  }\n\n  function addBar(\n      zone: number,\n      duration: number = 300,\n      cadence: number = 0,\n      pace: number = 0,\n      length: number = 200\n  ) : Bar {\n\n    const b = {\n      time:\n          durationType === \"time\"\n              ? duration\n              : helpers.round(\n                  helpers.calculateTime(length, calculateSpeed(pace)),\n                  1\n              ),\n      length:\n          durationType === \"time\"\n              ? helpers.round(\n                  helpers.calculateDistance(duration, calculateSpeed(pace)),\n                  1\n              )\n              : length,\n      power: zone,\n      cadence: cadence,\n      type: \"bar\",\n      id: uuidv4(),\n      pace: pace,\n    };\n\n    setBars((bars) => [\n      ...bars, b]);\n\n    return b;\n  }\n\n  function addTrapeze(\n      zone1: number,\n      zone2: number,\n      duration: number = 300,\n      pace: number = 0,\n      length: number = 1000,\n      cadence: number = 0\n  ) : Bar {\n\n    const b = {\n      time:\n          durationType === \"time\"\n              ? duration\n              : helpers.round(\n                  helpers.calculateTime(length, calculateSpeed(pace)),\n                  1\n              ),\n      length:\n          durationType === \"time\"\n              ? helpers.round(\n                  helpers.calculateDistance(duration, calculateSpeed(pace)),\n                  1\n              )\n              : length,\n      startPower: zone1,\n      endPower: zone2,\n      cadence: cadence,\n      pace: pace,\n      type: \"trapeze\",\n      id: uuidv4(),\n    };\n\n    setBars((bars) => [\n      ...bars, b]);\n\n    return b;\n  }\n\n  function addFreeRide(\n      duration: number = 600,\n      cadence: number = 0,\n      length: number = 1000\n  ) : Bar {\n\n    const b = {\n      time: durationType === \"time\" ? duration : 0,\n      length: durationType === \"time\" ? 0 : length,\n      cadence: cadence,\n      type: \"freeRide\",\n      id: uuidv4(),\n    };\n\n    setBars((bars) => [\n      ...bars,\n      b]);\n\n    return b;\n  }\n\n  function addInterval(\n      repeat: number = 3,\n      onDuration: number = 30,\n      offDuration: number = 120,\n      onPower: number = 1,\n      offPower: number = 0.5,\n      cadence: number = 0,\n      restingCadence: number = 0,\n      pace: number = 0,\n      onLength: number = 200,\n      offLength: number = 200\n  ) : Bar {\n\n    const b = {\n      time:\n          durationType === \"time\"\n              ? (onDuration + offDuration) * repeat\n              : helpers.round(\n                  helpers.calculateTime(\n                      (onLength + offLength) * repeat,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              ),\n      length:\n          durationType === \"time\"\n              ? helpers.round(\n                  helpers.calculateDistance(\n                      (onDuration + offDuration) * repeat,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              )\n              : (onLength + offLength) * repeat,\n      id: uuidv4(),\n      type: \"interval\",\n      cadence: cadence,\n      restingCadence: restingCadence,\n      repeat: repeat,\n      onDuration:\n          durationType === \"time\"\n              ? onDuration\n              : helpers.round(\n                  helpers.calculateTime(\n                      (onLength * 1) / onPower,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              ),\n      offDuration:\n          durationType === \"time\"\n              ? offDuration\n              : helpers.round(\n                  helpers.calculateTime(\n                      (offLength * 1) / offPower,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              ),\n      onPower: onPower,\n      offPower: offPower,\n      pace: pace,\n      onLength:\n          durationType === \"time\"\n              ? helpers.round(\n                  helpers.calculateDistance(\n                      (onDuration * 1) / onPower,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              )\n              : onLength,\n      offLength:\n          durationType === \"time\"\n              ? helpers.round(\n                  helpers.calculateDistance(\n                      (offDuration * 1) / offPower,\n                      calculateSpeed(pace)\n                  ),\n                  1\n              )\n              : offLength,\n    };\n    setBars((bars) => [\n      ...bars, b]);\n\n    return b;\n  }\n\n  function addInstruction(text = \"\", time = 0, length = 0): Instruction {\n\n    const i = {\n      text: text,\n      time: time,\n      length: length,\n      id: uuidv4(),\n    };\n\n    setInstructions((instructions) => [\n      ...instructions, i]);\n\n    return i;\n  }\n\n  function changeInstruction(id: string, values: Instruction) {\n    const index = instructions.findIndex(\n        (instructions) => instructions.id === id\n    );\n\n    const updatedArray = [...instructions];\n    updatedArray[index] = values;\n    setInstructions(updatedArray);\n  }\n\n  function deleteInstruction(id: string) {\n    const updatedArray = [...instructions];\n    setInstructions(updatedArray.filter((item) => item.id !== id));\n  }\n\n  function removeBar(id: string) {\n    const updatedArray = [...bars];\n    setBars(updatedArray.filter((item) => item.id !== id));\n    setActionId(undefined);\n  }\n\n  function addTimeToBar(id: string) {\n    const updatedArray = [...bars];\n\n    const index = updatedArray.findIndex((bar) => bar.id === id);\n    const element = updatedArray[index];\n    if (element && durationType === \"time\") {\n      element.time = element.time + 5;\n      element.length =\n          (helpers.calculateDistance(\n                  element.time,\n                  calculateSpeed(element.pace || 0)\n              ) *\n              1) /\n          (element.power || 1);\n      setBars(updatedArray);\n    }\n\n    if (element && durationType === \"distance\") {\n      element.length = (element.length || 0) + 200;\n      element.time =\n          (helpers.calculateTime(\n                  element.length,\n                  calculateSpeed(element.pace || 0)\n              ) *\n              1) /\n          (element.power || 1);\n      setBars(updatedArray);\n    }\n  }\n\n  function removeTimeToBar(id: string) {\n    const updatedArray = [...bars];\n\n    const index = updatedArray.findIndex((bar) => bar.id === id);\n    const element = updatedArray[index];\n    if (element && element.time > 5 && durationType === \"time\") {\n      element.time = element.time - 5;\n      element.length =\n          (helpers.calculateDistance(\n                  element.time,\n                  calculateSpeed(element.pace || 0)\n              ) *\n              1) /\n          (element.power || 1);\n      setBars(updatedArray);\n    }\n\n    if (element && (element.length || 0) > 200 && durationType === \"distance\") {\n      element.length = (element.length || 0) - 200;\n      element.time =\n          (helpers.calculateTime(\n                  element.length,\n                  calculateSpeed(element.pace || 0)\n              ) *\n              1) /\n          (element.power || 1);\n      setBars(updatedArray);\n    }\n  }\n\n  function addPowerToBar(id: string) {\n    const updatedArray = [...bars];\n\n    const index = updatedArray.findIndex((bar) => bar.id === id);\n    const element = updatedArray[index];\n    if (element && element.power) {\n      element.power = parseFloat((element.power + 1 / ftp).toFixed(3));\n\n      if (durationType === \"time\") {\n        element.length =\n            (helpers.calculateDistance(\n                    element.time,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            element.power;\n      } else {\n        element.time =\n            (helpers.calculateTime(\n                    element.length,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            element.power;\n      }\n\n      setBars(updatedArray);\n    }\n  }\n\n  function removePowerToBar(id: string) {\n    const updatedArray = [...bars];\n\n    const index = updatedArray.findIndex((bar) => bar.id === id);\n    const element = updatedArray[index];\n    if (element && element.power && element.power >= Zones.Z1.min) {\n      element.power = parseFloat((element.power - 1 / ftp).toFixed(3));\n\n      if (durationType === \"time\") {\n        element.length =\n            (helpers.calculateDistance(\n                    element.time,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            element.power;\n      } else {\n        element.time =\n            (helpers.calculateTime(\n                    element.length,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            element.power;\n      }\n\n      setBars(updatedArray);\n    }\n  }\n\n  function duplicateBar(id: string) {\n    const index = bars.findIndex((bar) => bar.id === id);\n    const element = [...bars][index];\n\n    if (element.type === \"bar\")\n      addBar(\n          element.power || 80,\n          element.time,\n          element.cadence,\n          element.pace,\n          element.length\n      );\n    if (element.type === \"freeRide\")\n      addFreeRide(element.time, element.cadence, element.length);\n    if (element.type === \"trapeze\")\n      addTrapeze(\n          element.startPower || 80,\n          element.endPower || 160,\n          element.time,\n          element.pace || 0,\n          element.length,\n          element.cadence\n      );\n    if (element.type === \"interval\")\n      addInterval(\n          element.repeat,\n          element.onDuration,\n          element.offDuration,\n          element.onPower,\n          element.offPower,\n          element.cadence,\n          element.restingCadence,\n          element.pace,\n          element.onLength,\n          element.offLength\n      );\n\n    setActionId(undefined);\n  }\n\n  function moveLeft(id: string) {\n    const index = bars.findIndex((bar) => bar.id === id);\n    // not first position of array\n    if (index > 0) {\n      const updatedArray = [...bars];\n      const element = [...bars][index];\n      updatedArray.splice(index, 1);\n      updatedArray.splice(index - 1, 0, element);\n      setBars(updatedArray);\n    }\n  }\n\n  function moveRight(id: string) {\n    const index = bars.findIndex((bar) => bar.id === id);\n    // not first position of array\n    if (index < bars.length - 1) {\n      const updatedArray = [...bars];\n      const element = [...bars][index];\n      updatedArray.splice(index, 1);\n      updatedArray.splice(index + 1, 0, element);\n      setBars(updatedArray);\n    }\n  }\n\n  function saveWorkout() {\n    setSavePopupVisibility(true);\n  }\n\n  function deleteWorkout() {\n    // save to cloud (firebase) if logged in\n    if (user) {\n      const itemsRef = firebase.database().ref();\n\n      var updates: any = {};\n      updates[`users/${user.uid}/workouts/${id}`] = null;\n      updates[`workouts/${id}`] = null;\n\n      // save to firebase\n      itemsRef\n          .update(updates)\n          .then(() => {\n            newWorkout();\n          })\n          .catch((error) => {\n            console.log(error);\n            setMessage({\n              visible: true,\n              class: \"error\",\n              text: \"Cannot delete workout\",\n            });\n          });\n    }\n  }\n\n  function shareWorkout() {\n    if (user) {\n      for (let i = 0; i < separateBars.length; i++) {\n        save(i);\n        setSharePopupVisibility(true);\n      }\n    } else {\n      saveWorkout();\n    }\n  }\n\n  function save(idx: number) {\n    setMessage({ visible: true, class: \"loading\", text: \"Saving..\" });\n\n    let fileArr: Blob[] = []\n\n    const xml = createWorkoutXml({\n      author,\n      name,\n      description,\n      sportType,\n      durationType,\n      tags,\n      separateBars,\n      separateInstructions,\n    }, idx, separateAuthors[idx], fileNames[idx], separateDescription[idx], separateTags[idx]);\n\n    const mrc = createWorkoutMrcErg({\n      author,\n      name,\n      description,\n      sportType,\n      durationType,\n      tags,\n      separateBars,\n      separateInstructions,\n    }, idx, fileNames[idx], \"mrc\");\n\n    const erg = createWorkoutMrcErg({\n      author,\n      name,\n      description,\n      sportType,\n      durationType,\n      tags,\n      separateBars,\n      separateInstructions,\n    }, idx, fileNames[idx], \"erg\");\n\n    const fileZwo = new Blob([xml], { type: \"application/zwo\" });\n    const fileMrc = new Blob([mrc], {type: \"application/mrc\"});\n    const fileErg = new Blob([erg], {type: \"application/erg\"});\n\n    fileArr.push(fileZwo);\n    fileArr.push(fileMrc);\n    fileArr.push(fileErg);\n\n    // save to cloud (firebase) if logged in\n    if (user) {\n\n        const itemsRef = firebase.database().ref();\n\n        const item = {\n          id: id,\n          name: name,\n          description: description,\n          author: author,\n          workout: separateBars[idx],\n          tags: tags,\n          instructions: separateInstructions[idx],\n          userId: user.uid,\n          updatedAt: Date(),\n          sportType: sportType,\n          durationType: durationType,\n        };\n\n        const item2 = {\n          name: name,\n          description: description,\n          updatedAt: Date(),\n          sportType: sportType,\n          durationType: durationType,\n          workoutTime: helpers.formatDuration(\n              helpers.getWorkoutLength(separateBars[idx], durationType)\n          ),\n          workoutDistance: helpers.getWorkoutDistance(separateBars[idx]),\n        };\n\n      var updates: any = {};\n      updates[`users/${author}/workouts/${description}/${fileNames[idx]}`] = item2;\n      updates[`workouts/${description}/${fileNames[idx]}`] = item;\n\n        // save to firebase\n        itemsRef\n            .update(updates)\n            .then(() => {\n              //upload to s3\n              upload(fileZwo, false);\n              upload(fileMrc, false);\n              upload(fileErg, false);\n              setMessage({visible: false});\n            })\n            .catch((error) => {\n              console.log(error);\n              setMessage({\n                visible: true,\n                class: \"error\",\n                text: \"Cannot save this\",\n              });\n            });\n\n    } else {\n      // download workout without saving\n      setMessage({ visible: false });\n    }\n\n    return fileArr;\n  }\n\n  function logout() {\n    console.log(\"logout\");\n\n    auth.signOut().then(() => setUser(null));\n  }\n\n  function timeout(delay: number) {\n    return new Promise( res => setTimeout(res, delay) );\n  }\n\n  async function downloadWorkout() {\n    for (let i = 0; i < separateBars.length; i++) {\n      const tempFile = save(i);\n\n      tempFile.forEach(file => {\n        const url = window.URL.createObjectURL(file);\n\n        var a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.style.display = \"none\";\n        a.href = url;\n        a.download = `${fileNames[i]}.${file.type.replace(\"application/\", '')}`;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      });\n\n      await timeout(100);\n    }\n  }\n\n  function handleUpload(file: Blob) {\n    // ask user if they want to overwrite current workout first\n    if (bars.length > 0) {\n      if (!window.confirm(\"Are you sure you want to create a new workout?\")) {\n        return false;\n      }\n    }\n\n    newWorkout();\n    upload(file, true);\n  }\n\n  function upload(file: Blob, parse = false) {\n    fetch(process.env.REACT_APP_UPLOAD_FUNCTION || \"https://zwiftworkout.netlify.app/.netlify/functions/upload\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        fileType: \"zwo\",\n        fileName: `${id}.zwo`,\n      }),\n    })\n        .then((res) => res.json())\n        .then(function (data) {\n          const signedUrl = data.uploadURL;\n\n          // upload to S3\n          fetch(signedUrl, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"zwo\",\n            },\n            body: file,\n          })\n              .then((response) => response.text())\n              .then((data) => {\n                console.log(\"File uploaded\");\n\n                // can parse now\n\n                if (parse) fetchAndParse(id);\n              })\n              .catch((error) => {\n                console.error(error);\n              });\n        });\n  }\n\n  function fetchAndParse(id: string) {\n    // remove previous workout\n\n    // TODO fix for running distance based\n    setBars([]);\n    setInstructions([]);\n    setFileNames([]);\n    setSeparateAuthors([]);\n    setSeparateDescription([]);\n    setSeparateTags([]);\n    setSeparateBars([[]]);\n    setSeparateInstructions([[]]);\n\n    fetch(`${S3_URL}/${id}.zwo`)\n        .then((response) => response.text())\n        .then((data) => {\n          // remove xml comments\n          data = data.replace(/<!--(.*?)-->/gm, \"\");\n\n          //now parse file\n          const workout = Converter.xml2js(data);\n          const workout_file = workout.elements[0];\n\n          if (workout_file.name === \"workout_file\") {\n            // file is valid\n            const authorIndex = workout_file.elements.findIndex(\n                (element: { name: string }) => element.name === \"author\"\n            );\n            if (\n                authorIndex !== -1 &&\n                workout_file.elements[authorIndex].elements\n            ) {\n              setAuthor(workout_file.elements[authorIndex].elements[0].text);\n            }\n\n            const nameIndex = workout_file.elements.findIndex(\n                (element: { name: string }) => element.name === \"name\"\n            );\n            if (nameIndex !== -1 && workout_file.elements[nameIndex].elements) {\n              setName(workout_file.elements[nameIndex].elements[0].text);\n            }\n\n            const descriptionIndex = workout_file.elements.findIndex(\n                (element: { name: string }) => element.name === \"description\"\n            );\n            if (\n                descriptionIndex !== -1 &&\n                workout_file.elements[descriptionIndex].elements\n            ) {\n              setDescription(\n                  workout_file.elements[descriptionIndex].elements[0].text\n              );\n            }\n\n            const workoutIndex = workout_file.elements.findIndex(\n                (element: { name: string }) => element.name === \"workout\"\n            );\n\n            var totalTime = 0;\n\n            workout_file.elements[workoutIndex].elements.map(\n                (w: {\n                  name: string;\n                  attributes: {\n                    Power: any;\n                    PowerLow: string;\n                    Duration: string;\n                    PowerHigh: string;\n                    Cadence: string;\n                    CadenceResting: string;\n                    Repeat: string;\n                    OnDuration: string;\n                    OffDuration: string;\n                    OnPower: string;\n                    OffPower: string;\n                    Pace: string;\n                  };\n                  elements: any;\n                }) => {\n                  let duration = parseFloat(w.attributes.Duration);\n\n                  if (w.name === \"SteadyState\")\n                    addBar(\n                        parseFloat(w.attributes.Power || w.attributes.PowerLow),\n                        parseFloat(w.attributes.Duration),\n                        parseFloat(w.attributes.Cadence || \"0\"),\n                        parseInt(w.attributes.Pace || \"0\")\n                    );\n\n                  if (\n                      w.name === \"Ramp\" ||\n                      w.name === \"Warmup\" ||\n                      w.name === \"Cooldown\"\n                  )\n                    addTrapeze(\n                        parseFloat(w.attributes.PowerLow),\n                        parseFloat(w.attributes.PowerHigh),\n                        parseFloat(w.attributes.Duration),\n                        parseInt(w.attributes.Pace || \"0\"),\n                        undefined,\n                        parseInt(w.attributes.Cadence)\n                    );\n\n                  if (w.name === \"IntervalsT\") {\n                    addInterval(\n                        parseFloat(w.attributes.Repeat),\n                        parseFloat(w.attributes.OnDuration),\n                        parseFloat(w.attributes.OffDuration),\n                        parseFloat(w.attributes.OnPower),\n                        parseFloat(w.attributes.OffPower),\n                        parseInt(w.attributes.Cadence || \"0\"),\n                        parseInt(w.attributes.CadenceResting),\n                        parseInt(w.attributes.Pace || \"0\")\n                    );\n                    duration =\n                        (parseFloat(w.attributes.OnDuration) +\n                            parseFloat(w.attributes.OffDuration)) *\n                        parseFloat(w.attributes.Repeat);\n                  }\n\n                  if (w.name === \"FreeRide\")\n                    addFreeRide(\n                        parseFloat(w.attributes.Duration),\n                        parseInt(w.attributes.Cadence)\n                    );\n\n                  // check for instructions\n                  const textElements = w.elements;\n                  if (textElements && textElements.length > 0) {\n                    textElements.map(\n                        (t: {\n                          name: string;\n                          attributes: {\n                            message: string | undefined;\n                            timeoffset: string;\n                          };\n                        }) => {\n                          if (t.name.toLowerCase() === \"textevent\")\n                            addInstruction(\n                                t.attributes.message,\n                                totalTime + parseFloat(t.attributes.timeoffset)\n                            );\n\n                          return false;\n                        }\n                    );\n                  }\n\n                  totalTime = totalTime + duration;\n                  // map functions expect return value\n                  return false;\n                }\n            );\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n  }\n\n  function calculateSpeed(pace: number = 0) {\n    if (sportType === \"bike\") {\n      return 0;\n    } else {\n      // return speed in m/s\n      // speed  = distance / time\n      const distances = [1.60934, 5, 10, 21.0975, 42.195];\n      const times = [\n        runningTimes.oneMile,\n        runningTimes.fiveKm,\n        runningTimes.tenKm,\n        runningTimes.halfMarathon,\n        runningTimes.marathon,\n      ];\n\n      return (distances[pace] * 1000) / helpers.getTimeinSeconds(times[pace]);\n    }\n  }\n\n  const renderBar = (bar: Bar) => (\n      <Bar\n          key={bar.id}\n          id={bar.id}\n          time={bar.time}\n          length={bar.length || 200}\n          power={bar.power || 100}\n          cadence={bar.cadence}\n          ftp={ftp}\n          weight={weight}\n          sportType={sportType}\n          durationType={durationType}\n          pace={bar.pace || 0}\n          speed={calculateSpeed(bar.pace || 0)}\n          onChange={(id: string, value: any) => handleOnChange(id, value)} // Change any to Interface Bar?\n          onClick={(id: string) => handleOnClick(id)}\n          selected={bar.id === actionId}\n          showLabel={true}\n      />\n  );\n\n  const renderTrapeze = (bar: Bar) => (\n      <Trapeze\n          key={bar.id}\n          id={bar.id}\n          time={bar.time}\n          length={bar.length || 200}\n          cadence={bar.cadence}\n          startPower={bar.startPower || 80}\n          endPower={bar.endPower || 160}\n          ftp={ftp}\n          sportType={sportType}\n          durationType={durationType}\n          pace={bar.pace || 0}\n          speed={calculateSpeed(bar.pace || 0)}\n          onChange={(id: string, value: any) => handleOnChange(id, value)} // Change any to Interface Bar?\n          onClick={(id: string) => handleOnClick(id)}\n          selected={bar.id === actionId}\n      />\n  );\n\n  const renderFreeRide = (bar: Bar) => (\n      <FreeRide\n          key={bar.id}\n          id={bar.id}\n          time={bar.time}\n          length={bar.length}\n          cadence={bar.cadence}\n          durationType={durationType}\n          sportType={sportType}\n          onChange={(id: string, value: any) => handleOnChange(id, value)} // Change any to Interface Bar?\n          onClick={(id: string) => handleOnClick(id)}\n          selected={bar.id === actionId}\n      />\n  );\n\n  const renderInterval = (bar: Bar) => (\n      <Interval\n          key={bar.id}\n          id={bar.id}\n          repeat={bar.repeat || 3}\n          onDuration={bar.onDuration || 10}\n          offDuration={bar.offDuration || 50}\n          onPower={bar.onPower || 250}\n          offPower={bar.offPower || 120}\n          onLength={bar.onLength || 200}\n          offLength={bar.offLength || 200}\n          cadence={bar.cadence}\n          restingCadence={bar.restingCadence || 0}\n          ftp={ftp}\n          weight={weight}\n          sportType={sportType}\n          durationType={durationType}\n          pace={bar.pace || 0}\n          speed={calculateSpeed(bar.pace || 0)}\n          handleIntervalChange={(id: string, value: any) =>\n              handleOnChange(id, value)\n          }\n          handleIntervalClick={(id: string) => handleOnClick(id)}\n          selected={bar.id === actionId}\n      />\n  );\n\n  const renderComment = (instruction: Instruction, index: number) => (\n      <Comment\n          key={instruction.id}\n          instruction={instruction}\n          durationType={durationType}\n          width={\n            durationType === \"distance\"\n                ? parseInt(helpers.getWorkoutDistance(bars)) * 100\n                : helpers.getWorkoutLength(bars, durationType) / 3\n          }\n          onChange={(id: string, values: Instruction) =>\n              changeInstruction(id, values)\n          }\n          onClick={(id: string) =>\n              setSelectedInstruction(instructions.find((i) => i.id === id))\n          }\n          index={index}\n      />\n  );\n\n  const renderRegistrationForm = () => {\n    switch (visibleForm) {\n      case \"login\":\n        return (\n            <LoginForm\n                login={setUser}\n                showSignup={() => setVisibleForm(\"signup\")}\n                dismiss={() => setSavePopupVisibility(false)}\n                showForgotPassword={() => setVisibleForm(\"forgotPassword\")}\n            />\n        );\n      case \"signup\":\n        return (\n            <SignupForm\n                signUp={setUser}\n                showLogin={() => setVisibleForm(\"login\")}\n                dismiss={() => setSavePopupVisibility(false)}\n            />\n        );\n      case \"forgotPassword\":\n        return (\n            <ForgotPasswordForm\n                dismiss={() => setSavePopupVisibility(false)}\n                workoutId={id}\n            />\n        );\n      case \"updatePassword\":\n        return (\n            <UpdatePasswordForm\n                dismiss={() => {\n                  setVisibleForm(\"login\");\n                  setSavePopupVisibility(true);\n                }}\n            />\n        );\n      default:\n        break;\n    }\n  };\n\n  function setPace(value: string, id: string) {\n    const index = bars.findIndex((bar) => bar.id === id);\n\n    if (index !== -1) {\n      const updatedArray = [...bars];\n      const element = [...updatedArray][index];\n      element.pace = parseInt(value);\n\n      if (durationType === \"time\") {\n        element.length =\n            (helpers.calculateDistance(\n                    element.time,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            (element.power || 1);\n      } else {\n        element.time =\n            (helpers.calculateTime(\n                    element.length,\n                    calculateSpeed(element.pace || 0)\n                ) *\n                1) /\n            (element.power || 1);\n      }\n\n      setBars(updatedArray);\n    }\n  }\n\n  function getPace(id: string) {\n    const index = bars.findIndex((bar) => bar.id === id);\n\n    if (index !== -1) {\n      const element = [...bars][index];\n      return element.pace;\n    }\n  }\n\n  function switchSportType(newSportType: SportType) {\n    setSportType(newSportType);\n    setDurationType(newSportType === \"bike\" ? \"time\" : \"distance\");\n  }\n\n  function toggleTextEditor() {\n    if (bars.length > 0 && !textEditorIsVisible) {\n      if (\n          window.confirm(\n              \"Editing a workout from the text editor will overwrite current workout\"\n          )\n      )\n        setTextEditorIsVisible(!textEditorIsVisible);\n    } else {\n      setTextEditorIsVisible(!textEditorIsVisible);\n    }\n  }\n\n  function transformTextToWorkout(textValue: string) {\n    // reset each time\n    setBars([]);\n    setInstructions([]);\n    setFileNames([]);\n    setSeparateAuthors([]);\n    setSeparateDescription([]);\n    setSeparateTags([]);\n    setSeparateBars([[]]);\n    setSeparateInstructions([[]]);\n\n    let tmpBars : Bar[] = [];\n    let tmpBarsSum: Bar[][] = new Array<Array<Bar>>();\n    let tmpInstructions : Instruction[] = [];\n    let tmpInstructionsSum : Instruction[][] = new Array<Array<Instruction>>();\n\n    // 2 minutes block at 112% FTP\n    // 2 minutes block at 330 W\n    // 30 seconds block at ..\n\n    //console.log(textValue);\n\n    let txt = textValue + '\\n';\n    const workoutBlocks = txt.split(\"\\n\");\n    workoutBlocks.forEach((workoutBlock) => {\n\n      if (workoutBlock.includes(\"author\")) {\n        let author = workoutBlock.replace(\"author\", \"\");\n        setSeparateAuthors(separateAuthors => [...separateAuthors, author]);\n      }\n\n      if (workoutBlock.includes(\"training\")) {\n        let name = workoutBlock.replace(\"training\", \"\");\n        setFileNames(fileNames => [...fileNames, name]);\n      }\n\n      if (workoutBlock.includes(\"description\")) {\n        let description = workoutBlock.replace(\"description\", \"\");\n        setSeparateDescription(separateDescription => [...separateDescription, description]);\n      }\n\n      if (workoutBlock.includes(\"steady\")) {\n        // generate a steady state block\n\n        // extract watts\n        const powerInWatts = workoutBlock.match(/([0-9]\\d*w)/);\n        const powerInWattsPerKg = workoutBlock.match(/([0-9]*.?[0-9]wkg)/);\n        const powerInPercentageFtp = workoutBlock.match(/([0-9]\\d*%)/);\n\n        let power = powerInWatts ? parseInt(powerInWatts[0]) / ftp : 1;\n        power = powerInWattsPerKg\n            ? (parseFloat(powerInWattsPerKg[0]) * weight) / ftp\n            : power;\n        power = powerInPercentageFtp\n            ? parseInt(powerInPercentageFtp[0]) / 100\n            : power;\n\n        // extract duration in seconds\n        const durationInSeconds = workoutBlock.match(/([0-9]\\d*s)/);\n        const durationInMinutes = workoutBlock.match(/([0-9]*:?[0-9][0-9]*m)/);\n\n        let duration = durationInSeconds && parseInt(durationInSeconds[0]);\n        duration = durationInMinutes\n            ? parseInt(durationInMinutes[0].split(\":\")[0]) * 60 +\n            (parseInt(durationInMinutes[0].split(\":\")[1]) || 0)\n            : duration;\n\n        // extract cadence in rpm\n        const cadence = workoutBlock.match(/([0-9]\\d*rpm)/);\n        const rpm = cadence ? parseInt(cadence[0]) : undefined;\n\n        // extract multiplier\n        // const multiplier = workoutBlock.match(/([0-9]\\d*x)/)\n        // const nTimes = multiplier ? Array(parseInt(multiplier[0])) : Array(1)\n        // for (var i = 0; i < nTimes.length; i++)\n\n        const b = addBar(power, duration || 300, rpm);\n        tmpBars.push(b);\n      }\n\n      if (\n          workoutBlock.includes(\"ramp\") ||\n          workoutBlock.includes(\"warmup\") ||\n          workoutBlock.includes(\"cooldown\")\n      ) {\n        // generate a steady ramp block\n\n        // extract watts\n        const startPowerInWatts = workoutBlock.match(/([0-9]\\d*w)/);\n        const startPowerInWattsPerKg = workoutBlock.match(/([0-9]*.?[0-9]wkg)/);\n        const startPowerInPercentageFtp = workoutBlock.match(/([0-9]\\d*%)/);\n\n        let startPower = startPowerInWatts\n            ? parseInt(startPowerInWatts[0]) / ftp\n            : 1;\n        startPower = startPowerInWattsPerKg\n            ? (parseFloat(startPowerInWattsPerKg[0]) * weight) / ftp\n            : startPower;\n        startPower = startPowerInPercentageFtp\n            ? parseInt(startPowerInPercentageFtp[0]) / 100\n            : startPower;\n\n        // extract watts\n        const endPowerInWatts = workoutBlock.match(/(-[0-9]\\d*w)/);\n        const endPowerInWattsPerKg = workoutBlock.match(/(-[0-9]*.?[0-9]wkg)/);\n        const endPowerInPercentageFtp = workoutBlock.match(/-([0-9]\\d*%)/);\n\n        let endPower = endPowerInWatts\n            ? Math.abs(parseInt(endPowerInWatts[0])) / ftp\n            : 1;\n        endPower = endPowerInWattsPerKg\n            ? (Math.abs(parseFloat(endPowerInWattsPerKg[0])) * weight) / ftp\n            : endPower;\n        endPower = endPowerInPercentageFtp\n            ? Math.abs(parseInt(endPowerInPercentageFtp[0])) / 100\n            : endPower;\n\n        const durationInSeconds = workoutBlock.match(/([0-9]\\d*s)/);\n        const durationInMinutes = workoutBlock.match(/([0-9]*:?[0-9][0-9]*m)/);\n\n        let duration = durationInSeconds && parseInt(durationInSeconds[0]);\n        duration = durationInMinutes\n            ? parseInt(durationInMinutes[0].split(\":\")[0]) * 60 +\n            (parseInt(durationInMinutes[0].split(\":\")[1]) || 0)\n            : duration;\n\n        // extract cadence in rpm\n        const cadence = workoutBlock.match(/([0-9]\\d*rpm)/);\n        const rpm = cadence ? parseInt(cadence[0]) : undefined;\n\n        const b = addTrapeze(\n            startPower,\n            endPower,\n            duration || 300,\n            undefined,\n            undefined,\n            rpm\n        );\n        tmpBars.push(b);\n      }\n\n      if (workoutBlock.includes(\"freeride\")) {\n        const durationInSeconds = workoutBlock.match(/([0-9]\\d*s)/);\n        const durationInMinutes = workoutBlock.match(/([0-9]*:?[0-9][0-9]*m)/);\n\n        let duration = durationInSeconds && parseInt(durationInSeconds[0]);\n        duration = durationInMinutes\n            ? parseInt(durationInMinutes[0].split(\":\")[0]) * 60 +\n            (parseInt(durationInMinutes[0].split(\":\")[1]) || 0)\n            : duration;\n\n        // extract cadence in rpm\n        const cadence = workoutBlock.match(/([0-9]\\d*rpm)/);\n        const rpm = cadence ? parseInt(cadence[0]) : undefined;\n\n        const b = addFreeRide(duration || 600, rpm);\n        tmpBars.push(b);\n      }\n\n      if (workoutBlock.includes(\"interval\")) {\n        const multiplier = workoutBlock.match(/([0-9]\\d*x)/);\n        const nTimes = multiplier ? parseInt(multiplier[0]) : 3;\n\n        const durationInSeconds = workoutBlock.match(/([0-9]\\d*s)/);\n        const durationInMinutes = workoutBlock.match(/([0-9]*:?[0-9][0-9]*m)/);\n\n        let duration = durationInSeconds && parseInt(durationInSeconds[0]);\n        duration = durationInMinutes\n            ? parseInt(durationInMinutes[0].split(\":\")[0]) * 60 +\n            (parseInt(durationInMinutes[0].split(\":\")[1]) || 0)\n            : duration;\n\n        const offDurationInSeconds = workoutBlock.match(/(-[0-9]\\d*s)/);\n        const offDurationInMinutes = workoutBlock.match(\n            /(-[0-9]*:?[0-9][0-9]*m)/\n        );\n\n        let offDuration =\n            offDurationInSeconds && Math.abs(parseInt(offDurationInSeconds[0]));\n        offDuration = offDurationInMinutes\n            ? Math.abs(parseInt(offDurationInMinutes[0].split(\":\")[0])) * 60 +\n            (parseInt(offDurationInMinutes[0].split(\":\")[1]) || 0)\n            : offDuration;\n\n        // extract watts\n        const startPowerInWatts = workoutBlock.match(/([0-9]\\d*w)/);\n        const startPowerInWattsPerKg = workoutBlock.match(/([0-9]*.?[0-9]wkg)/);\n        const startPowerInPercentageFtp = workoutBlock.match(/([0-9]\\d*%)/);\n\n        let startPower = startPowerInWatts\n            ? parseInt(startPowerInWatts[0]) / ftp\n            : 1;\n        startPower = startPowerInWattsPerKg\n            ? (parseFloat(startPowerInWattsPerKg[0]) * weight) / ftp\n            : startPower;\n        startPower = startPowerInPercentageFtp\n            ? parseInt(startPowerInPercentageFtp[0]) / 100\n            : startPower;\n\n        // extract watts\n        const endPowerInWatts = workoutBlock.match(/(-[0-9]\\d*w)/);\n        const endPowerInWattsPerKg = workoutBlock.match(/(-[0-9]*.?[0-9]wkg)/);\n        const endPowerInPercentageFtp = workoutBlock.match(/-([0-9]\\d*%)/);\n\n        let endPower = endPowerInWatts\n            ? Math.abs(parseInt(endPowerInWatts[0])) / ftp\n            : 0.5;\n        endPower = endPowerInWattsPerKg\n            ? (Math.abs(parseFloat(endPowerInWattsPerKg[0])) * weight) / ftp\n            : endPower;\n        endPower = endPowerInPercentageFtp\n            ? Math.abs(parseInt(endPowerInPercentageFtp[0])) / 100\n            : endPower;\n\n        // extract cadence in rpm\n        const cadence = workoutBlock.match(/([0-9]\\d*rpm)/);\n        const rpm = cadence ? parseInt(cadence[0]) : undefined;\n\n        const restingCadence = workoutBlock.match(/(-[0-9]\\d*rpm)/);\n        const restingRpm = restingCadence\n            ? Math.abs(parseInt(restingCadence[0]))\n            : undefined;\n\n        const b= addInterval(\n            nTimes,\n            duration || 30,\n            offDuration || 120,\n            startPower,\n            endPower,\n            rpm,\n            restingRpm\n        );\n        tmpBars.push(b);\n      }\n\n      if (workoutBlock.includes(\"message\")) {\n        // extract message\n        const message = workoutBlock.match(/[\"'](.*?)[\"']/);\n        const text = message ? message[0] : \"\";\n\n        const durationInSeconds = workoutBlock.match(/([0-9]\\d*s)/);\n        const durationInMinutes = workoutBlock.match(/([0-9]*:?[0-9][0-9]*m)/);\n\n        let duration = durationInSeconds && parseInt(durationInSeconds[0]);\n        duration = durationInMinutes\n            ? parseInt(durationInMinutes[0].split(\":\")[0]) * 60 +\n            (parseInt(durationInMinutes[0].split(\":\")[1]) || 0)\n            : duration;\n\n        const i = addInstruction(text, duration || 0);\n        tmpInstructions.push(i);\n      }\n\n      if (workoutBlock.includes(\"tags\")) {\n        let tags = workoutBlock.replace(\"tags\", \"\");\n        setSeparateAuthors(separateAuthors => [...separateAuthors, author]);\n        setSeparateTags(separateTags => [...separateTags, tags]);\n      }\n\n      if (workoutBlock.includes(\"end\")) {\n        tmpBarsSum.push([...tmpBars]);\n        tmpInstructionsSum.push([...tmpInstructions]);\n        setSeparateBars([...tmpBarsSum]);\n        setSeparateInstructions([...tmpInstructionsSum]);\n        tmpBars.length = 0;\n        tmpInstructions.length = 0;\n      }\n    });\n    tmpBarsSum.length = 0;\n    tmpInstructionsSum.length = 0;\n  }\n\n  return (\n      // Adding tabIndex allows div element to receive keyboard events\n      <div className=\"container\" onKeyDown={handleKeyPress} tabIndex={0}>\n        <Helmet>\n          <title>\n            {name\n                ? `${name} - Zwift Workout Editor`\n                : \"My Workout - Zwift Workout Editor\"}\n          </title>\n          <meta name=\"description\" content={description} />\n          <meta\n              property=\"og:title\"\n              content={\n                name\n                    ? `${name} - Zwift Workout Editor`\n                    : \"My Workout - Zwift Workout Editor\"\n              }\n          />\n          <meta property=\"og:description\" content={description} />\n          <link\n              rel=\"canonical\"\n              href={`https://www.zwiftworkout.com/editor/${id}`}\n          />\n          <meta\n              property=\"og:url\"\n              content={`https://www.zwiftworkout.com/editor/${id}`}\n          />\n        </Helmet>\n\n        {message?.visible && (\n            <div className={`message ${message.class}`}>\n              {message.text}\n              <button\n                  className=\"close\"\n                  onClick={() => setMessage({ visible: false })}\n              >\n                <FontAwesomeIcon icon={faTimesCircle} size=\"lg\" fixedWidth />\n              </button>\n            </div>\n        )}\n\n        {showWorkouts && (\n            <Popup width=\"500px\" dismiss={() => setShowWorkouts(false)}>\n              {user ? <Workouts userId={user.uid} /> : renderRegistrationForm()}\n            </Popup>\n        )}\n\n        {selectedInstruction && (\n            <EditComment\n                instruction={selectedInstruction}\n                onChange={(id: string, values: Instruction) => {\n                  changeInstruction(id, values);\n                  setSelectedInstruction(undefined);\n                }}\n                dismiss={() => setSelectedInstruction(undefined)}\n                onDelete={(id: string) => {\n                  deleteInstruction(id);\n                  setSelectedInstruction(undefined);\n                }}\n            />\n        )}\n\n        {savePopupIsVisile && (\n            <Popup width=\"500px\" dismiss={() => setSavePopupVisibility(false)}>\n              {user ? (\n                  <SaveForm\n                      name={name}\n                      description={description}\n                      author={author}\n                      tags={tags}\n                      onNameChange={setName}\n                      onDescriptionChange={setDescription}\n                      onAuthorChange={setAuthor}\n                      onTagsChange={setTags}\n                      onSave={() => {\n                        for (let i = 0; i < separateBars.length; i++) {\n                          save(i);\n                          setSavePopupVisibility(false);\n                        }\n                      }}\n                      onDismiss={() => setSavePopupVisibility(false)}\n                      onLogout={logout}\n                  />\n              ) : (\n                  renderRegistrationForm()\n              )}\n            </Popup>\n        )}\n        {sharePopupIsVisile && (\n            <Popup width=\"500px\" dismiss={() => setSharePopupVisibility(false)}>\n              <ShareForm id={id} onDismiss={() => setSharePopupVisibility(false)} />\n            </Popup>\n        )}\n        <div className=\"info\">\n          <div className=\"title\">\n            <h1>{name}</h1>\n            <div className=\"description\">{description}</div>\n            <p>{author ? `by ${author}` : \"\"}</p>\n          </div>\n          <div className=\"workout\">\n            <div className=\"form-input\">\n              <label>Workout Time</label>\n              <input\n                  className=\"textInput\"\n                  value={helpers.formatDuration(\n                      helpers.getWorkoutLength(bars, durationType)\n                  )}\n                  disabled\n              />\n            </div>\n            {sportType === \"run\" && (\n                <div className=\"form-input\">\n                  <label>Workout Distance</label>\n                  <input\n                      className=\"textInput\"\n                      value={helpers.getWorkoutDistance(bars)}\n                      disabled\n                  />\n                </div>\n            )}\n            {sportType === \"bike\" && (\n                <div className=\"form-input\">\n                  <label title=\"Training Load\">Training Load</label>\n                  <input\n                      className=\"textInput\"\n                      value={helpers.getStressScore(bars, ftp)}\n                      disabled\n                  />\n                </div>\n            )}\n            {sportType === \"run\" && (\n                <LeftRightToggle<\"time\", \"distance\">\n                    label=\"Duration Type\"\n                    leftValue=\"time\"\n                    rightValue=\"distance\"\n                    leftIcon={faClock}\n                    rightIcon={faRuler}\n                    selected={durationType}\n                    onChange={setDurationType}\n                />\n            )}\n            <LeftRightToggle<\"bike\", \"run\">\n                label=\"Sport Type\"\n                leftValue=\"bike\"\n                rightValue=\"run\"\n                leftIcon={faBiking}\n                rightIcon={faRunning}\n                selected={sportType}\n                onChange={switchSportType}\n            />\n          </div>\n        </div>\n        {sportType === \"run\" && (\n            <RunningTimesEditor times={runningTimes} onChange={setRunningTimes} />\n        )}\n        {textEditorIsVisible && sportType === \"bike\" && (\n            <div className=\"text-editor\">\n          <textarea\n              onChange={(e) => transformTextToWorkout(e.target.value.replace(/[ \\t]+/g, ''))}\n              rows={10}\n              spellCheck={false}\n              className=\"text-editor-textarea\"\n              placeholder=\"Add one block per line here: &#10;steady 3.0wkg 30s\"\n          ></textarea>\n              <div className=\"text-editor-instructions\">\n                <h2>Instructions</h2>\n                <p>\n                  Every row correspond to a workout block. Scroll down to see some\n                  examples.\n                </p>\n                <h3>Blocks</h3>\n                <p>\n                  <span>steady</span> <span>warmup</span> <span>cooldown</span>{\" \"}\n                  <span>ramp</span> <span>intervals</span> <span>freeride</span>{\" \"}\n                  <span>message</span>\n                </p>\n                <h3>Time</h3>\n                <p>\n                  <span>30s</span> or <span>0:30m</span>\n                </p>\n                <h3>Power</h3>\n                <p>\n                  <span>250w</span> or <span>3.0wkg</span> or <span>75%</span> (FTP)\n                </p>\n                <h3>Cadence</h3>\n                <p>\n                  <span>120rpm</span>\n                </p>\n                <h2>Examples</h2>\n                <h3>Steady block</h3>\n                <p>\n                  <code>steady 3.0wkg 30s</code>\n                  <code>steady 120w 10m 85rpm</code>\n                </p>\n                <h3>Warmup / Cooldown / Ramp block</h3>\n                <p>\n                  <code>warmup 2.0wkg-3.5wkg 10m</code>\n                  <code>cooldown 180w-100w 5m 110rpm</code>\n                </p>\n                <h3>Intervals</h3>\n                <p>\n                  <code>interval 10x 30s-30s 4.0wkg-1.0wkg 110rpm-85rpm</code>\n                  <code>interval 3x 1:00m-5:00m 300w-180w</code>\n                </p>\n                <h3>Free Ride</h3>\n                <p>\n                  <code>freeride 10m 85rpm</code>\n                </p>\n                <h3>Text Event</h3>\n                <p>\n                  <code>message \"Get ready to your first set!\" 30s</code>\n                  <code>message \"Last one!\" 20:00m</code>\n                </p>\n              </div>\n            </div>\n        )}\n        <div id=\"editor\" className=\"editor\">\n          {actionId && (\n              <div className=\"actions\">\n                <button onClick={() => moveLeft(actionId)} title=\"Move Left\">\n                  <FontAwesomeIcon icon={faArrowLeft} size=\"lg\" fixedWidth />\n                </button>\n                <button onClick={() => moveRight(actionId)} title=\"Move Right\">\n                  <FontAwesomeIcon icon={faArrowRight} size=\"lg\" fixedWidth />\n                </button>\n                <button onClick={() => removeBar(actionId)} title=\"Delete\">\n                  <FontAwesomeIcon icon={faTrash} size=\"lg\" fixedWidth />\n                </button>\n                <button onClick={() => duplicateBar(actionId)} title=\"Duplicate\">\n                  <FontAwesomeIcon icon={faCopy} size=\"lg\" fixedWidth />\n                </button>\n                {sportType === \"run\" && (\n                    <select\n                        name=\"pace\"\n                        value={getPace(actionId)}\n                        onChange={(e) => setPace(e.target?.value, actionId)}\n                        className=\"selectInput\"\n                    >\n                      <option value=\"0\">1 Mile Pace</option>\n                      <option value=\"1\">5K Pace</option>\n                      <option value=\"2\">10K Pace</option>\n                      <option value=\"3\">Half Marathon Pace</option>\n                      <option value=\"4\">Marathon Pace</option>\n                    </select>\n                )}\n              </div>\n          )}\n          <div className=\"canvas\" ref={canvasRef}>\n            {actionId && (\n                <div\n                    className=\"fader\"\n                    style={{ width: canvasRef.current?.scrollWidth }}\n                    onClick={() => setActionId(undefined)}\n                ></div>\n            )}\n            <div className=\"segments\" ref={segmentsRef}>\n              {bars.map((bar) => {\n                if (bar.type === \"bar\") {\n                  return renderBar(bar);\n                } else if (bar.type === \"trapeze\") {\n                  return renderTrapeze(bar);\n                } else if (bar.type === \"freeRide\") {\n                  return renderFreeRide(bar);\n                } else if (bar.type === \"interval\") {\n                  return renderInterval(bar);\n                } else {\n                  return false;\n                }\n              })}\n            </div>\n\n            <div className=\"slider\">\n              {instructions.map((instruction, index) =>\n                  renderComment(instruction, index)\n              )}\n            </div>\n\n            {durationType === \"time\" ? (\n                <TimeAxis width={segmentsWidth} />\n            ) : (\n                <DistanceAxis width={segmentsWidth} />\n            )}\n          </div>\n\n          <ZoneAxis />\n        </div>\n        <div className=\"cta\">\n          {sportType === \"bike\" ? (\n              <div>\n                <ReactTooltip effect=\"solid\" />\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => toggleTextEditor()}\n                    style={{ backgroundColor: \"palevioletred\" }}\n                    data-tip=\"New! Workout text editor!\"\n                >\n                  <FontAwesomeIcon icon={faPen} fixedWidth />\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(0.5)}\n                    style={{ backgroundColor: Colors.GRAY }}\n                >\n                  Z1\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(Zones.Z2.min)}\n                    style={{ backgroundColor: Colors.BLUE }}\n                >\n                  Z2\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(Zones.Z3.min)}\n                    style={{ backgroundColor: Colors.GREEN }}\n                >\n                  Z3\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(Zones.Z4.min)}\n                    style={{ backgroundColor: Colors.YELLOW }}\n                >\n                  Z4\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(Zones.Z5.min)}\n                    style={{ backgroundColor: Colors.ORANGE }}\n                >\n                  Z5\n                </button>\n                <button\n                    className=\"btn btn-square\"\n                    onClick={() => addBar(Zones.Z6.min)}\n                    style={{ backgroundColor: Colors.RED }}\n                >\n                  Z6\n                </button>\n              </div>\n          ) : (\n              <button\n                  className=\"btn\"\n                  onClick={() => addBar(1, 300, 0, 0, 1000)}\n                  style={{ backgroundColor: Colors.WHITE }}\n              >\n                <SteadyLogo className=\"btn-icon\" /> Steady Pace\n              </button>\n          )}\n\n          <button\n              className=\"btn\"\n              onClick={() => addTrapeze(0.25, 0.75)}\n              style={{ backgroundColor: Colors.WHITE }}\n          >\n            <WarmupLogo className=\"btn-icon\" /> Warm up\n          </button>\n          <button\n              className=\"btn\"\n              onClick={() => addTrapeze(0.75, 0.25)}\n              style={{ backgroundColor: Colors.WHITE }}\n          >\n            <WarmdownLogo className=\"btn-icon\" /> Cool down\n          </button>\n          <button\n              className=\"btn\"\n              onClick={() => addInterval()}\n              style={{ backgroundColor: Colors.WHITE }}\n          >\n            <IntervalLogo className=\"btn-icon\" /> Interval\n          </button>\n          <button\n              className=\"btn\"\n              onClick={() => addFreeRide()}\n              style={{ backgroundColor: Colors.WHITE }}\n          >\n            <FontAwesomeIcon\n                icon={sportType === \"bike\" ? faBicycle : faRunning}\n                size=\"lg\"\n                fixedWidth\n            />{\" \"}\n            Free {sportType === \"bike\" ? \"Ride\" : \"Run\"}\n          </button>\n          <button\n              className=\"btn\"\n              onClick={() => addInstruction()}\n              style={{ backgroundColor: Colors.WHITE }}\n          >\n            <FontAwesomeIcon icon={faComment} size=\"lg\" fixedWidth /> Text Event\n          </button>\n          {sportType === \"bike\" && (\n              <div className=\"form-input\">\n                <label htmlFor=\"ftp\">FTP (W)</label>\n                <input\n                    className=\"textInput\"\n                    type=\"number\"\n                    name=\"ftp\"\n                    value={ftp}\n                    onChange={(e) => setFtp(parseInt(e.target.value))}\n                />\n              </div>\n          )}\n\n          {sportType === \"bike\" && (\n              <div className=\"form-input\">\n                <label htmlFor=\"weight\">Body Weight (Kg)</label>\n                <input\n                    className=\"textInput\"\n                    type=\"number\"\n                    name=\"weight\"\n                    value={weight}\n                    onChange={(e) => setWeight(parseInt(e.target.value))}\n                />\n              </div>\n          )}\n\n          <button\n              className=\"btn\"\n              onClick={() => {\n                if (\n                    window.confirm(\"Are you sure you want to create a new workout?\")\n                )\n                  newWorkout();\n              }}\n          >\n            <FontAwesomeIcon icon={faFile} size=\"lg\" fixedWidth /> New\n          </button>\n          <button className=\"btn\" onClick={() => saveWorkout()}>\n            <FontAwesomeIcon icon={faSave} size=\"lg\" fixedWidth /> Save\n          </button>\n          <button\n              className=\"btn\"\n              onClick={() => {\n                if (window.confirm(\"Are you sure you want to delete this workout?\"))\n                  deleteWorkout();\n              }}\n          >\n            <FontAwesomeIcon icon={faTrash} size=\"lg\" fixedWidth /> Delete\n          </button>\n          <button className=\"btn\" onClick={() => downloadWorkout()}>\n            <FontAwesomeIcon icon={faDownload} size=\"lg\" fixedWidth /> Download\n          </button>\n          <input\n              accept=\".xml,.zwo\"\n              id=\"contained-button-file\"\n              type=\"file\"\n              style={{ display: \"none\" }}\n              onChange={(e) => handleUpload(e.target.files![0])}\n          />\n          <button\n              className=\"btn\"\n              onClick={() =>\n                  document.getElementById(\"contained-button-file\")!.click()\n              }\n          >\n            <FontAwesomeIcon icon={faUpload} size=\"lg\" fixedWidth /> Upload\n          </button>\n          <button className=\"btn\" onClick={() => setShowWorkouts(true)}>\n            <FontAwesomeIcon icon={faList} size=\"lg\" fixedWidth /> Workouts\n          </button>\n          <button className=\"btn\" onClick={() => shareWorkout()}>\n            <FontAwesomeIcon icon={faShareAlt} size=\"lg\" fixedWidth /> Share\n          </button>\n        </div>\n        <Footer />\n      </div>\n  );\n};\n\nexport default Editor;","import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom';\nimport './Home.css'\nimport Icon from './assets/icon.png'\nimport Facebook from './assets/facebook.png'\nimport Twitter from './assets/twitter.png'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBolt, faLaptop, faCloud, faPiggyBank, faRunning, faBiking } from '@fortawesome/free-solid-svg-icons'\nimport ReactGA from 'react-ga';\nimport { Helmet } from \"react-helmet\";\nimport Footer from './components/Footer/Footer'\n\nexport default function Home() {\n\n  useEffect(() => {\n    ReactGA.initialize('UA-55073449-9');\n    ReactGA.pageview(window.location.pathname + window.location.search);\n  })\n\n  function shareOnFacebook() {\n    window.open(\n      'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent('https://www.zwiftworkout.com/'),\n      'facebook-share-dialog',\n      'width=626,height=436');\n    return false;\n  }\n\n  return (\n    <div className=\"home\">\n      <Helmet>\n        <meta name=\"description\" content=\"Edit and share your Zwift workouts directly from your browser\" />\n        <meta property=\"og:title\" content=\"Zwift Workout Editor\" />\n        <meta property=\"og:description\" content=\"Edit and share your Zwift workouts directly from your browser\" />\n        <link rel=\"canonical\" href=\"https://www.zwiftworkout.com/\" />\n        <meta property=\"og:url\" content=\"https://www.zwiftworkout.com/\" />\n      </Helmet>\n      <div className=\"hero\">\n        <img src={Icon} alt=\"logo\" width=\"100\" />\n        <h1>Zwift Workout Editor</h1>\n        <Link to=\"/editor/new\" className=\"btn btn-primary btn-xl\">Editor</Link>\n        <Link to=\"/search\" className=\"btn btn-primary btn-xl\">Search</Link>\n        <Link to=\"/chartYear\" className=\"btn btn-primary btn-xl\">Chart</Link>\n      </div>\n      <div className=\"features\">\n        <h2>Top features</h2>\n        <p>Why should I use it?</p>\n        <div className=\"perks\">\n          <div>\n            <h3><FontAwesomeIcon icon={faBiking} fixedWidth /><FontAwesomeIcon icon={faRunning} fixedWidth /> Bike & Run</h3>\n            <p>Works both for Running and Cycling workouts</p>\n          </div>\n          <div>\n            <h3><FontAwesomeIcon icon={faBolt} fixedWidth /> Fast</h3>\n            <p>Super fast Online editor for your Zwift workout files.</p>\n          </div>\n          <div>\n            <h3><FontAwesomeIcon icon={faLaptop} fixedWidth /> CPU Friendly</h3>\n            <p>Edit your workout files outside Zwift - don't overload you computer</p>\n          </div>\n          <div>\n            <h3><FontAwesomeIcon icon={faCloud} fixedWidth /> Share</h3>\n            <p>Easily share your workout files with your friends</p>\n          </div>\n          <div>\n            <h3><FontAwesomeIcon icon={faPiggyBank} fixedWidth /> Open Source</h3>\n            <p>This software is free to use.</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"blue\">\n        <div className=\"share\" id=\"share\">\n          <h2>Do you like this?</h2>\n          <p>Please help me out by sharing this page on Social Media</p>\n          <a href=\"https://twitter.com/intent/tweet?text=Check%20out%20this%20Zwift%20Workout%20%20Editor%20https://www.zwiftworkout.com/\">\n            <img src={Twitter} alt=\"Twitter\" width=\"80\" />\n          </a>\n          <a href=\"#share\" onClick={shareOnFacebook}>\n            <img src={Facebook} alt=\"Facebook\" width=\"80\" />\n          </a>\n        </div>\n      </div>\n      <div className=\"black\">\n        <div className=\"about\">\n          <h2>About me</h2>\n          <div className=\"bio\">\n            <h3>Bio</h3>\n            <p>I'm a full stack developer and I love cycling. I joined Zwift during the 2020 lockdown and I loved it.</p>\n            <p>Find me on Zwift (Carlo Schiesaro <span role=\"img\" aria-label=\"Italy\"></span>) or follow on <a href=\"https://www.strava.com/athletes/4523127\" target=\"blank\">Strava</a></p>\n          </div>\n          <div className=\"contact\">\n            <h3>Support</h3>\n            <p>If you'd like to report for a bug or ask for a new feature please use my <a href=\"https://github.com/breiko83/zwo-editor\" target=\"blank\">github repository</a>.</p>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  )\n}","import React from 'react';\nimport {ResponsiveBar} from '@nivo/bar';\nimport './ChartBar.css';\n\nconst defaultNames = [\"\", \"1\", \"\", \"2\", \"\", \"\"];\n\nfunction timeStringToFloat(time: string) {\n    let hoursMinutesSeconds = time.split(/[.:]/);\n    let hours = 0;\n    let minutes = 0;\n    let seconds = 0;\n    switch (hoursMinutesSeconds.length) {\n        case 3:\n            hours = hoursMinutesSeconds[0] ? parseInt(hoursMinutesSeconds[0], 10) : 0;\n            minutes = hoursMinutesSeconds[1] ? parseInt(hoursMinutesSeconds[1], 10) : 0;\n            seconds = hoursMinutesSeconds[2] ? parseInt(hoursMinutesSeconds[2], 10) : 0;\n            break;\n        case 2:\n            minutes = hoursMinutesSeconds[0] ? parseInt(hoursMinutesSeconds[0], 10) : 0;\n            seconds = hoursMinutesSeconds[1] ? parseInt(hoursMinutesSeconds[1], 10) : 0;\n            break;\n        case 1:\n            seconds = hoursMinutesSeconds[0] ? parseInt(hoursMinutesSeconds[0], 10) : 0;\n            break;\n    }\n    return hours * 3600 + minutes * 60 + seconds;\n}\n\nfunction formatDuration(seconds: number) {\n    return new Date(seconds * 1000).toISOString().substring(11, 11 + 8);\n}\n\nconst ChartBar = (data: any) => {\n    const mData = data.location.state;\n\n    let timesData: any[] = [];\n\n    mData.Times.forEach((value: any, index: number, array: any[]) => {\n        let obj = {\n            \"RaceName\": mData.RaceName,\n            \"Name\": mData.Names ? mData.Names[index] : defaultNames[index],\n            \"Time\": timeStringToFloat(mData.Times[index])\n        };\n        timesData.push(obj);\n    });\n\n    return (\n        <>\n            <text className={\"title\"}>{mData.Racer}<br/>{mData.RaceName}<br/>{mData.Date}</text>\n            <ResponsiveBar\n                data={timesData}\n                keys={[\n                    'Time'\n                ]}\n                indexBy=\"Name\"\n                margin={{\n                    top: 100,\n                    right: 100,\n                    bottom: 50,\n                    left: 100\n                }}\n                padding={0.3}\n                valueScale={{type: 'linear'}}\n                indexScale={{type: 'band', round: true}}\n                valueFormat={value => formatDuration(value)}\n                colors={{scheme: 'nivo'}}\n                colorBy={'indexValue'}\n                borderColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'darker',\n                            1.6\n                        ]\n                    ]\n                }}\n                axisTop={null}\n                axisRight={null}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legendPosition: 'middle',\n                    legendOffset: 32\n                }}\n                axisLeft={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legendPosition: 'middle',\n                    legendOffset: -40,\n                    format: value => formatDuration(value)\n                }}\n                labelSkipWidth={12}\n                labelSkipHeight={12}\n                labelTextColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'darker',\n                            1.6\n                        ]\n                    ]\n                }}\n                legends={[\n                    {\n                        dataFrom: 'indexes',\n                        anchor: 'bottom-right',\n                        direction: 'column',\n                        justify: false,\n                        translateX: 120,\n                        translateY: 0,\n                        itemsSpacing: 2,\n                        itemWidth: 100,\n                        itemHeight: 20,\n                        itemDirection: 'left-to-right',\n                        itemOpacity: 0.85,\n                        symbolSize: 20,\n                        effects: [\n                            {\n                                on: 'hover',\n                                style: {\n                                    itemOpacity: 1\n                                }\n                            }\n                        ]\n                    }\n                ]}\n                role=\"application\"\n            />\n        </>\n    )\n}\n\nexport default ChartBar;","import React from 'react';\nimport {DataSearch, MultiList, ReactiveBase, ReactiveList, ResultCard} from \"@appbaseio/reactivesearch\";\nimport profilePhoto from \"../../assets/profile.jpg\";\nimport {useHistory} from 'react-router-dom';\nimport \"./Search.css\";\n\nexport default function Search() {\n    const history = useHistory();\n    const handleOnClick = (data: any) => history.push({pathname: '/chart', state: data});\n\n    return (\n        <ReactiveBase\n            url=\"https://agoge-yshxkjn-arc.searchbase.io\"\n            app=\"athletes\"\n            credentials=\"GaR7hfbNn:7fa3b0eb-6275-4704-a576-d611af35d177\"\n            enableAppbase\n        >\n            <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                <div\n                    style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        height: \"30%\",\n                        margin: \"10px\"\n                    }}\n                >\n                    <MultiList\n                        componentId=\"raceNameFilter\"\n                        dataField=\"RaceName.keyword\"\n                        title=\"Filter by race\"\n                        showCheckbox/>\n                </div>\n                <div style={{display: \"flex\", flexDirection: \"column\", width: \"66%\"}}>\n                    <DataSearch\n                        style={{\n                            marginTop: \"35px\"\n                        }}\n                        componentId=\"searchbox\"\n                        dataField={[\n                            \"Racer\"\n                        ]}\n                        fieldWeights={[1]}\n                        placeholder=\"Search for athlete\"\n                    />\n                    <ReactiveList\n                        componentId=\"results\"\n                        dataField=\"Racer\"\n                        size={8}\n                        pagination={true}\n                        react={{\n                            and: [\"searchbox\", \"raceNameFilter\"]\n                        }}\n                        style={{textAlign: \"center\"}}\n                        render={({data}) => (\n                            <ReactiveList.ResultCardsWrapper>\n                                {data.map((item: any) => (\n                                    <ResultCard key={item._id}>\n                                        <ResultCard.Image\n                                            onClick={() => handleOnClick(item)}\n                                            style={{\n                                                backgroundImage: `url(${profilePhoto})`\n                                            }}\n                                            src={\"\"}/>\n                                        <ResultCard.Title style={{fontFamily: \"monospace\", fontWeight: \"bold\"}}\n                                                          dangerouslySetInnerHTML={{\n                                                              __html: item.Racer\n                                                          }}\n                                        />\n                                        <ResultCard.Description className={\"description\"} style={{top: \"3%\", left: 0}}>\n                                            <p style={{textAlign: \"left\"}}>{\"Race: \" + item.RaceName}</p>\n                                            <br/>\n                                            <p style={{textAlign: \"left\"}}>Sex:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{item.Sex}</p>\n                                            <p style={{textAlign: \"left\"}}>Country:&nbsp;&nbsp;{item.Country}</p>\n                                            <p style={{textAlign: \"left\"}}>Division: {item.Division}</p>\n                                            <p style={{textAlign: \"left\"}}>: {item.Times[0]}</p>\n                                            <p style={{textAlign: \"left\"}}>T1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{item.Times[1]}</p>\n                                            <p style={{textAlign: \"left\"}}>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{item.Times[2]}</p>\n                                            <p style={{textAlign: \"left\"}}>T2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{item.Times[3]}</p>\n                                            <p style={{textAlign: \"left\"}}>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{item.Times[4]}</p>\n                                            <p style={{textAlign: \"left\"}}>:&nbsp;&nbsp;&nbsp;&nbsp;{item.Times[5]}</p>\n                                        </ResultCard.Description>\n                                    </ResultCard>\n                                ))}\n                            </ReactiveList.ResultCardsWrapper>\n                        )}\n                    />\n                </div>\n            </div>\n        </ReactiveBase>\n    );\n}","import React, {Component} from \"react\";\nimport Chart from \"react-apexcharts\";\nimport './ChartBar.css';\n\nclass ChartApex extends Component {\n    // @ts-ignore\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            options: {\n                chart: {\n                    id: \"basic-line\"\n                },\n                xaxis: {\n                    categories: [2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021]\n                }\n            },\n            series: [\n                {\n                    name: \"\",\n                    data: [\"24:48\", \"26:05\", \"29:07\", \"30:27\", \"32:35\", \"30:13\", \"14:19\", \"30:48\"]\n                }\n            ]\n        };\n    }\n\n    render() {\n        return (\n            <>\n                <text className={\"title\"}>{\"Sergey MIKHALEV\"}<br/>{\"2014-2021\"}<br/>{\"\"}</text>\n                <div className=\"row\" style={{marginTop: \"5%\"}}>\n                    <div className=\"mixed-chart\" style={{marginLeft: 50}}>\n                        <Chart\n                            // @ts-ignore\n                            options={this.state.options}\n                            // @ts-ignore\n                            series={this.state.series}\n                            type=\"line\"\n                            height={500}\n                        />\n                    </div>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default ChartApex;","import React from 'react';\nimport './App.css';\nimport {BrowserRouter as Router, Switch, Route} from 'react-router-dom';\nimport Editor from './components/Editor/Editor';\nimport Home from './Home';\nimport ChartBar from \"./components/Chart/ChartBar\";\nimport Search from \"./components/Search/Search\";\nimport ChartApex from \"./components/Chart/ChartApex\";\n\nexport default function App() {\n\n    return (\n        <Router>\n            <Switch>\n                <Route path=\"/editor/:id\" component={Editor}/>\n                <Route path=\"/chartYear\" component={ChartApex}/>\n                <Route path=\"/chart\" component={ChartBar}/>\n                <Route path=\"/search\" component={Search}/>\n                <Route path=\"/\">\n                    <Home/>\n                </Route>\n            </Switch>\n        </Router>\n    )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}