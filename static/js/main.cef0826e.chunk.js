(this["webpackJsonpzwo-generator"]=this["webpackJsonpzwo-generator"]||[]).push([[0],{120:function(e,t,a){},237:function(e,t,a){},301:function(e,t,a){},334:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAF3CAMAAABpHvvMAAAAdVBMVEUAAADCnnyBgIFZwXP5zUftbkDYLh9AkNCAgIBYwHP5zUbsbUDWLR8/kM+AgIBZwXT5zUftbkHWLR9Aj9BAkNFBlNCCgoJZxHf50EftcUHbLyQ/j9CAgIBZwXT4zUbsbUHXLh/WLR/sbUD4zEZYwHM/j8+Af4AuOHljAAAAIXRSTlMABpKSkpKS8/Pz8/Pz1dXV1dXVlI8rKysrKyu9vb29vb25aJjaAAAFKElEQVR42uzUSarrUBRDUV9sB1JAik4KeEVsz3+MfwqKTuO/K/YewkJooFKv3e30/qDTbfcaqFjbvY12baBK7fdt9Qt8qd3bbDeQ3+ttx8fX5s7g/0M33/02kN3Jdz8NZPcuNBDunYW7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4h4S7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuBd6ztfj8kHH6/zEvVqbF6O54V6q/SxWPw33SvNiNuNe6LnYPXGvzN1uxt3v6rtfcfc7+u5H3P2WQrjj3lu4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4h4S7FO4h4S6Fe0i4S+EeEu5SuIeEuxTuIeEuhXtIuEvhHhLuUriHhLsU7iHhLoV7SLhL4R4S7lK4/6Ue0+WwftDhMj1wr9am1WhquJdq36vVd8O90rSaTbgXeqx2D9wrc7ebcPe7+O4X3P0OvvsBd7+1EO649xbuUrjjjjvu3YW7FO644457d+EuhTvuuOPeXbhL4Y477rh3F+5SuOOOO+7dhbsU7rjjjnt34S6FO+64495duEvhjjvuuHcX7lK444477t2FuxTuuOOOe3fhXug+nvfbB+3P4x33am3cjMaGe6n2tVl9NdwrjZvZiHuh+2Z3x70yd7sRd7+z737G3W/vu+9x99sK4Y477v/YoXMbhmEoCmCQGruxGx9N0kr7j5gNDOR9pAhAjkDv3r179+7du/dH3r179+7du3fv3r179+79mXfv3r179+7du3fv3r17f+bdu3fv3r179+7du3fv3p959+7du3fv3n/9fp3bMr6wbOflvaodI3A07yXtNSKv5r3iGKHDe8E1Ypf33Dlip/fcNmKb99wyYov33Cjw7t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evXv37t27d+/evf/R+933dX5h3fvtvfre+gz05r303t4z8m7eK+99hrr3wvs9Y7f3/L3PWPeev+8ztnvP39cZW73n77PAu3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r179+7du3fv3r17/7RbHzkOAlEURatIjkSTHfe/yv60EWbKY3r//Kqkozco3HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx133HHHHXfccccdd9xxxx33ve5Hnf1obx909oPlJ539ZPlZZz9bftHZL3vdM909s7dT3T21PNfdc8sL3b2wvNTdS8uvOvvVBbp7YG/Xuntteai7h5ZHuntkeay7x5ZXunvlWt29tbcb3b2xvNPdO8t73b23fNDdB8sT3T1xLtDnPt1NZb/956E+9+miHXPfM/h4qkfdfXTOPzT2h3fT+bvGfp/zp8b+nPOXxv6a87fG/v7miT53Ox9Ia/fue/4mrX3JQ2ntSx5Ja1/yWFq7n+uPxv6Z+zbIjps+kFnQut81dXrY9IFM62aVd2F+2vSBzMNulfdRcd70gSyifpUPcXnZ9IEs42GJfSKt3Ttu541Jdd30gayScer+ABmSgZr2GxviAAAAAElFTkSuQmCC"},335:function(e,t,a){e.exports=a.p+"static/media/facebook.7c8d991e.png"},336:function(e,t,a){e.exports=a.p+"static/media/twitter.d1044b25.png"},342:function(e,t,a){e.exports=a.p+"static/media/profile.96434577.jpg"},376:function(e,t,a){e.exports=a(664)},381:function(e,t,a){},382:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},404:function(e,t,a){},409:function(e,t){},411:function(e,t){},421:function(e,t,a){},424:function(e,t,a){},469:function(e,t,a){},482:function(e,t,a){},593:function(e,t,a){},66:function(e,t,a){e.exports={container:"EditComment_container__3v7h9",box:"EditComment_box__RtwxM",textArea:"EditComment_textArea__S8c5i",cta:"EditComment_cta__2fxb-",btnPrimary:"EditComment_btnPrimary__1xe60",btnSecondary:"EditComment_btnSecondary__1k1As",btnIcon:"EditComment_btnIcon__1Xb_G"}},664:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),c=(a(381),a(382),a(76)),l=a(17),s=a(27),u=a.n(s),m=a(77),d=a(7),p=a(4),f=(a(384),"#807F80"),h="#0E90D4",g="#00C46A",b="#FFCB00",v="#FF6430",E="#E90000",w="#FFFFFF",y={Z1:{min:.1,max:.605},Z2:{min:.605,max:.763},Z3:{min:.763,max:.901},Z4:{min:.901,max:1.053},Z5:{min:1.053,max:1.194},Z6:{min:1.194,max:2}},k=[[y.Z1.min,y.Z1.max],[y.Z2.min,y.Z2.max],[y.Z3.min,y.Z3.max],[y.Z4.min,y.Z4.max],[y.Z5.min,y.Z5.max],[y.Z6.min,y.Z6.max]],O=(a(385),a(64)),x=a(10),S=a(6),C=(a(389),function(e){var t,a,n,o=["1M","5K","10K","HM","M"];return r.a.createElement("div",{className:"label"},e.duration&&"00:00"!==e.duration&&r.a.createElement("div",null,r.a.createElement(x.a,{icon:S.f,fixedWidth:!0})," ",e.duration),e.power&&"bike"===e.sportType&&r.a.createElement("div",null,r.a.createElement(x.a,{icon:S.e,fixedWidth:!0})," ",e.power,"W"),e.powerStart&&e.powerEnd&&"bike"===e.sportType&&r.a.createElement("div",null,r.a.createElement(x.a,{icon:S.e,fixedWidth:!0})," ",e.powerStart,"W -"," ",e.powerEnd,"W"),e.weight&&e.power&&e.ftp&&"bike"===e.sportType&&r.a.createElement("div",null,(e.power/e.weight).toFixed(1),"W/Kg \xb7"," ",(e.power/e.ftp*100).toFixed(0),"% FTP"),e.powerStart&&e.powerEnd&&e.ftp&&"bike"===e.sportType&&r.a.createElement("div",null,(e.powerStart/e.ftp*100).toFixed(0),"% FTP -"," ",(e.powerEnd/e.ftp*100).toFixed(0),"% FTP"),"run"===e.sportType&&void 0!==e.distance&&0!==e.distance&&r.a.createElement("div",null,r.a.createElement(x.a,{icon:S.q,fixedWidth:!0})," ",e.distance.toFixed(0)," m"),e.power&&e.ftp&&null!==e.pace&&"run"===e.sportType&&r.a.createElement("div",null,(e.power/e.ftp*100).toFixed(1).replace(/[.]0$/,""),"%"," ",o[e.pace||0]," pace"),e.powerStart&&e.powerEnd&&e.ftp&&null!==e.pace&&"run"===e.sportType&&r.a.createElement("div",null,(e.powerStart/e.ftp*100).toFixed(0),"% to"," ",(e.powerEnd/e.ftp*100).toFixed(0),"%"," ",o[e.pace||0]," pace"),"bike"===e.sportType&&r.a.createElement("div",{className:"cadence-row"},r.a.createElement("label",{className:"cadenceLabel"},"Cadence"),r.a.createElement("input",{type:"number",min:"40",max:"150",step:"5",name:"cadence",value:e.cadence||"",onChange:function(t){e.setCadence&&e.setCadence(parseInt(t.target.value))},onClick:function(e){e.stopPropagation()},className:"textField cadence"})),"run"===e.sportType&&e.speed&&r.a.createElement("div",null,null===(t=e.speed)||void 0===t?void 0:t.toFixed(1)," Km/h"),"run"===e.sportType&&e.speedStart&&e.speedEnd&&r.a.createElement("div",null,null===(a=e.speedStart)||void 0===a?void 0:a.toFixed(1)," Km/h - ",null===(n=e.speedEnd)||void 0===n?void 0:n.toFixed(1)," ","Km/h"))}),j=a(28),N=a.n(j),T=(a(232),{getWorkoutLength:function(e,t){var a=0;return e.map((function(e){return"time"===t?a+=e.time:("bar"===e.type&&(a+=e.time),"trapeze"===e.type&&(a+=e.time),"freeRide"===e.type&&(a+=e.time),"interval"===e.type&&(a+=e.repeat*e.onDuration,a+=e.repeat*e.offDuration)),!1})),a},getStressScore:function(e,t){var a=0;return e.map((function(e){if("bar"===e.type){var n=e.power*t,r=e.power;a+=e.time*n*r}if("trapeze"===e.type){var o=(e.startPower+e.endPower)/2*t,i=(e.startPower+e.endPower)/2;a+=e.time*o*i}if("interval"===e.type){var c=e.onPower*t,l=e.onPower;a+=e.onDuration*e.repeat*c*l;var s=e.offPower*t,u=e.offPower;a+=e.offDuration*e.repeat*s*u}return!1})),(a/(3600*t)*100).toFixed(0)},calculateEstimatedTimes:function(e,t){var a=[];return t.forEach((function(n,r){if(!n)for(var o=0;o<t.length;o++)if(t[o]){var i=N.a.duration(t[o]).asSeconds()*(e[r]/e[o])*1.06;a[r]=N.a.utc(1e3*i).format("HH:mm:ss");break}})),a},getWorkoutDistance:function(e){var t=0;return e.map((function(e){return t+=e.length})),(t/1e3).toFixed(1)},getTimeinSeconds:function(e){return N.a.duration(e).asSeconds()},formatDuration:function(e){return N.a.duration(e,"seconds").format("mm:ss",{trim:!1})},calculateTime:function(e,t){return e/t},calculateDistance:function(e,t){return e*t},round:function(e,t){return Math.floor(e/t)*t},calculateSpeed:function(e,t){return e/t*18/5}}),I=function(e){var t,a=Math.round(e.power*e.ftp),o=T.formatDuration(e.time),i=e.length,c=(t=e.power)>=0&&t<y.Z1.max?{backgroundColor:f}:t>=y.Z2.min&&t<y.Z2.max?{backgroundColor:h}:t>=y.Z3.min&&t<y.Z3.max?{backgroundColor:g}:t>=y.Z4.min&&t<y.Z4.max?{backgroundColor:b}:t>=y.Z5.min&&t<y.Z5.max?{backgroundColor:v}:{backgroundColor:E},l=Object(n.useState)("time"===e.durationType?(e.time||0)/3:(e.length||0)/10),s=Object(p.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(250*e.power),w=Object(p.a)(d,2),k=w[0],x=w[1],S=Object(n.useState)(!1),j=Object(p.a)(S,2),N=j[0],I=j[1],P=Object(n.useState)(e.selected),D=Object(p.a)(P,2),F=D[0],R=D[1],L=void 0!==i&&void 0!==e.time?T.calculateSpeed(i,e.time):0;Object(n.useEffect)((function(){R(e.selected)}),[e.selected]);return r.a.createElement("div",{className:"segment",onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},onClick:function(){return e.onClick(e.id)},style:e.selected?{zIndex:10}:{}},(F||N)&&e.showLabel&&r.a.createElement(C,{sportType:e.sportType,duration:o,power:a,weight:e.weight,ftp:e.ftp,pace:e.pace,distance:i,cadence:e.cadence,setCadence:function(t){return function(t){e.onChange(e.id,{time:e.time,length:e.length,power:e.power,cadence:t,type:"bar",pace:e.pace,id:e.id})}(t)},speed:L}),r.a.createElement(O.a,{className:"bar",size:{width:"time"===e.durationType?(e.time||0)/3:(e.length||0)/10,height:250*e.power},minWidth:3,minHeight:250*y.Z1.min,maxHeight:250*y.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStop:function(t,a,n,r){return function(t,a){m(u+t),x(k+a);var n="time"===e.durationType?T.round(T.calculateDistance(3*(u+t)*e.power,e.speed),1):T.round(10*(u+t),200),r="time"===e.durationType?T.round(3*(u+t),5):T.round(1*T.calculateTime(e.length,e.speed)/e.power,1);e.onChange(e.id,{time:r,length:n,power:(k+a)/250,cadence:e.cadence,type:"bar",pace:e.pace,id:e.id})}(r.width,r.height)},onResize:function(t,a,n,r){return function(t,a){var n="time"===e.durationType?T.round(T.calculateDistance(3*(u+t)*e.power,e.speed),1):T.round(10*(u+t),200),r="time"===e.durationType?T.round(3*(u+t),5):T.round(1*T.calculateTime(e.length,e.speed)/e.power,1);e.onChange(e.id,{time:r,length:n,power:(k+a)/250,cadence:e.cadence,type:"bar",pace:e.pace,id:e.id})}(r.width,r.height)},style:c}))},P=(a(390),function(e){var t,a=Math.round(e.startPower*e.ftp),o=Math.round(e.endPower*e.ftp),i=Math.abs((e.endPower+e.startPower)/2),c=T.formatDuration(e.time),l=Object(n.useState)(!1),s=Object(p.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)("time"===e.durationType?Math.round((e.time||0)/3/3):(e.length||0)/10/3),w=Object(p.a)(d,2),x=w[0],S=w[1],j=void 0!==e.length&&void 0!==e.time?T.calculateSpeed(e.length,e.time):0,N=void 0!==e.length&&void 0!==e.time?T.calculateSpeed(e.length,e.time):0,I=Object(n.useState)(250*e.startPower),P=Object(p.a)(I,2),D=P[0],F=P[1],R=Object(n.useState)(250*(e.endPower+e.startPower)/2),L=Object(p.a)(R,2),z=L[0],W=L[1],A=Object(n.useState)(250*e.endPower),Z=Object(p.a)(A,2),M=Z[0],H=Z[1],U=M>D?M:D,K=M>D?M-D:D-M,B=M>D?0:3*x,X=M>D?K:0,_=M>D?0:K,Y=M>D?V(e.startPower,e.endPower):V(e.endPower,e.startPower),q=M>D?"row":"row-reverse";function V(e,t){var a={};return k.forEach((function(n,r){e>=n[0]&&e<n[1]?a["Z"+(r+1)]=n[1]-e:t>=n[0]&&t<n[1]?a["Z"+(r+1)]=t-n[0]:t>=n[1]&&e<n[0]?a["Z"+(r+1)]=n[1]-n[0]:a["Z"+(r+1)]=0})),a}return r.a.createElement("div",{className:"segment",onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},style:e.selected?{zIndex:1}:{},onClick:function(){return e.onClick(e.id)}},(e.selected||u)&&r.a.createElement(C,{duration:c,powerStart:a,powerEnd:o,ftp:e.ftp,sportType:e.sportType,pace:e.pace,distance:e.length,cadence:e.cadence,setCadence:function(t){return function(t){e.onChange(e.id,{time:e.time,length:e.length,startPower:e.startPower,endPower:e.endPower,cadence:t,type:"trapeze",pace:e.pace,id:e.id})}(t)},speedStart:j,speedEnd:N}),r.a.createElement("div",{className:"trapeze",onClick:function(){return e.onClick(e.id)}},r.a.createElement(O.a,{className:"trapeze-component",size:{width:x,height:D},minWidth:3,minHeight:250*y.Z1.min,maxHeight:250*y.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStop:function(e,t,a,n){return r=n.height,F(D+r),void W((M+r+D)/2);var r},onResize:function(t,a,n,r){return function(t){var a="time"===e.durationType?T.round(3*x*3,5):T.round(1*T.calculateTime(e.length,e.speed)/i,1),n="time"===e.durationType?T.round(1*T.calculateDistance(3*x,e.speed)/i,1):T.round(10*x*3,200);e.onChange(e.id,{time:a,length:n,startPower:(D+t)/250,endPower:M/250,cadence:e.cadence,type:"trapeze",pace:e.pace,id:e.id})}(r.height)}}),r.a.createElement(O.a,{className:"trapeze-component",size:{width:x,height:z},minWidth:3,minHeight:250*y.Z1.min,maxHeight:250*y.Z6.max,enable:{top:!0},grid:[1,1],onResizeStop:function(e,t,a,n){return r=n.height,W(z+r),F(D+r),void H(M+r);var r},onResize:function(t,a,n,r){return function(t){var a="time"===e.durationType?T.round(3*x*3,5):T.round(1*T.calculateTime(e.length,e.speed)/i,1),n="time"===e.durationType?T.round(1*T.calculateDistance(3*x,e.speed)/i,1):T.round(10*x*3,200);e.onChange(e.id,{time:a,length:n,startPower:(D+t)/250,endPower:(M+t)/250,cadence:e.cadence,type:"trapeze",pace:e.pace,id:e.id})}(r.height)}}),r.a.createElement(O.a,{className:"trapeze-component",size:{width:x,height:M},minWidth:3,minHeight:250*y.Z1.min,maxHeight:250*y.Z6.max,enable:{top:!0,right:!0},grid:[1,1],onResizeStop:function(e,t,a,n){return r=n.width,o=n.height,S(x+r/3),H(M+o),void W((M+o+D)/2);var r,o},onResize:function(t,a,n,r){return function(t,a){var n=x+t/3,r="time"===e.durationType?T.round(1*T.calculateDistance(3*n*3,e.speed)/i,1):T.round(10*n*3,200),o="time"===e.durationType?T.round(3*n*3,5):T.round(1*T.calculateTime(e.length,e.speed)/i,1);e.onChange(e.id,{time:o,length:r,startPower:D/250,endPower:(M+a)/250,cadence:e.cadence,type:"trapeze",pace:e.pace,id:e.id})}(r.width,r.height)}})),r.a.createElement("div",{className:"trapeze-colors",style:{height:U,flexDirection:q,backgroundColor:(t=e.startPower,t>=0&&t<y.Z1.max?f:t>=y.Z2.min&&t<y.Z2.max?h:t>=y.Z3.min&&t<y.Z3.max?g:t>=y.Z4.min&&t<y.Z4.max?b:t>=y.Z5.min&&t<y.Z5.max?v:E)}},r.a.createElement("div",{className:"color",style:{backgroundColor:f,width:"".concat(100*Y.Z1/Math.abs(e.endPower-e.startPower),"%")}}),r.a.createElement("div",{className:"color",style:{backgroundColor:h,width:"".concat(100*Y.Z2/Math.abs(e.endPower-e.startPower),"%")}}),r.a.createElement("div",{className:"color",style:{backgroundColor:g,width:"".concat(100*Y.Z3/Math.abs(e.endPower-e.startPower),"%")}}),r.a.createElement("div",{className:"color",style:{backgroundColor:b,width:"".concat(100*Y.Z4/Math.abs(e.endPower-e.startPower),"%")}}),r.a.createElement("div",{className:"color",style:{backgroundColor:v,width:"".concat(100*Y.Z5/Math.abs(e.endPower-e.startPower),"%")}}),r.a.createElement("div",{className:"color",style:{backgroundColor:E,width:"".concat(100*Y.Z6/Math.abs(e.endPower-e.startPower),"%")}})),r.a.createElement("svg",{height:"".concat(U),width:"".concat(3*x),className:"trapeze-svg-container"},r.a.createElement("polygon",{points:"0,".concat(X," 0,").concat(U," ").concat(3*x,",").concat(U," ").concat(3*x,",").concat(_),className:"trapeze-svg"}),r.a.createElement("polygon",{points:"0,0 ".concat(B,",").concat(K," ").concat(3*x,",0"),className:"trapeze-svg-off"}),"Sorry, your browser does not support inline SVG."))}),D=(a(391),function(e){var t=T.formatDuration(e.time),a=Object(n.useState)("time"===e.durationType?(e.time||0)/3:(e.length||0)/10),o=Object(p.a)(a,2),i=o[0],c=o[1],l=e.length,s=Object(n.useState)(!1),u=Object(p.a)(s,2),m=u[0],d=u[1];return r.a.createElement("div",{className:"segment",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},style:e.selected?{zIndex:1}:{},onClick:function(){return e.onClick(e.id)}},(e.selected||m)&&r.a.createElement(C,{sportType:e.sportType,duration:t,distance:l,cadence:e.cadence,setCadence:function(t){return function(t){e.onChange(e.id,{time:e.time,type:"freeRide",cadence:t,id:e.id})}(t)}}),r.a.createElement(O.a,{className:"freeRide",size:{width:"time"===e.durationType?(e.time||0)/3:(e.length||0)/10,height:100},minWidth:3,minHeight:100,maxHeight:100,enable:{right:!0},grid:[1,1],onResizeStop:function(t,a,n,r){return function(t){c(i+t);var a="time"===e.durationType?0:T.round(10*(i+t),200),n="time"===e.durationType?T.round(3*(i+t),5):0;e.onChange(e.id,{time:n,length:a,type:"freeRide",cadence:e.cadence,id:e.id})}(r.width)},onResize:function(t,a,n,r){return function(t){var a="time"===e.durationType?0:T.round(10*(i+t),200),n="time"===e.durationType?T.round(3*(i+t),5):0;e.onChange(e.id,{time:n,length:a,type:"freeRide",cadence:e.cadence,id:e.id})}(r.width)}}))}),F=(a(392),function(e){var t=a(324).v4,o=Object(n.useState)([]),i=Object(p.a)(o,2),c=i[0],l=i[1],s=Object(n.useState)(e.repeat),u=Object(p.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(e.onDuration),h=Object(p.a)(f,2),g=h[0],b=h[1],v=Object(n.useState)(e.offDuration),E=Object(p.a)(v,2),w=E[0],y=E[1],k=Object(n.useState)(e.onLength),O=Object(p.a)(k,2),x=O[0],S=O[1],C=Object(n.useState)(e.offLength),j=Object(p.a)(C,2),N=j[0],T=j[1];Object(n.useEffect)((function(){for(var a=[],n=0;n<m;n++)a.push({time:g||0,length:x||0,power:e.onPower,cadence:e.cadence,type:"bar",pace:e.pace,id:t()}),a.push({time:w||0,length:N||0,power:e.offPower,cadence:e.restingCadence,type:"bar",pace:e.pace,id:t()});l(a)}),[m]);var P=function(t,a){return r.a.createElement(I,{key:t.id,id:t.id,time:t.time,length:t.length,power:t.power||100,cadence:t.cadence,ftp:e.ftp,weight:e.weight,sportType:e.sportType,durationType:e.durationType,pace:e.pace,speed:e.speed,onChange:function(t,a){return function(t,a){var n=c.findIndex((function(e){return e.id===t}));n%2===1?(y(a.time),T(a.length)):(b(a.time),S(a.length));for(var r=0;r<c.length;r++)n%2===r%2&&(c[r].time=a.time,c[r].power=a.power,c[r].length=a.length,c[r].cadence=a.cadence);var o=0;c.map((function(e){return o+=e.time}));var i=0;c.map((function(e){return i+=e.length||0})),e.handleIntervalChange(e.id,{time:o,length:i,id:e.id,type:"interval",cadence:c[0].cadence,restingCadence:c[1].cadence,pace:e.pace,repeat:m,onDuration:c[0].time,offDuration:c[1].time,onPower:c[0].power,offPower:c[1].power,onLength:c[0].length,offLength:c[1].length})}(t,a)},onClick:function(){return e.handleIntervalClick(e.id)},selected:e.selected,showLabel:a})};return r.a.createElement("div",null,r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){d(m+1);var t=0;c.map((function(e){return t+=e.time})),e.handleIntervalChange(e.id,{time:((e.onDuration||0)+(e.offDuration||0))*(m+1),length:((e.onLength||0)+(e.offLength||0))*(m+1),id:e.id,type:"interval",cadence:e.cadence,restingCadence:e.restingCadence,pace:e.pace,repeat:e.repeat+1,onDuration:e.onDuration,offDuration:e.offDuration,onPower:e.onPower,offPower:e.offPower,onLength:e.onLength,offLength:e.offLength})}},"+"),r.a.createElement("button",{onClick:function(){if(m>1){d(m-1);var t=0;c.map((function(e){return t+=e.time})),e.handleIntervalChange(e.id,{time:((e.onDuration||0)+(e.offDuration||0))*(m-1),length:((e.onLength||0)+(e.offLength||0))*(m-1),id:e.id,type:"interval",cadence:e.cadence,restingCadence:e.restingCadence,pace:e.pace,repeat:e.repeat-1,onDuration:e.onDuration,offDuration:e.offDuration,onPower:e.onPower,offPower:e.offPower,onLength:e.onLength,offLength:e.offLength})}}},"-")),r.a.createElement("div",{className:"intervals"},c.map((function(e,t){return P(e,0===t||t===c.length-1)}))))}),R=a(325),L=a.n(R),z=(a(396),function(e){var t=Object(n.useState)(e.instruction.time/3),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(p.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(e.instruction.length/10),d=Object(p.a)(m,2),f=d[0],h=d[1];return r.a.createElement(L.a,{axis:"x",handle:".handle",defaultPosition:{x:o,y:e.index%5*20},bounds:{left:0,right:e.width},scale:1,onStop:function(t,a){return n=a.x,u(!1),void(s?e.onChange(e.instruction.id,{id:e.instruction.id,time:3*n,length:10*n,text:e.instruction.text}):e.onClick(e.instruction.id));var n},onDrag:function(e,t){return a=t.x,u(!0),i(a),void h(a);var a}},r.a.createElement("div",null,r.a.createElement(x.a,{style:{display:"block",opacity:.7},icon:""!==e.instruction.text?S.i:S.h,size:"lg",fixedWidth:!0,className:"handle"}),s&&r.a.createElement("div",{className:"edit"},"time"===e.durationType?r.a.createElement("span",{style:{fontSize:"13px"},"data-testid":"time"},T.formatDuration(3*o)):r.a.createElement("span",{style:{fontSize:"13px"},"data-testid":"time"},10*f," m")),r.a.createElement("div",{className:"line"})))}),W=a(66),A=a.n(W),Z=function(e){var t=Object(n.useState)(e.instruction.text),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(p.a)(c,2),s=l[0],u=l[1];return r.a.createElement("div",{className:A.a.container},r.a.createElement("div",{className:A.a.box},r.a.createElement("textarea",{name:"comment",value:o,placeholder:"Enter message",className:A.a.textArea,onChange:function(e){return i(e.target.value)},onBlur:function(){return u(!s)}}),r.a.createElement("div",{className:A.a.cta},r.a.createElement("button",{className:A.a.btnPrimary,type:"button",onClick:function(){e.onChange(e.instruction.id,{id:e.instruction.id,text:o,lenth:e.instruction.length,time:e.instruction.time})}},"Save"),r.a.createElement("button",{className:A.a.btnSecondary,type:"button",onClick:function(){return e.dismiss()}},"Dismiss"),r.a.createElement("button",{className:A.a.btnIcon,type:"button",onClick:function(){return e.onDelete(e.instruction.id)}},r.a.createElement(x.a,{icon:S.w,className:"delete"})))))},M=(a(397),function(e){return r.a.createElement("div",{className:"popup-background"},r.a.createElement("div",{className:"popup",style:{width:e.width,height:e.height}},r.a.createElement("button",{className:"close",onClick:function(){return e.dismiss()}},r.a.createElement(x.a,{icon:S.u,size:"lg",fixedWidth:!0})),e.children))});a(398);function H(){return r.a.createElement("div",{style:{color:"black",textAlign:"left",fontSize:14}},r.a.createElement("h2",null,"Privacy Policy"),r.a.createElement("p",null,"Your privacy is important to us. It is Sharpify Ltd's policy to respect your privacy regarding any information we may collect from you across our website, ",r.a.createElement("a",{href:"https://www.zwiftworkout.com"},"https://www.zwiftworkout.com"),", and other sites we own and operate."),r.a.createElement("p",null,"We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we\u2019re collecting it and how it will be used."),r.a.createElement("p",null,"We only retain collected information for as long as necessary to provide you with your requested service. What data we store, we\u2019ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorised access, disclosure, copying, use or modification."),r.a.createElement("p",null,"We don\u2019t share any personally identifying information publicly or with third-parties, except when required to by law."),r.a.createElement("p",null,"Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies."),r.a.createElement("p",null,"You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services."),r.a.createElement("p",null,"Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us."),r.a.createElement("p",null,"This policy is effective as of 1 September 2020."))}function U(){return r.a.createElement("div",{style:{color:"black",textAlign:"left",fontSize:14}},r.a.createElement("h2",null,"Sharpify Ltd Terms of Service"),r.a.createElement("h3",null,"1. Terms"),r.a.createElement("p",null,"By accessing the website at ",r.a.createElement("a",{href:"https://www.zwiftworkout.com"},"https://www.zwiftworkout.com"),", you are agreeing to be bound by these terms of service, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this website are protected by applicable copyright and trademark law."),r.a.createElement("h3",null,"2. Use Licence"),r.a.createElement("ol",{type:"a"},r.a.createElement("li",null,"Permission is granted to temporarily download one copy of the materials (information or software) on Sharpify Ltd's website for personal, non-commercial transitory viewing only. This is the grant of a licence, not a transfer of title, and under this licence you may not:",r.a.createElement("ol",{type:"i"},r.a.createElement("li",null,"modify or copy the materials;"),r.a.createElement("li",null,"use the materials for any commercial purpose, or for any public display (commercial or non-commercial);"),r.a.createElement("li",null,"attempt to decompile or reverse engineer any software contained on Sharpify Ltd's website;"),r.a.createElement("li",null,"remove any copyright or other proprietary notations from the materials; or"),r.a.createElement("li",null,'transfer the materials to another person or "mirror" the materials on any other server.'))),r.a.createElement("li",null,"This licence shall automatically terminate if you violate any of these restrictions and may be terminated by Sharpify Ltd at any time. Upon terminating your viewing of these materials or upon the termination of this licence, you must destroy any downloaded materials in your possession whether in electronic or printed format.")),r.a.createElement("h3",null,"3. Disclaimer"),r.a.createElement("ol",{type:"a"},r.a.createElement("li",null,"The materials on Sharpify Ltd's website are provided on an 'as is' basis. Sharpify Ltd makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."),r.a.createElement("li",null,"Further, Sharpify Ltd does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its website or otherwise relating to such materials or on any sites linked to this site.")),r.a.createElement("h3",null,"4. Limitations"),r.a.createElement("p",null,"In no event shall Sharpify Ltd or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Sharpify Ltd's website, even if Sharpify Ltd or a Sharpify Ltd authorised representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you."),r.a.createElement("h3",null,"5. Accuracy of materials"),r.a.createElement("p",null,"The materials appearing on Sharpify Ltd's website could include technical, typographical, or photographic errors. Sharpify Ltd does not warrant that any of the materials on its website are accurate, complete or current. Sharpify Ltd may make changes to the materials contained on its website at any time without notice. However Sharpify Ltd does not make any commitment to update the materials."),r.a.createElement("h3",null,"6. Links"),r.a.createElement("p",null,"Sharpify Ltd has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by Sharpify Ltd of the site. Use of any such linked website is at the user's own risk."),r.a.createElement("h3",null,"7. Modifications"),r.a.createElement("p",null,"Sharpify Ltd may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service."),r.a.createElement("h3",null,"8. Governing Law"),r.a.createElement("p",null,"These terms and conditions are governed by and construed in accordance with the laws of London, Uk and you irrevocably submit to the exclusive jurisdiction of the courts in that State or location."))}function K(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(p.a)(i,2),l=c[0],s=c[1];return r.a.createElement("div",{className:"footer"},r.a.createElement("ul",null,r.a.createElement("li",null,"Zwift Workout v1.9 \xa9 2021 Sharpify Ltd All Rights Reserved"),r.a.createElement("li",null,r.a.createElement("a",{href:"#terms",onClick:function(){return o(!0)}},"Terms of Service")),r.a.createElement("li",null,r.a.createElement("a",{href:"#privacy",onClick:function(){return s(!0)}},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/breiko83/zwo-editor/issues",target:"blank"},"Report an issue"))),a&&r.a.createElement(M,{width:"90%",height:"80%",dismiss:function(){return o(!1)}},r.a.createElement(U,null)),l&&r.a.createElement(M,{width:"50%",height:"50%",dismiss:function(){return s(!1)}},r.a.createElement(H,null)))}a(399);var B=a(151);a(400),a(402);B.initializeApp({apiKey:"AIzaSyAzGYdisRLDODZS4xz51UEv6n3P6G0kGu8",authDomain:"zwift-6e52a.firebaseapp.com",databaseURL:"https://zwift-6e52a-default-rtdb.firebaseio.com",projectId:"zwift-6e52a",storageBucket:"zwift-6e52a.appspot.com",messagingSenderId:"440835793009",appId:"1:440835793009:web:aa8cf13ceae766fae73bd0",measurementId:"G-T4CLX2YQ91"});var X=B,_=B.auth(),Y=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),o=a[0],i=a[1];return r.a.useEffect((function(){X.database().ref("users/"+e.userId+"/workouts").orderByChild("name").once("value").then((function(e){e.forEach((function(e){i((function(t){return[].concat(Object(d.a)(t),[{id:e.key||"",name:e.val().name||"No name",description:e.val().description,updatedAt:e.val().updatedAt,durationType:e.val().durationType,workoutTime:e.val().workoutTime,workoutDistance:e.val().workoutDistance}])}))}))}))}),[e.userId]),r.a.createElement("div",{className:"workouts"},r.a.createElement("h2",{className:"title"},"Your workouts"),o.map((function(e,t){return r.a.createElement("a",{href:"/editor/".concat(e.id),key:e.id,style:t%2===0?{backgroundColor:"#DCDCDC"}:{backgroundColor:"#C8C8C8"}},r.a.createElement("div",{className:"title"},e.name),"time"===e.durationType?r.a.createElement("div",{className:"description"},r.a.createElement(x.a,{icon:S.f,size:"sm",fixedWidth:!0})," ",e.workoutTime):r.a.createElement("div",{className:"description"},r.a.createElement(x.a,{icon:S.q,size:"sm",fixedWidth:!0})," ",e.workoutDistance))})),o.length<1&&r.a.createElement("p",null,"No saved workouts yet"))},q=(a(237),function(e){var t,a=e.width;return r.a.createElement("div",{className:"x-axis x-axis-time",style:{width:a}},(t=6,Object(d.a)(new Array(t)).flatMap((function(e,t){return["00","10","20","30","40","50"].map((function(e){return"".concat(t,":").concat(e)}))}))).map((function(e){return r.a.createElement("span",{key:e},e)})))}),V=function(e){var t=e.width;return r.a.createElement("div",{className:"x-axis x-axis-distance",style:{width:t}},Object(d.a)(new Array(44)).map((function(e,t){return r.a.createElement("span",{key:t},t,"K")})))},G=(a(404),function(){return r.a.createElement("div",{className:"zone-axis"},Object.entries(y).reverse().map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:a,style:{height:250*n.max}},a)})))});function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var $=r.a.createElement("title",null,"Untitled"),ee=r.a.createElement("desc",null,"Created with Sketch."),te=r.a.createElement("defs",null),ae=r.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("polygon",{id:"Rectangle",fill:"#7F7E7F",points:"180 65.2104719 240 85.8538747 240 171.707749 180 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#3F8FCF",points:"120 43.4859336 180 65.1100145 180 171.707749 120 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#58C073",points:"60 22.1649934 120 43.597184 120 171.707749 60 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#F8CC46",points:"0 0 60 22.0976562 60 171.707749 0 171.707749"})),ne=function(e){var t=e.svgRef,a=e.title,n=Q(e,["svgRef","title"]);return r.a.createElement("svg",J({viewBox:"0 0 240 172",ref:t},n),void 0===a?$:a?r.a.createElement("title",null,a):null,ee,te,ae)},re=r.a.forwardRef((function(e,t){return r.a.createElement(ne,J({svgRef:t},e))}));a.p;function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ce=r.a.createElement("title",null,"Untitled"),le=r.a.createElement("desc",null,"Created with Sketch."),se=r.a.createElement("defs",null),ue=r.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("polygon",{id:"Rectangle",fill:"#7F7E7F",points:"0 85.8538747 60 65.290624 60 171.707749 0 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#3F8FCF",points:"60 65.2906189 120 44 120 171.707749 60 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#58C073",points:"120 44 180 22 180 171.707749 120 171.707749"}),r.a.createElement("polygon",{id:"Rectangle",fill:"#F8CC46",points:"180 22 240 0 240 171.707749 180 171.707749"})),me=function(e){var t=e.svgRef,a=e.title,n=ie(e,["svgRef","title"]);return r.a.createElement("svg",oe({viewBox:"0 0 240 172",ref:t},n),void 0===a?ce:a?r.a.createElement("title",null,a):null,le,se,ue)},de=r.a.forwardRef((function(e,t){return r.a.createElement(me,oe({svgRef:t},e))}));a.p;function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var he=r.a.createElement("title",null,"interval"),ge=r.a.createElement("desc",null,"Created with Sketch."),be=r.a.createElement("defs",null),ve=r.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"interval"},r.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:0,y:0,width:24,height:170}),r.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:166,y:0,width:24,height:170}),r.a.createElement("rect",{id:"Rectangle-2",fill:"#F8CC46",x:83,y:0,width:24,height:170}),r.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:24,y:63,width:59,height:107}),r.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:190,y:63,width:59,height:107}),r.a.createElement("rect",{id:"Rectangle-3",fill:"#3F8FCF",x:107,y:63,width:59,height:107}))),Ee=function(e){var t=e.svgRef,a=e.title,n=fe(e,["svgRef","title"]);return r.a.createElement("svg",pe({viewBox:"0 0 249 170",ref:t},n),void 0===a?he:a?r.a.createElement("title",null,a):null,ge,be,ve)},we=r.a.forwardRef((function(e,t){return r.a.createElement(Ee,pe({svgRef:t},e))}));a.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ke(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Oe=r.a.createElement("title",null,"Rectangle"),xe=r.a.createElement("desc",null,"Created with Sketch."),Se=r.a.createElement("defs",null),Ce=r.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"warmup",fillRule:"nonzero",fill:"#F8CC46"},r.a.createElement("polygon",{id:"Rectangle",points:"0 0 40 0 40 121.707749 6.24500451e-16 121.707749"}))),je=function(e){var t=e.svgRef,a=e.title,n=ke(e,["svgRef","title"]);return r.a.createElement("svg",ye({viewBox:"0 0 40 30",ref:t},n),void 0===a?Oe:a?r.a.createElement("title",null,a):null,xe,Se,Ce)},Ne=r.a.forwardRef((function(e,t){return r.a.createElement(je,ye({svgRef:t},e))})),Te=(a.p,a(326)),Ie=a.n(Te),Pe=(a(421),function(e){return r.a.createElement("div",{className:"form-check"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:e.label,checked:e.isSelected,onChange:function(t){return e.onCheckboxChange()},className:"form-check-input"}),e.label))}),De=["Recovery","Intervals","FTP","TT"];function Fe(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Save Workout"),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"name"},"Workout Title"),r.a.createElement("input",{type:"text",name:"name",placeholder:"Workout title",value:e.name,onChange:function(t){return e.onNameChange(t.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"description"},"Workout description"),r.a.createElement("textarea",{name:"description",placeholder:"Workout description",value:e.description,onChange:function(t){return e.onDescriptionChange(t.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"author"},"Workout Author"),r.a.createElement("input",{type:"text",name:"author",placeholder:"Workout Author",value:e.author,onChange:function(t){return e.onAuthorChange(t.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"author"},"Workout Tags"),De.map((function(t){return r.a.createElement(Pe,{key:t,label:t,isSelected:e.tags.includes(t),onCheckboxChange:function(){return e.onTagsChange(function(e,t){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(d.a)(e),[t])}(e.tags,t))}})}))),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{className:"btn btn-primary",onClick:e.onSave},"Save"),r.a.createElement("button",{className:"btn",onClick:e.onDismiss},"Dismiss"),r.a.createElement("button",{onClick:e.onLogout},"Logout")))}a(120);var Re=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),l=Object(p.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),f=d[0],h=d[1];return r.a.createElement("form",{onSubmit:function(t){!function(t,a){_.createUserWithEmailAndPassword(t,a).then((function(t){var a=t.user;e.signUp(a)})).catch((function(e){return h(e.message)}))}(o,s),t.preventDefault()}},r.a.createElement("h2",null,"SignUp"),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){return e.showLogin()}},"Click here")," to Login"),r.a.createElement("div",{className:"alert"},f),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",name:"email",value:o,onChange:function(e){i(e.target.value),h("")},required:!0})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",name:"password",autoComplete:"new-password",value:s,onChange:function(e){u(e.target.value),h("")},required:!0})),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Signup"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.dismiss()}},"Dismiss")))},Le=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),l=Object(p.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),f=d[0],h=d[1];return r.a.createElement("form",{onSubmit:function(t){!function(t,a){_.signInWithEmailAndPassword(t,a).then((function(t){var a=t.user;e.login(a)})).catch((function(e){return h(e.message)}))}(o,s),t.preventDefault()}},r.a.createElement("h2",null,"Login"),r.a.createElement("p",null,"Not registered yet? ",r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){return e.showSignup()}},"Click here")," to Signup"),r.a.createElement("div",{className:"alert"},f),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",name:"email",value:o,onChange:function(e){i(e.target.value),h("")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",name:"password",autoComplete:"new-password",value:s,onChange:function(e){u(e.target.value),h("")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Login"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.dismiss()}},"Dismiss")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn link-button",onClick:function(){return e.showForgotPassword()}},"Forgot Your Password?")))},ze=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),l=Object(p.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(p.a)(m,2),f=d[0],h=d[1],g=Object(n.useState)(!1),b=Object(p.a)(g,2),v=b[0],E=b[1];return r.a.createElement("form",{onSubmit:function(e){!function(e){_.sendPasswordResetEmail(e).then((function(){h("We have emailed you a password reset link."),E(!0)})).catch((function(e){u(e.message)}))}(o),e.preventDefault()}},r.a.createElement("h2",null,"Forgotten Password?"),r.a.createElement("div",{className:"alert"},s),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",name:"email",value:o,onChange:function(e){i(e.target.value),u("")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:v},"Reset Password"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.dismiss()}},"Dismiss")),r.a.createElement("div",{className:"success"},f))},We=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),s=Object(p.a)(c,2),u=s[0],m=s[1],d=Object(n.useState)(""),f=Object(p.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(""),v=Object(p.a)(b,2),E=v[0],w=v[1],y=Object(n.useState)(!1),k=Object(p.a)(y,2),O=k[0],x=k[1],S=Object(l.g)(),C=new URLSearchParams(S.search).get("oobCode")||"";return r.a.createElement("form",{onSubmit:function(e){g(""),o===u?function(e,t){_.confirmPasswordReset(e,t).then((function(){w("Your password has been updated"),x(!0)})).catch((function(e){g(e.message)}))}(C,o):g("Passwords do not match"),e.preventDefault()}},r.a.createElement("h2",null,"Reset Your Password"),r.a.createElement("div",{className:"alert"},h),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"New password"),r.a.createElement("input",{type:"password",name:"password",autoComplete:"new-password",value:o,onChange:function(e){i(e.target.value),g("")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"password"},"Confirm password"),r.a.createElement("input",{type:"password",name:"confirmPassword",autoComplete:"new-password",value:u,onChange:function(e){m(e.target.value),g("")}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:O},"Update Password"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.dismiss()}},"Dismiss")),r.a.createElement("div",{className:"success"},E))},Ae=a(145),Ze=a(98),Me=a(46),He=(a(424),a(347));a(467);function Ue(e){var t=e.times,a=e.onChange,o=Object(n.useCallback)((function(){var e=T.calculateEstimatedTimes([1.60934,5,10,21.0975,42.195,1.60934],[t.oneMile,t.fiveKm,t.tenKm,t.halfMarathon,t.marathon,"00:11:20"]);a({oneMile:t.oneMile||e[0],fiveKm:t.fiveKm||e[1],tenKm:t.tenKm||e[2],halfMarathon:t.halfMarathon||e[3],marathon:t.marathon||e[4]})}),[t,a]);return r.a.createElement("div",{className:"run-workout"},r.a.createElement(Ke,{time:t.oneMile,onChange:function(e){return a(Object(Me.a)(Object(Me.a)({},t),{},{oneMile:e}))}},"1 Mile Time"),r.a.createElement(Ke,{time:t.fiveKm,onChange:function(e){return a(Object(Me.a)(Object(Me.a)({},t),{},{fiveKm:e}))}},"5 Km Time"),r.a.createElement(Ke,{time:t.tenKm,onChange:function(e){return a(Object(Me.a)(Object(Me.a)({},t),{},{tenKm:e}))}},"10 Km Time"),r.a.createElement(Ke,{time:t.halfMarathon,onChange:function(e){return a(Object(Me.a)(Object(Me.a)({},t),{},{halfMarathon:e}))}},"Half Marathon Time"),r.a.createElement(Ke,{time:t.marathon,onChange:function(e){return a(Object(Me.a)(Object(Me.a)({},t),{},{marathon:e}))}},"Marathon Time"),r.a.createElement("div",{className:"form-input"},r.a.createElement("button",{onClick:o,className:"btn"},"Estimate missing times")))}var Ke=function(e){var t=e.time,a=e.onChange,n=e.children;return r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,r.a.createElement("abbr",{title:"hh:mm:ss"},n)),r.a.createElement(He.a,{value:""===t?void 0:N()(t,"HH:mm:ss"),placeholder:"00:00:00",defaultOpenValue:N()("00:00:00"),className:"timePicker",onChange:function(e){return a(e?e.format("HH:mm:ss"):"")}}))},Be=a(332),Xe=a.n(Be),_e=(a(469),function(e){var t=e.label,a=e.leftValue,n=e.rightValue,o=e.leftIcon,i=e.rightIcon,c=e.selected,l=e.onChange;return r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,t),r.a.createElement("div",{className:"left-right-toggle"},r.a.createElement(x.a,{className:"icon ".concat(c===a?"active":""),icon:o,size:"lg",fixedWidth:!0}),r.a.createElement(Xe.a,{onChange:function(){return l(c===a?n:a)},checked:c===n,checkedIcon:!1,uncheckedIcon:!1,onColor:"#00C46A",offColor:"#00C46A"}),r.a.createElement(x.a,{className:"icon ".concat(c===n?"active":""),icon:i,size:"lg",fixedWidth:!0})))}),Ye=a(67),qe=a.n(Ye),Ve=a(18),Ge=a(22),Je=function(){function e(t,a,n,r){Object(Ve.a)(this,e);var o=100;"erg"===r&&(o*=2),this.duration=t,this.effort=Math.round(a*o),this.effort2=Math.round(n*o),this.start=0}return Object(Ge.a)(e,[{key:"format_sec",value:function(e){return((e-(e%=60))/60+(9<e?".":".0")+Math.round(1.666667*e)).padEnd(8)}},{key:"toString",value:function(){return this.effort2?"".concat(this.format_sec(this.start),"  ").concat(this.effort,"\n").concat(this.format_sec(this.end),"  ").concat(this.effort2,"\n"):"".concat(this.format_sec(this.start),"  ").concat(this.effort,"\n").concat(this.format_sec(this.end),"  ").concat(this.effort,"\n")}},{key:"end",get:function(){return this.start+this.duration}}]),e}();function Qe(e,t,a,n){e.author,e.name,e.description,e.sportType,e.durationType,e.tags;var r=e.separateBars,o=(e.separateInstructions,[]);r[t].forEach((function(e,t){if("bar"===e.type){var a=new Je(e.time,e.power,null,n);o.push(a)}else if("trapeze"===e.type&&e.startPower&&e.endPower){var r=new Je(e.time,e.startPower,e.endPower,n);o.push(r)}})),o.forEach((function(e,t){var a=o[t-1];e.start=a&&0!=t?a.end:0}));var i="[COURSE HEADER]\nUNITS = ENGLISH\nVERSION = 2\n";return i+="FILE NAME = ".concat(a,".").concat(n,"\n"),"erg"==n&&(i+="FTP = 200\n"),i+="MINUTES ".concat("mrc"==n?"PERCENT":"WATTS","\n"),i+="[END COURSE HEADER]\n",i+="[COURSE DATA]\n",i+=o.map((function(e){return e.toString()})).join(""),i+="[END COURSE DATA]"}function $e(e){var t=e.id,a=e.onDismiss,o=Object(n.useState)(""),i=Object(p.a)(o,2),c=i[0],l=i[1],s=Object(n.useRef)(null),u=Object(n.useCallback)((function(){var e=s.current;null===e||void 0===e||e.select(),document.execCommand("copy"),l("copied!")}),[s,l]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Share Workout"),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"link"},"Share this link"),r.a.createElement("input",{type:"text",name:"link",value:"https://www.zwiftworkout.com/editor/"+t,ref:s}),r.a.createElement("button",{onClick:u},r.a.createElement(x.a,{icon:S.j,size:"lg",fixedWidth:!0})," ",c),r.a.createElement("button",{className:"btn",onClick:a},"Dismiss")))}var et=a(333),tt=function(e){var t,o=e.match,i=a(324).v4,c=Object(n.useState)("new"===o.params.id?localStorage.getItem("id")||la():o.params.id),s=Object(p.a)(c,2),k=s[0],O=s[1],C=Object(n.useState)(JSON.parse(localStorage.getItem("currentWorkout")||"[]")),j=Object(p.a)(C,2),N=j[0],R=j[1],L=Object(n.useState)(void 0),W=Object(p.a)(L,2),A=W[0],H=W[1],U=Object(n.useState)(parseInt(localStorage.getItem("ftp")||"200")),B=Object(p.a)(U,2),J=B[0],Q=B[1],$=Object(n.useState)(parseInt(localStorage.getItem("weight")||"75")),ee=Object(p.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(JSON.parse(localStorage.getItem("instructions")||"[]")),oe=Object(p.a)(ne,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(JSON.parse(localStorage.getItem("tags")||"[]")),se=Object(p.a)(le,2),ue=se[0],me=se[1],pe=Object(n.useState)(localStorage.getItem("name")||""),fe=Object(p.a)(pe,2),he=fe[0],ge=fe[1],be=Object(n.useState)(localStorage.getItem("description")||""),ve=Object(p.a)(be,2),Ee=ve[0],ye=ve[1],ke=Object(n.useState)(localStorage.getItem("author")||""),Oe=Object(p.a)(ke,2),xe=Oe[0],Se=Oe[1],Ce=Object(n.useState)(!1),je=Object(p.a)(Ce,2),Te=je[0],Pe=je[1],De=Object(n.useState)(!1),Me=Object(p.a)(De,2),He=Me[0],Ke=Me[1],Be=Object(n.useState)(null),Xe=Object(p.a)(Be,2),Ye=Xe[0],Ve=Xe[1],Ge=Object(n.useState)("login"),Je=Object(p.a)(Ge,2),tt=Je[0],at=Je[1],nt=Object(n.useRef)(null),rt=Object(n.useRef)(null),ot=Object(n.useState)(1320),it=Object(p.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)(),ut=Object(p.a)(st,2),mt=ut[0],dt=ut[1],pt=Object(n.useState)(!1),ft=Object(p.a)(pt,2),ht=ft[0],gt=ft[1],bt=Object(n.useState)(localStorage.getItem("sportType")||"bike"),vt=Object(p.a)(bt,2),Et=vt[0],wt=vt[1],yt=Object(n.useState)(localStorage.getItem("durationType")||"time"),kt=Object(p.a)(yt,2),Ot=kt[0],xt=kt[1],St=Object(n.useState)(function(){var e=localStorage.getItem("runningTimes");if(e)return JSON.parse(e);var t=localStorage.getItem("oneMileTime")||"",a=localStorage.getItem("fiveKmTime")||"",n=localStorage.getItem("tenKmTime")||"",r=localStorage.getItem("halfMarathonTime")||"",o=localStorage.getItem("marathonTime")||"";return t||a||n||r||o?{oneMile:t,fiveKm:a,tenKm:n,halfMarathon:r,marathon:o}:{oneMile:"",fiveKm:"",tenKm:"",halfMarathon:"",marathon:""}}()),Ct=Object(p.a)(St,2),jt=Ct[0],Nt=Ct[1],Tt=Object(n.useState)(!1),It=Object(p.a)(Tt,2),Pt=It[0],Dt=It[1],Ft=Object(n.useState)(),Rt=Object(p.a)(Ft,2),Lt=Rt[0],zt=Rt[1],Wt=Object(n.useState)([]),At=Object(p.a)(Wt,2),Zt=At[0],Mt=At[1],Ht=Object(n.useState)([]),Ut=Object(p.a)(Ht,2),Kt=Ut[0],Bt=Ut[1],Xt=Object(n.useState)([]),_t=Object(p.a)(Xt,2),Yt=_t[0],qt=_t[1],Vt=Object(n.useState)([]),Gt=Object(p.a)(Vt,2),Jt=Gt[0],Qt=Gt[1],$t=Object(n.useState)([[]]),ea=Object(p.a)($t,2),ta=ea[0],aa=ea[1],na=Object(n.useState)([[]]),ra=Object(p.a)(na,2),oa=ra[0],ia=ra[1],ca=Object(l.g)();function la(){return Math.random().toString(36).substr(2,16)}function sa(){console.log("New workout"),O(la()),R([]),ce([]),ge(""),ye(""),Se(""),me([]),Mt([]),Bt([]),qt([]),Qt([]),aa([[]]),ia([[]])}function ua(e,t){var a=N.findIndex((function(t){return t.id===e})),n=Object(d.a)(N);n[a]=t,R(n)}function ma(e){H(e===A?void 0:e)}function da(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:200,o={time:"time"===Ot?t:T.round(T.calculateTime(r,Sa(n)),1),length:"time"===Ot?T.round(T.calculateDistance(t,Sa(n)),1):r,power:e,cadence:a,type:"bar",id:i(),pace:n};return R((function(e){return[].concat(Object(d.a)(e),[o])})),o}function pa(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c={time:"time"===Ot?a:T.round(T.calculateTime(r,Sa(n)),1),length:"time"===Ot?T.round(T.calculateDistance(a,Sa(n)),1):r,startPower:e,endPower:t,cadence:o,pace:n,type:"trapeze",id:i()};return R((function(e){return[].concat(Object(d.a)(e),[c])})),c}function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n={time:"time"===Ot?e:0,length:"time"===Ot?0:a,cadence:t,type:"freeRide",id:i()};return R((function(e){return[].concat(Object(d.a)(e),[n])})),n}function ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:200,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:200,m={time:"time"===Ot?(t+a)*e:T.round(T.calculateTime((s+u)*e,Sa(l)),1),length:"time"===Ot?T.round(T.calculateDistance((t+a)*e,Sa(l)),1):(s+u)*e,id:i(),type:"interval",cadence:o,restingCadence:c,repeat:e,onDuration:"time"===Ot?t:T.round(T.calculateTime(1*s/n,Sa(l)),1),offDuration:"time"===Ot?a:T.round(T.calculateTime(1*u/r,Sa(l)),1),onPower:n,offPower:r,pace:l,onLength:"time"===Ot?T.round(T.calculateDistance(1*t/n,Sa(l)),1):s,offLength:"time"===Ot?T.round(T.calculateDistance(1*a/r,Sa(l)),1):u};return R((function(e){return[].concat(Object(d.a)(e),[m])})),m}function ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={text:e,time:t,length:a,id:i()};return ce((function(e){return[].concat(Object(d.a)(e),[n])})),n}function ba(e,t){var a=ie.findIndex((function(t){return t.id===e})),n=Object(d.a)(ie);n[a]=t,ce(n)}function va(e){var t=Object(d.a)(N);R(t.filter((function(t){return t.id!==e}))),H(void 0)}function Ea(){Pe(!0)}function wa(e){dt({visible:!0,class:"loading",text:"Saving.."});var t=[],a=function(e,t,a,n,r,o){e.author,e.name,e.description;var i=e.sportType,c=e.durationType,l=e.tags,s=e.separateBars,u=e.separateInstructions,m=0,d=0,p=qe.a.begin().ele("workout_file").ele("author",a).up().ele("name",n).up().ele("description",r).up().ele("sportType",i).up().ele("durationType",c).up().ele("tags",o);return l.forEach((function(e){var t;t=qe.a.create("tag").att("name",e),p.importDocument(t)})),p=p.up().ele("workout"),s[t].forEach((function(e,a){var n,r;"bar"===e.type?(n=qe.a.create("SteadyState").att("Duration","time"===c?e.time:e.length).att("Power",e.power).att("pace",e.pace),0!==e.cadence&&n.att("Cadence",e.cadence)):"trapeze"===e.type&&e.startPower&&e.endPower?(r="Ramp",0===a&&(r="Warmup"),a===s.length-1&&(r="Cooldown"),e.startPower,e.endPower,n=qe.a.create(r).att("Duration","time"===c?e.time:e.length).att("PowerLow",e.startPower).att("PowerHigh",e.endPower).att("pace",e.pace),0!==e.cadence&&n.att("Cadence",e.cadence)):"interval"===e.type?(n=qe.a.create("IntervalsT").att("Repeat",e.repeat).att("OnDuration","time"===c?e.onDuration:e.onLength).att("OffDuration","time"===c?e.offDuration:e.offLength).att("OnPower",e.onPower).att("OffPower",e.offPower).att("pace",e.pace),0!==e.cadence&&n.att("Cadence",e.cadence),0!==e.restingCadence&&n.att("CadenceResting",e.restingCadence)):(n=qe.a.create("FreeRide").att("Duration","time"===c?e.time:e.length).att("FlatRoad",0),0!==e.cadence&&n.att("Cadence",e.cadence)),"time"===c?u[t].filter((function(t){return t.time>=m&&t.time<m+e.time})).forEach((function(e){n.ele("textevent",{timeoffset:e.time-m,message:e.text})})):u[t].filter((function(t){return t.length>=d&&t.length<d+(e.length||0)})).forEach((function(e){n.ele("textevent",{distoffset:e.length-d,message:e.text})})),p.importDocument(n),m+=e.time,d+=e.length||0})),p.end({pretty:!0})}({author:xe,name:he,description:Ee,sportType:Et,durationType:Ot,tags:ue,separateBars:ta,separateInstructions:oa},e,Kt[e],Zt[e],Yt[e],Jt[e]),n=Qe({author:xe,name:he,description:Ee,sportType:Et,durationType:Ot,tags:ue,separateBars:ta,separateInstructions:oa},e,Zt[e],"mrc"),r=Qe({author:xe,name:he,description:Ee,sportType:Et,durationType:Ot,tags:ue,separateBars:ta,separateInstructions:oa},e,Zt[e],"erg"),o=new Blob([a],{type:"application/zwo"}),i=new Blob([n],{type:"application/mrc"}),c=new Blob([r],{type:"application/erg"});if(t.push(o),t.push(i),t.push(c),Ye){var l=X.database().ref(),s={id:k,name:he,description:Ee,author:xe,workout:ta[e],tags:ue,instructions:oa[e],userId:Ye.uid,updatedAt:Date(),sportType:Et,durationType:Ot},u={name:he,description:Ee,updatedAt:Date(),sportType:Et,durationType:Ot,workoutTime:T.formatDuration(T.getWorkoutLength(ta[e],Ot)),workoutDistance:T.getWorkoutDistance(ta[e])},m={};m["users/".concat(xe,"/workouts/").concat(Ee,"/").concat(Zt[e])]=u,m["workouts/".concat(Ee,"/").concat(Zt[e])]=s,l.update(m).then((function(){Oa(o,!1),Oa(i,!1),Oa(c,!1),dt({visible:!1})})).catch((function(e){console.log(e),dt({visible:!0,class:"error",text:"Cannot save this"})}))}else dt({visible:!1});return t}function ya(e){return new Promise((function(t){return setTimeout(t,e)}))}function ka(){return(ka=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wa(t).forEach((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=a,n.download="".concat(Zt[t],".").concat(e.type.replace("application/","")),n.click(),window.URL.revokeObjectURL(a)})),e.next=4,ya(100);case 4:case"end":return e.stop()}}),e)})),a=0;case 2:if(!(a<ta.length)){e.next=7;break}return e.delegateYield(t(a),"t0",4);case 4:a++,e.next=2;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_UPLOAD_FUNCTION||"https://zwiftworkout.netlify.app/.netlify/functions/upload",{method:"POST",body:JSON.stringify({fileType:"zwo",fileName:"".concat(k,".zwo")})}).then((function(e){return e.json()})).then((function(a){var n=a.uploadURL;fetch(n,{method:"PUT",headers:{"Content-Type":"zwo"},body:e}).then((function(e){return e.text()})).then((function(e){console.log("File uploaded"),t&&xa(k)})).catch((function(e){console.error(e)}))}))}function xa(e){R([]),ce([]),Mt([]),Bt([]),qt([]),Qt([]),aa([[]]),ia([[]]),fetch("".concat("https://zwift-workout.s3-eu-west-1.amazonaws.com","/").concat(e,".zwo")).then((function(e){return e.text()})).then((function(e){e=e.replace(/<!--(.*?)-->/gm,"");var t=Ie.a.xml2js(e).elements[0];if("workout_file"===t.name){var a=t.elements.findIndex((function(e){return"author"===e.name}));-1!==a&&t.elements[a].elements&&Se(t.elements[a].elements[0].text);var n=t.elements.findIndex((function(e){return"name"===e.name}));-1!==n&&t.elements[n].elements&&ge(t.elements[n].elements[0].text);var r=t.elements.findIndex((function(e){return"description"===e.name}));-1!==r&&t.elements[r].elements&&ye(t.elements[r].elements[0].text);var o=t.elements.findIndex((function(e){return"workout"===e.name})),i=0;t.elements[o].elements.map((function(e){var t=parseFloat(e.attributes.Duration);"SteadyState"===e.name&&da(parseFloat(e.attributes.Power||e.attributes.PowerLow),parseFloat(e.attributes.Duration),parseFloat(e.attributes.Cadence||"0"),parseInt(e.attributes.Pace||"0")),"Ramp"!==e.name&&"Warmup"!==e.name&&"Cooldown"!==e.name||pa(parseFloat(e.attributes.PowerLow),parseFloat(e.attributes.PowerHigh),parseFloat(e.attributes.Duration),parseInt(e.attributes.Pace||"0"),void 0,parseInt(e.attributes.Cadence)),"IntervalsT"===e.name&&(ha(parseFloat(e.attributes.Repeat),parseFloat(e.attributes.OnDuration),parseFloat(e.attributes.OffDuration),parseFloat(e.attributes.OnPower),parseFloat(e.attributes.OffPower),parseInt(e.attributes.Cadence||"0"),parseInt(e.attributes.CadenceResting),parseInt(e.attributes.Pace||"0")),t=(parseFloat(e.attributes.OnDuration)+parseFloat(e.attributes.OffDuration))*parseFloat(e.attributes.Repeat)),"FreeRide"===e.name&&fa(parseFloat(e.attributes.Duration),parseInt(e.attributes.Cadence));var a=e.elements;return a&&a.length>0&&a.map((function(e){return"textevent"===e.name.toLowerCase()&&ga(e.attributes.message,i+parseFloat(e.attributes.timeoffset)),!1})),i+=t,!1}))}})).catch((function(e){console.error(e)}))}function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("bike"===Et)return 0;var t=[1.60934,5,10,21.0975,42.195],a=[jt.oneMile,jt.fiveKm,jt.tenKm,jt.halfMarathon,jt.marathon];return 1e3*t[e]/T.getTimeinSeconds(a[e])}Object(n.useEffect)((function(){"resetPassword"===new URLSearchParams(ca.search).get("mode")&&(at("updatePassword"),Pe(!0))}),[ca]),Object(n.useEffect)((function(){dt({visible:!0,class:"loading",text:"Loading.."}),k===localStorage.getItem("id")||(R([]),ce([]),ge(""),ye(""),Se(""),me([]),Mt([]),Bt([]),qt([]),Qt([]),aa([[]]),ia([[]])),localStorage.setItem("id",k),console.log("useEffect firebase"),dt({visible:!1}),_.onAuthStateChanged((function(e){e&&Ve(e)})),window.history.replaceState("","","/editor/".concat(k)),Ze.a.initialize("UA-55073449-9"),Ze.a.pageview(window.location.pathname+window.location.search)}),[k]),Object(n.useEffect)((function(){var e;localStorage.setItem("currentWorkout",JSON.stringify(N)),localStorage.setItem("ftp",J.toString()),localStorage.setItem("instructions",JSON.stringify(ie)),localStorage.setItem("weight",te.toString()),localStorage.setItem("name",he),localStorage.setItem("description",Ee),localStorage.setItem("author",xe),localStorage.setItem("tags",JSON.stringify(ue)),localStorage.setItem("sportType",Et),localStorage.setItem("durationType",Ot),localStorage.setItem("runningTimes",JSON.stringify(jt)),lt((null===(e=rt.current)||void 0===e?void 0:e.scrollWidth)||1320)}),[rt,N,J,ie,te,he,Ee,xe,ue,Et,Ot,jt]);var Ca=function(){switch(tt){case"login":return r.a.createElement(Le,{login:Ve,showSignup:function(){return at("signup")},dismiss:function(){return Pe(!1)},showForgotPassword:function(){return at("forgotPassword")}});case"signup":return r.a.createElement(Re,{signUp:Ve,showLogin:function(){return at("login")},dismiss:function(){return Pe(!1)}});case"forgotPassword":return r.a.createElement(ze,{dismiss:function(){return Pe(!1)},workoutId:k});case"updatePassword":return r.a.createElement(We,{dismiss:function(){at("login"),Pe(!0)}})}};return r.a.createElement("div",{className:"container",onKeyDown:function(e){if(!(e.target instanceof HTMLInputElement)&&!(e.target instanceof HTMLTextAreaElement))switch(e.keyCode){case 8:va(A||""),e.preventDefault();break;case 37:!function(e){var t=Object(d.a)(N),a=t.findIndex((function(t){return t.id===e})),n=t[a];n&&n.time>5&&"time"===Ot&&(n.time=n.time-5,n.length=1*T.calculateDistance(n.time,Sa(n.pace||0))/(n.power||1),R(t));n&&(n.length||0)>200&&"distance"===Ot&&(n.length=(n.length||0)-200,n.time=1*T.calculateTime(n.length,Sa(n.pace||0))/(n.power||1),R(t))}(A||"");break;case 39:!function(e){var t=Object(d.a)(N),a=t.findIndex((function(t){return t.id===e})),n=t[a];n&&"time"===Ot&&(n.time=n.time+5,n.length=1*T.calculateDistance(n.time,Sa(n.pace||0))/(n.power||1),R(t));n&&"distance"===Ot&&(n.length=(n.length||0)+200,n.time=1*T.calculateTime(n.length,Sa(n.pace||0))/(n.power||1),R(t))}(A||"");break;case 38:!function(e){var t=Object(d.a)(N),a=t.findIndex((function(t){return t.id===e})),n=t[a];n&&n.power&&(n.power=parseFloat((n.power+1/J).toFixed(3)),"time"===Ot?n.length=1*T.calculateDistance(n.time,Sa(n.pace||0))/n.power:n.time=1*T.calculateTime(n.length,Sa(n.pace||0))/n.power,R(t))}(A||"");break;case 40:!function(e){var t=Object(d.a)(N),a=t.findIndex((function(t){return t.id===e})),n=t[a];n&&n.power&&n.power>=y.Z1.min&&(n.power=parseFloat((n.power-1/J).toFixed(3)),"time"===Ot?n.length=1*T.calculateDistance(n.time,Sa(n.pace||0))/n.power:n.time=1*T.calculateTime(n.length,Sa(n.pace||0))/n.power,R(t))}(A||"")}},tabIndex:0},r.a.createElement(Ae.a,null,r.a.createElement("title",null,he?"".concat(he," - Zwift Workout Editor"):"My Workout - Zwift Workout Editor"),r.a.createElement("meta",{name:"description",content:Ee}),r.a.createElement("meta",{property:"og:title",content:he?"".concat(he," - Zwift Workout Editor"):"My Workout - Zwift Workout Editor"}),r.a.createElement("meta",{property:"og:description",content:Ee}),r.a.createElement("link",{rel:"canonical",href:"https://www.zwiftworkout.com/editor/".concat(k)}),r.a.createElement("meta",{property:"og:url",content:"https://www.zwiftworkout.com/editor/".concat(k)})),(null===mt||void 0===mt?void 0:mt.visible)&&r.a.createElement("div",{className:"message ".concat(mt.class)},mt.text,r.a.createElement("button",{className:"close",onClick:function(){return dt({visible:!1})}},r.a.createElement(x.a,{icon:S.u,size:"lg",fixedWidth:!0}))),ht&&r.a.createElement(M,{width:"500px",dismiss:function(){return gt(!1)}},Ye?r.a.createElement(Y,{userId:Ye.uid}):Ca()),Lt&&r.a.createElement(Z,{instruction:Lt,onChange:function(e,t){ba(e,t),zt(void 0)},dismiss:function(){return zt(void 0)},onDelete:function(e){!function(e){var t=Object(d.a)(ie);ce(t.filter((function(t){return t.id!==e})))}(e),zt(void 0)}}),Te&&r.a.createElement(M,{width:"500px",dismiss:function(){return Pe(!1)}},Ye?r.a.createElement(Fe,{name:he,description:Ee,author:xe,tags:ue,onNameChange:ge,onDescriptionChange:ye,onAuthorChange:Se,onTagsChange:me,onSave:function(){for(var e=0;e<ta.length;e++)wa(e),Pe(!1)},onDismiss:function(){return Pe(!1)},onLogout:function(){console.log("logout"),_.signOut().then((function(){return Ve(null)}))}}):Ca()),He&&r.a.createElement(M,{width:"500px",dismiss:function(){return Ke(!1)}},r.a.createElement($e,{id:k,onDismiss:function(){return Ke(!1)}})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,he),r.a.createElement("div",{className:"description"},Ee),r.a.createElement("p",null,xe?"by ".concat(xe):"")),r.a.createElement("div",{className:"workout"},r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Workout Time"),r.a.createElement("input",{className:"textInput",value:T.formatDuration(T.getWorkoutLength(N,Ot)),disabled:!0})),"run"===Et&&r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Workout Distance"),r.a.createElement("input",{className:"textInput",value:T.getWorkoutDistance(N),disabled:!0})),"bike"===Et&&r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{title:"Training Load"},"Training Load"),r.a.createElement("input",{className:"textInput",value:T.getStressScore(N,J),disabled:!0})),"run"===Et&&r.a.createElement(_e,{label:"Duration Type",leftValue:"time",rightValue:"distance",leftIcon:S.f,rightIcon:S.q,selected:Ot,onChange:xt}),r.a.createElement(_e,{label:"Sport Type",leftValue:"bike",rightValue:"run",leftIcon:S.d,rightIcon:S.r,selected:Et,onChange:function(e){wt(e),xt("bike"===e?"time":"distance")}}))),"run"===Et&&r.a.createElement(Ue,{times:jt,onChange:Nt}),Pt&&"bike"===Et&&r.a.createElement("div",{className:"text-editor"},r.a.createElement("textarea",{onChange:function(e){return function(e){R([]),ce([]),Mt([]),Bt([]),qt([]),Qt([]),aa([[]]),ia([[]]);var t=[],a=new Array,n=[],r=new Array;(e+"\n").split("\n").forEach((function(e){if(e.includes("author")){var o=e.replace("author","");Bt((function(e){return[].concat(Object(d.a)(e),[o])}))}if(e.includes("training")){var i=e.replace("training","");Mt((function(e){return[].concat(Object(d.a)(e),[i])}))}if(e.includes("description")){var c=e.replace("description","");qt((function(e){return[].concat(Object(d.a)(e),[c])}))}if(e.includes("steady")){var l=e.match(/([0-9]\d*w)/),s=e.match(/([0-9]*.?[0-9]wkg)/),u=e.match(/([0-9]\d*%)/),m=l?parseInt(l[0])/J:1;m=s?parseFloat(s[0])*te/J:m,m=u?parseInt(u[0])/100:m;var p=e.match(/([0-9]\d*s)/),f=e.match(/([0-9]*:?[0-9][0-9]*m)/),h=p&&parseInt(p[0]);h=f?60*parseInt(f[0].split(":")[0])+(parseInt(f[0].split(":")[1])||0):h;var g=e.match(/([0-9]\d*rpm)/),b=da(m,h||300,g?parseInt(g[0]):void 0);t.push(b)}if(e.includes("ramp")||e.includes("warmup")||e.includes("cooldown")){var v=e.match(/([0-9]\d*w)/),E=e.match(/([0-9]*.?[0-9]wkg)/),w=e.match(/([0-9]\d*%)/),y=v?parseInt(v[0])/J:1;y=E?parseFloat(E[0])*te/J:y,y=w?parseInt(w[0])/100:y;var k=e.match(/(-[0-9]\d*w)/),O=e.match(/(-[0-9]*.?[0-9]wkg)/),x=e.match(/-([0-9]\d*%)/),S=k?Math.abs(parseInt(k[0]))/J:1;S=O?Math.abs(parseFloat(O[0]))*te/J:S,S=x?Math.abs(parseInt(x[0]))/100:S;var C=e.match(/([0-9]\d*s)/),j=e.match(/([0-9]*:?[0-9][0-9]*m)/),N=C&&parseInt(C[0]);N=j?60*parseInt(j[0].split(":")[0])+(parseInt(j[0].split(":")[1])||0):N;var T=e.match(/([0-9]\d*rpm)/),I=pa(y,S,N||300,void 0,void 0,T?parseInt(T[0]):void 0);t.push(I)}if(e.includes("freeride")){var P=e.match(/([0-9]\d*s)/),D=e.match(/([0-9]*:?[0-9][0-9]*m)/),F=P&&parseInt(P[0]);F=D?60*parseInt(D[0].split(":")[0])+(parseInt(D[0].split(":")[1])||0):F;var R=e.match(/([0-9]\d*rpm)/),L=fa(F||600,R?parseInt(R[0]):void 0);t.push(L)}if(e.includes("interval")){var z=e.match(/([0-9]\d*x)/),W=z?parseInt(z[0]):3,A=e.match(/([0-9]\d*s)/),Z=e.match(/([0-9]*:?[0-9][0-9]*m)/),M=A&&parseInt(A[0]);M=Z?60*parseInt(Z[0].split(":")[0])+(parseInt(Z[0].split(":")[1])||0):M;var H=e.match(/(-[0-9]\d*s)/),U=e.match(/(-[0-9]*:?[0-9][0-9]*m)/),K=H&&Math.abs(parseInt(H[0]));K=U?60*Math.abs(parseInt(U[0].split(":")[0]))+(parseInt(U[0].split(":")[1])||0):K;var B=e.match(/([0-9]\d*w)/),X=e.match(/([0-9]*.?[0-9]wkg)/),_=e.match(/([0-9]\d*%)/),Y=B?parseInt(B[0])/J:1;Y=X?parseFloat(X[0])*te/J:Y,Y=_?parseInt(_[0])/100:Y;var q=e.match(/(-[0-9]\d*w)/),V=e.match(/(-[0-9]*.?[0-9]wkg)/),G=e.match(/-([0-9]\d*%)/),Q=q?Math.abs(parseInt(q[0]))/J:.5;Q=V?Math.abs(parseFloat(V[0]))*te/J:Q,Q=G?Math.abs(parseInt(G[0]))/100:Q;var $=e.match(/([0-9]\d*rpm)/),ee=$?parseInt($[0]):void 0,ae=e.match(/(-[0-9]\d*rpm)/),ne=ha(W,M||30,K||120,Y,Q,ee,ae?Math.abs(parseInt(ae[0])):void 0);t.push(ne)}if(e.includes("message")){var re=e.match(/["'](.*?)["']/),oe=re?re[0]:"",ie=e.match(/([0-9]\d*s)/),ce=e.match(/([0-9]*:?[0-9][0-9]*m)/),le=ie&&parseInt(ie[0]),se=ga(oe,(le=ce?60*parseInt(ce[0].split(":")[0])+(parseInt(ce[0].split(":")[1])||0):le)||0);n.push(se)}if(e.includes("tags")){var ue=e.replace("tags","");Bt((function(e){return[].concat(Object(d.a)(e),[xe])})),Qt((function(e){return[].concat(Object(d.a)(e),[ue])}))}e.includes("end")&&(a.push([].concat(t)),r.push([].concat(n)),aa([].concat(a)),ia([].concat(r)),t.length=0,n.length=0)})),a.length=0,r.length=0}(e.target.value.replace(/[ \t]+/g,""))},rows:10,spellCheck:!1,className:"text-editor-textarea",placeholder:"Add one block per line here: \nsteady 3.0wkg 30s"}),r.a.createElement("div",{className:"text-editor-instructions"},r.a.createElement("h2",null,"Instructions"),r.a.createElement("p",null,"Every row correspond to a workout block. Scroll down to see some examples."),r.a.createElement("h3",null,"Blocks"),r.a.createElement("p",null,r.a.createElement("span",null,"steady")," ",r.a.createElement("span",null,"warmup")," ",r.a.createElement("span",null,"cooldown")," ",r.a.createElement("span",null,"ramp")," ",r.a.createElement("span",null,"intervals")," ",r.a.createElement("span",null,"freeride")," ",r.a.createElement("span",null,"message")),r.a.createElement("h3",null,"Time"),r.a.createElement("p",null,r.a.createElement("span",null,"30s")," or ",r.a.createElement("span",null,"0:30m")),r.a.createElement("h3",null,"Power"),r.a.createElement("p",null,r.a.createElement("span",null,"250w")," or ",r.a.createElement("span",null,"3.0wkg")," or ",r.a.createElement("span",null,"75%")," (FTP)"),r.a.createElement("h3",null,"Cadence"),r.a.createElement("p",null,r.a.createElement("span",null,"120rpm")),r.a.createElement("h2",null,"Examples"),r.a.createElement("h3",null,"Steady block"),r.a.createElement("p",null,r.a.createElement("code",null,"steady 3.0wkg 30s"),r.a.createElement("code",null,"steady 120w 10m 85rpm")),r.a.createElement("h3",null,"Warmup / Cooldown / Ramp block"),r.a.createElement("p",null,r.a.createElement("code",null,"warmup 2.0wkg-3.5wkg 10m"),r.a.createElement("code",null,"cooldown 180w-100w 5m 110rpm")),r.a.createElement("h3",null,"Intervals"),r.a.createElement("p",null,r.a.createElement("code",null,"interval 10x 30s-30s 4.0wkg-1.0wkg 110rpm-85rpm"),r.a.createElement("code",null,"interval 3x 1:00m-5:00m 300w-180w")),r.a.createElement("h3",null,"Free Ride"),r.a.createElement("p",null,r.a.createElement("code",null,"freeride 10m 85rpm")),r.a.createElement("h3",null,"Text Event"),r.a.createElement("p",null,r.a.createElement("code",null,'message "Get ready to your first set!" 30s'),r.a.createElement("code",null,'message "Last one!" 20:00m')))),r.a.createElement("div",{id:"editor",className:"editor"},A&&r.a.createElement("div",{className:"actions"},r.a.createElement("button",{onClick:function(){return function(e){var t=N.findIndex((function(t){return t.id===e}));if(t>0){var a=Object(d.a)(N),n=Object(d.a)(N)[t];a.splice(t,1),a.splice(t-1,0,n),R(a)}}(A)},title:"Move Left"},r.a.createElement(x.a,{icon:S.a,size:"lg",fixedWidth:!0})),r.a.createElement("button",{onClick:function(){return function(e){var t=N.findIndex((function(t){return t.id===e}));if(t<N.length-1){var a=Object(d.a)(N),n=Object(d.a)(N)[t];a.splice(t,1),a.splice(t+1,0,n),R(a)}}(A)},title:"Move Right"},r.a.createElement(x.a,{icon:S.b,size:"lg",fixedWidth:!0})),r.a.createElement("button",{onClick:function(){return va(A)},title:"Delete"},r.a.createElement(x.a,{icon:S.v,size:"lg",fixedWidth:!0})),r.a.createElement("button",{onClick:function(){return function(e){var t=N.findIndex((function(t){return t.id===e})),a=Object(d.a)(N)[t];"bar"===a.type&&da(a.power||80,a.time,a.cadence,a.pace,a.length),"freeRide"===a.type&&fa(a.time,a.cadence,a.length),"trapeze"===a.type&&pa(a.startPower||80,a.endPower||160,a.time,a.pace||0,a.length,a.cadence),"interval"===a.type&&ha(a.repeat,a.onDuration,a.offDuration,a.onPower,a.offPower,a.cadence,a.restingCadence,a.pace,a.onLength,a.offLength),H(void 0)}(A)},title:"Duplicate"},r.a.createElement(x.a,{icon:S.j,size:"lg",fixedWidth:!0})),"run"===Et&&r.a.createElement("select",{name:"pace",value:function(e){var t=N.findIndex((function(t){return t.id===e}));if(-1!==t)return Object(d.a)(N)[t].pace}(A),onChange:function(e){var t;return function(e,t){var a=N.findIndex((function(e){return e.id===t}));if(-1!==a){var n=Object(d.a)(N),r=Object(d.a)(n)[a];r.pace=parseInt(e),"time"===Ot?r.length=1*T.calculateDistance(r.time,Sa(r.pace||0))/(r.power||1):r.time=1*T.calculateTime(r.length,Sa(r.pace||0))/(r.power||1),R(n)}}(null===(t=e.target)||void 0===t?void 0:t.value,A)},className:"selectInput"},r.a.createElement("option",{value:"0"},"1 Mile Pace"),r.a.createElement("option",{value:"1"},"5K Pace"),r.a.createElement("option",{value:"2"},"10K Pace"),r.a.createElement("option",{value:"3"},"Half Marathon Pace"),r.a.createElement("option",{value:"4"},"Marathon Pace"))),r.a.createElement("div",{className:"canvas",ref:nt},A&&r.a.createElement("div",{className:"fader",style:{width:null===(t=nt.current)||void 0===t?void 0:t.scrollWidth},onClick:function(){return H(void 0)}}),r.a.createElement("div",{className:"segments",ref:rt},N.map((function(e){return"bar"===e.type?function(e){return r.a.createElement(I,{key:e.id,id:e.id,time:e.time,length:e.length||200,power:e.power||100,cadence:e.cadence,ftp:J,weight:te,sportType:Et,durationType:Ot,pace:e.pace||0,speed:Sa(e.pace||0),onChange:function(e,t){return ua(e,t)},onClick:function(e){return ma(e)},selected:e.id===A,showLabel:!0})}(e):"trapeze"===e.type?function(e){return r.a.createElement(P,{key:e.id,id:e.id,time:e.time,length:e.length||200,cadence:e.cadence,startPower:e.startPower||80,endPower:e.endPower||160,ftp:J,sportType:Et,durationType:Ot,pace:e.pace||0,speed:Sa(e.pace||0),onChange:function(e,t){return ua(e,t)},onClick:function(e){return ma(e)},selected:e.id===A})}(e):"freeRide"===e.type?function(e){return r.a.createElement(D,{key:e.id,id:e.id,time:e.time,length:e.length,cadence:e.cadence,durationType:Ot,sportType:Et,onChange:function(e,t){return ua(e,t)},onClick:function(e){return ma(e)},selected:e.id===A})}(e):"interval"===e.type&&function(e){return r.a.createElement(F,{key:e.id,id:e.id,repeat:e.repeat||3,onDuration:e.onDuration||10,offDuration:e.offDuration||50,onPower:e.onPower||250,offPower:e.offPower||120,onLength:e.onLength||200,offLength:e.offLength||200,cadence:e.cadence,restingCadence:e.restingCadence||0,ftp:J,weight:te,sportType:Et,durationType:Ot,pace:e.pace||0,speed:Sa(e.pace||0),handleIntervalChange:function(e,t){return ua(e,t)},handleIntervalClick:function(e){return ma(e)},selected:e.id===A})}(e)}))),r.a.createElement("div",{className:"slider"},ie.map((function(e,t){return function(e,t){return r.a.createElement(z,{key:e.id,instruction:e,durationType:Ot,width:"distance"===Ot?100*parseInt(T.getWorkoutDistance(N)):T.getWorkoutLength(N,Ot)/3,onChange:function(e,t){return ba(e,t)},onClick:function(e){return zt(ie.find((function(t){return t.id===e})))},index:t})}(e,t)}))),"time"===Ot?r.a.createElement(q,{width:ct}):r.a.createElement(V,{width:ct})),r.a.createElement(G,null)),r.a.createElement("div",{className:"cta"},"bike"===Et?r.a.createElement("div",null,r.a.createElement(et.a,{effect:"solid"}),r.a.createElement("button",{className:"btn btn-square",onClick:function(){N.length>0&&!Pt?window.confirm("Editing a workout from the text editor will overwrite current workout")&&Dt(!Pt):Dt(!Pt)},style:{backgroundColor:"palevioletred"},"data-tip":"New! Workout text editor!"},r.a.createElement(x.a,{icon:S.o,fixedWidth:!0})),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(.5)},style:{backgroundColor:f}},"Z1"),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(y.Z2.min)},style:{backgroundColor:h}},"Z2"),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(y.Z3.min)},style:{backgroundColor:g}},"Z3"),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(y.Z4.min)},style:{backgroundColor:b}},"Z4"),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(y.Z5.min)},style:{backgroundColor:v}},"Z5"),r.a.createElement("button",{className:"btn btn-square",onClick:function(){return da(y.Z6.min)},style:{backgroundColor:E}},"Z6")):r.a.createElement("button",{className:"btn",onClick:function(){return da(1,300,0,0,1e3)},style:{backgroundColor:w}},r.a.createElement(Ne,{className:"btn-icon"})," Steady Pace"),r.a.createElement("button",{className:"btn",onClick:function(){return pa(.25,.75)},style:{backgroundColor:w}},r.a.createElement(de,{className:"btn-icon"})," Warm up"),r.a.createElement("button",{className:"btn",onClick:function(){return pa(.75,.25)},style:{backgroundColor:w}},r.a.createElement(re,{className:"btn-icon"})," Cool down"),r.a.createElement("button",{className:"btn",onClick:function(){return ha()},style:{backgroundColor:w}},r.a.createElement(we,{className:"btn-icon"})," Interval"),r.a.createElement("button",{className:"btn",onClick:function(){return fa()},style:{backgroundColor:w}},r.a.createElement(x.a,{icon:"bike"===Et?S.c:S.r,size:"lg",fixedWidth:!0})," ","Free ","bike"===Et?"Ride":"Run"),r.a.createElement("button",{className:"btn",onClick:function(){return ga()},style:{backgroundColor:w}},r.a.createElement(x.a,{icon:S.h,size:"lg",fixedWidth:!0})," Text Event"),"bike"===Et&&r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{htmlFor:"ftp"},"FTP (W)"),r.a.createElement("input",{className:"textInput",type:"number",name:"ftp",value:J,onChange:function(e){return Q(parseInt(e.target.value))}})),"bike"===Et&&r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{htmlFor:"weight"},"Body Weight (Kg)"),r.a.createElement("input",{className:"textInput",type:"number",name:"weight",value:te,onChange:function(e){return ae(parseInt(e.target.value))}})),r.a.createElement("button",{className:"btn",onClick:function(){window.confirm("Are you sure you want to create a new workout?")&&sa()}},r.a.createElement(x.a,{icon:S.l,size:"lg",fixedWidth:!0})," New"),r.a.createElement("button",{className:"btn",onClick:function(){return Ea()}},r.a.createElement(x.a,{icon:S.s,size:"lg",fixedWidth:!0})," Save"),r.a.createElement("button",{className:"btn",onClick:function(){window.confirm("Are you sure you want to delete this workout?")&&function(){if(Ye){var e=X.database().ref(),t={};t["users/".concat(Ye.uid,"/workouts/").concat(k)]=null,t["workouts/".concat(k)]=null,e.update(t).then((function(){sa()})).catch((function(e){console.log(e),dt({visible:!0,class:"error",text:"Cannot delete workout"})}))}}()}},r.a.createElement(x.a,{icon:S.v,size:"lg",fixedWidth:!0})," Delete"),r.a.createElement("button",{className:"btn",onClick:function(){return function(){return ka.apply(this,arguments)}()}},r.a.createElement(x.a,{icon:S.k,size:"lg",fixedWidth:!0})," Download"),r.a.createElement("input",{accept:".xml,.zwo",id:"contained-button-file",type:"file",style:{display:"none"},onChange:function(e){return function(e){if(N.length>0&&!window.confirm("Are you sure you want to create a new workout?"))return!1;sa(),Oa(e,!0)}(e.target.files[0])}}),r.a.createElement("button",{className:"btn",onClick:function(){return document.getElementById("contained-button-file").click()}},r.a.createElement(x.a,{icon:S.x,size:"lg",fixedWidth:!0})," Upload"),r.a.createElement("button",{className:"btn",onClick:function(){return gt(!0)}},r.a.createElement(x.a,{icon:S.n,size:"lg",fixedWidth:!0})," Workouts"),r.a.createElement("button",{className:"btn",onClick:function(){return function(){if(Ye)for(var e=0;e<ta.length;e++)wa(e),Ke(!0);else Ea()}()}},r.a.createElement(x.a,{icon:S.t,size:"lg",fixedWidth:!0})," Share")),r.a.createElement(K,null))},at=(a(482),a(334)),nt=a.n(at),rt=a(335),ot=a.n(rt),it=a(336),ct=a.n(it);function lt(){return Object(n.useEffect)((function(){Ze.a.initialize("UA-55073449-9"),Ze.a.pageview(window.location.pathname+window.location.search)})),r.a.createElement("div",{className:"home"},r.a.createElement(Ae.a,null,r.a.createElement("meta",{name:"description",content:"Edit and share your Zwift workouts directly from your browser"}),r.a.createElement("meta",{property:"og:title",content:"Zwift Workout Editor"}),r.a.createElement("meta",{property:"og:description",content:"Edit and share your Zwift workouts directly from your browser"}),r.a.createElement("link",{rel:"canonical",href:"https://www.zwiftworkout.com/"}),r.a.createElement("meta",{property:"og:url",content:"https://www.zwiftworkout.com/"})),r.a.createElement("div",{className:"hero"},r.a.createElement("img",{src:nt.a,alt:"logo",width:"100"}),r.a.createElement("h1",null,"Zwift Workout Editor"),r.a.createElement(c.b,{to:"/editor/new",className:"btn btn-primary btn-xl"},"Editor"),r.a.createElement(c.b,{to:"/search",className:"btn btn-primary btn-xl"},"Search"),r.a.createElement(c.b,{to:"/chartYear",className:"btn btn-primary btn-xl"},"Chart")),r.a.createElement("div",{className:"features"},r.a.createElement("h2",null,"Top features"),r.a.createElement("p",null,"Why should I use it?"),r.a.createElement("div",{className:"perks"},r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(x.a,{icon:S.d,fixedWidth:!0}),r.a.createElement(x.a,{icon:S.r,fixedWidth:!0})," Bike & Run"),r.a.createElement("p",null,"Works both for Running and Cycling workouts")),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(x.a,{icon:S.e,fixedWidth:!0})," Fast"),r.a.createElement("p",null,"Super fast Online editor for your Zwift workout files.")),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(x.a,{icon:S.m,fixedWidth:!0})," CPU Friendly"),r.a.createElement("p",null,"Edit your workout files outside Zwift - don't overload you computer")),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(x.a,{icon:S.g,fixedWidth:!0})," Share"),r.a.createElement("p",null,"Easily share your workout files with your friends")),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(x.a,{icon:S.p,fixedWidth:!0})," Open Source"),r.a.createElement("p",null,"This software is free to use.")))),r.a.createElement("div",{className:"blue"},r.a.createElement("div",{className:"share",id:"share"},r.a.createElement("h2",null,"Do you like this?"),r.a.createElement("p",null,"Please help me out by sharing this page on Social Media"),r.a.createElement("a",{href:"https://twitter.com/intent/tweet?text=Check%20out%20this%20Zwift%20Workout%20%20Editor%20https://www.zwiftworkout.com/"},r.a.createElement("img",{src:ct.a,alt:"Twitter",width:"80"})),r.a.createElement("a",{href:"#share",onClick:function(){return window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("https://www.zwiftworkout.com/"),"facebook-share-dialog","width=626,height=436"),!1}},r.a.createElement("img",{src:ot.a,alt:"Facebook",width:"80"})))),r.a.createElement("div",{className:"black"},r.a.createElement("div",{className:"about"},r.a.createElement("h2",null,"About me"),r.a.createElement("div",{className:"bio"},r.a.createElement("h3",null,"Bio"),r.a.createElement("p",null,"I'm a full stack developer and I love cycling. I joined Zwift during the 2020 lockdown and I loved it."),r.a.createElement("p",null,"Find me on Zwift (Carlo Schiesaro ",r.a.createElement("span",{role:"img","aria-label":"Italy"},"\ud83c\uddee\ud83c\uddf9"),") or follow on ",r.a.createElement("a",{href:"https://www.strava.com/athletes/4523127",target:"blank"},"Strava"))),r.a.createElement("div",{className:"contact"},r.a.createElement("h3",null,"Support"),r.a.createElement("p",null,"If you'd like to report for a bug or ask for a new feature please use my ",r.a.createElement("a",{href:"https://github.com/breiko83/zwo-editor",target:"blank"},"github repository"),".")))),r.a.createElement(K,null))}var st=a(346),ut=(a(301),["\u041f\u043b\u0430\u0432\u0430\u043d\u0438\u0435","\u04221","\u0412\u0435\u043b","\u04222","\u0411\u0435\u0433","\u0424\u0438\u043d\u0438\u0448"]);function mt(e){var t=e.split(/[.:]/),a=0,n=0,r=0;switch(t.length){case 3:a=t[0]?parseInt(t[0],10):0,n=t[1]?parseInt(t[1],10):0,r=t[2]?parseInt(t[2],10):0;break;case 2:n=t[0]?parseInt(t[0],10):0,r=t[1]?parseInt(t[1],10):0;break;case 1:r=t[0]?parseInt(t[0],10):0}return 3600*a+60*n+r}function dt(e){return new Date(1e3*e).toISOString().substring(11,19)}var pt=function(e){var t=e.location.state,a=[];return t.Times.forEach((function(e,n,r){var o={RaceName:t.RaceName,Name:t.Names?t.Names[n]:ut[n],Time:mt(t.Times[n])};a.push(o)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("text",{className:"title"},t.Racer,r.a.createElement("br",null),t.RaceName,r.a.createElement("br",null),t.Date),r.a.createElement(st.a,{data:a,keys:["Time"],indexBy:"Name",margin:{top:100,right:100,bottom:50,left:100},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},valueFormat:function(e){return dt(e)},colors:{scheme:"nivo"},colorBy:"indexValue",borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-40,format:function(e){return dt(e)}},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"indexes",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application"}))},ft=a(54),ht=a(342),gt=a.n(ht);a(593);function bt(){var e=Object(l.f)();return r.a.createElement(ft.c,{url:"https://agoge-yshxkjn-arc.searchbase.io",app:"athletes",credentials:"GaR7hfbNn:7fa3b0eb-6275-4704-a576-d611af35d177",enableAppbase:!0},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"30%",margin:"10px"}},r.a.createElement(ft.b,{componentId:"raceNameFilter",dataField:"RaceName.keyword",title:"Filter by race",showCheckbox:!0})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"66%"}},r.a.createElement(ft.a,{style:{marginTop:"35px"},componentId:"searchbox",dataField:["Racer"],fieldWeights:[1],placeholder:"Search for athlete"}),r.a.createElement(ft.d,{componentId:"results",dataField:"Racer",size:8,pagination:!0,react:{and:["searchbox","raceNameFilter"]},style:{textAlign:"center"},render:function(t){var a=t.data;return r.a.createElement(ft.d.ResultCardsWrapper,null,a.map((function(t){return r.a.createElement(ft.e,{key:t._id},r.a.createElement(ft.e.Image,{onClick:function(){return function(t){return e.push({pathname:"/chart",state:t})}(t)},style:{backgroundImage:"url(".concat(gt.a,")")},src:""}),r.a.createElement(ft.e.Title,{style:{fontFamily:"monospace",fontWeight:"bold"},dangerouslySetInnerHTML:{__html:t.Racer}}),r.a.createElement(ft.e.Description,{className:"description",style:{top:"3%",left:0}},r.a.createElement("p",{style:{textAlign:"left"}},"Race: "+t.RaceName),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"left"}},"Sex:\xa0\xa0\xa0\xa0\xa0\xa0",t.Sex),r.a.createElement("p",{style:{textAlign:"left"}},"Country:\xa0\xa0",t.Country),r.a.createElement("p",{style:{textAlign:"left"}},"Division: ",t.Division),r.a.createElement("p",{style:{textAlign:"left"}},"\u041f\u043b\u0430\u0432\u0430\u043d\u0438\u0435: ",t.Times[0]),r.a.createElement("p",{style:{textAlign:"left"}},"T1:\xa0\xa0\xa0\xa0\xa0\xa0\xa0",t.Times[1]),r.a.createElement("p",{style:{textAlign:"left"}},"\u0412\u0435\u043b:\xa0\xa0\xa0\xa0\xa0\xa0",t.Times[2]),r.a.createElement("p",{style:{textAlign:"left"}},"T2:\xa0\xa0\xa0\xa0\xa0\xa0\xa0",t.Times[3]),r.a.createElement("p",{style:{textAlign:"left"}},"\u0411\u0435\u0433:\xa0\xa0\xa0\xa0\xa0\xa0",t.Times[4]),r.a.createElement("p",{style:{textAlign:"left"}},"\u0424\u0438\u043d\u0438\u0448:\xa0\xa0\xa0\xa0",t.Times[5])))})))}}))))}var vt=a(29),Et=a(30),wt=a(345),yt=a.n(wt),kt=function(e){Object(vt.a)(a,e);var t=Object(Et.a)(a);function a(e){var n;return Object(Ve.a)(this,a),(n=t.call(this,e)).state={options:{chart:{id:"basic-line"},xaxis:{categories:[2014,2015,2016,2017,2018,2019,2020,2021]}},series:[{name:"\u041f\u043b\u0430\u0432\u0430\u043d\u0438\u0435",data:["24:48","26:05","29:07","30:27","32:35","30:13","14:19","30:48"]}]},n}return Object(Ge.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("text",{className:"title"},"Sergey MIKHALEV",r.a.createElement("br",null),"2014-2021",r.a.createElement("br",null),"\u041f\u043b\u0430\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("div",{className:"row",style:{marginTop:"5%"}},r.a.createElement("div",{className:"mixed-chart",style:{marginLeft:50}},r.a.createElement(yt.a,{options:this.state.options,series:this.state.series,type:"line",height:500}))))}}]),a}(n.Component);function Ot(){return r.a.createElement(c.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/editor/:id",component:tt}),r.a.createElement(l.a,{path:"/chartYear",component:kt}),r.a.createElement(l.a,{path:"/chart",component:pt}),r.a.createElement(l.a,{path:"/search",component:bt}),r.a.createElement(l.a,{path:"/"},r.a.createElement(lt,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[376,1,2]]]);
//# sourceMappingURL=main.cef0826e.chunk.js.map